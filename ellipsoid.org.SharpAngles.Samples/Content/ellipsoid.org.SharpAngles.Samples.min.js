try{Object.defineProperty(Error.prototype,"message",{enumerable:!0})}catch(e){}var IntelliFactory={Runtime:{Class:function(n,t){function i(){}i.prototype=n;for(var r in t)i[r]=t[r];return i},Define:function(n,t){function i(n,t){var u,f,e;for(u in t)if(f=typeof n[u],e=typeof t[u],f=="object"&&e=="object")i(n[u],t[u]);else if(f=="undefined"||r)n[u]=t[u];else throw new Error("Name conflict: "+u);}var r=!!this.overwrite;i(n,t)},Field:function(n){var t,i=!1;return function(){return i||(i=!0,t=n()),t}},For:function(n,t,i){for(var r=n;r<=t;r++)i(r)},ForEach:function(n,t){for(var i in n)t(i)},New:function(n,t){var i=new n;for(var r in t)r in i||(i[r]=t[r]);return i},OnInit:function(n){"init"in this||(this.init=[]);this.init.push(n)},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Inherit:function(n,t){var r=n.prototype,i;n.prototype=new t;for(i in r)n.prototype[i]=r[i]},Safe:function(n){return n===undefined?{}:n},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"init"in this&&(n(this.init),this.init=[]);"load"in this&&(n(this.load),this.load=[])},Throw:function(n){throw n;},Tupled:function(n){return function(t){return arguments.length>1?n(arguments):n(t)}},Try:function(n,t){try{return n()}catch(i){return t(i)}},TryFinally:function(n,t){try{return n()}finally{t()}},While:function(n,t){while(n())t()}}};Date.now||(Date.now=function(){return(new Date).getTime()});
(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K;$.Define($$,{IntelliFactory:{WebSharper:{AggregateException:$.Class({},{New:function($innerExceptions){var $0=this,$this=this;return $$.e=new $$.Error("AggregateException"),$$.e.InnerExceptions=$innerExceptions,$$.e;}}),Arrays:{Find:function(L,M){var N,O,P;N=b.tryFind(L,M);if(N.$==0){O=c.FailWith("KeyNotFoundException");}else{P=N.$0;O=P;}return O;},FindIndex:function(Q,R){var S,T,U;S=b.tryFindIndex(Q,R);if(S.$==0){T=c.FailWith("KeyNotFoundException");}else{U=S.$0;T=U;}return T;},Pick:function(V,W){var X,Y,Z;X=b.tryPick(V,W);if(X.$==0){Y=c.FailWith("KeyNotFoundException");}else{Z=X.$0;Y=Z;}return Y;},average:function(_0){return d(b.sum(_0))/d(e.GetLength(_0));},averageBy:function(_1,_2){return d(b.sumBy(_1,_2))/d(e.GetLength(_2));},blit:function(_3,_4,_5,_6,_7){var _8;b.checkRange(_3,_4,_7);b.checkRange(_5,_6,_7);for(_8=0;_8<=_7-1;_8++){e.SetArray(_5,_6+_8,e.GetArray(_3,_4+_8));}return;},checkLength:function(_9,_){return e.GetLength(_9)!==e.GetLength(_)?c.FailWith("Arrays differ in length."):null;},checkRange:function(ba,bb,bc){return((bc<0?true:bb<0)?true:e.GetLength(ba)<bb+bc)?c.FailWith("Index was outside the bounds of the array."):null;},choose:function(bc,bd){var be,bf,bg,bh,bi;be=[];for(bf=0;bf<=e.GetLength(bd)-1;bf++){bg=bc(e.GetArray(bd,bf));if(bg.$==0){bh=null;}else{bi=bg.$0;bh=be.push(bi);}}return be;},collect:function(bj,bk){return f.prototype.concat.apply([],b.map(bj,bk));},concat:function(bl){return f.prototype.concat.apply([],b.ofSeq(bl));},create:function(bm,bn){var bo,bp;bo=f(bm);for(bp=0;bp<=bm-1;bp++){e.SetArray(bo,bp,bn);}return bo;},exists2:function(bq,br,bs){b.checkLength(br,bs);return g.exists2(bq,br,bs);},fill:function(bt,bu,bv,bw){var bx;b.checkRange(bt,bu,bv);for(bx=bu;bx<=bu+bv-1;bx++){e.SetArray(bt,bx,bw);}return;},filter:function(by,bz){var bA,bB;bA=[];for(bB=0;bB<=e.GetLength(bz)-1;bB++){by(e.GetArray(bz,bB))?bA.push(e.GetArray(bz,bB)):null;}return bA;},fold:function(bC,bD,bE){var bF,bG;bF=bD;for(bG=0;bG<=e.GetLength(bE)-1;bG++){bF=(bC(bF))(e.GetArray(bE,bG));}return bF;},fold2:function(bH,bI,bJ,bK){var bL,bM;b.checkLength(bJ,bK);bL=bI;for(bM=0;bM<=bJ.length-1;bM++){bL=((bH(bL))(e.GetArray(bJ,bM)))(e.GetArray(bK,bM));}return bL;},foldBack:function(bN,bO,bP){var bQ,bR,bS;bQ=bP;bR=e.GetLength(bO);for(bS=1;bS<=bR;bS++){bQ=(bN(e.GetArray(bO,bR-bS)))(bQ);}return bQ;},foldBack2:function(bT,bU,bV,bW){var bX,bY,bZ;b.checkLength(bU,bV);bX=e.GetLength(bU);bY=bW;for(bZ=1;bZ<=bX;bZ++){bY=((bT(e.GetArray(bU,bX-bZ)))(e.GetArray(bV,bX-bZ)))(bY);}return bY;},forall2:function(b0,b1,b2){b.checkLength(b1,b2);return g.forall2(b0,b1,b2);},init:function(b3,b4){var b5,b6;b3<0?c.FailWith("Negative size given."):null;b5=f(b3);for(b6=0;b6<=b3-1;b6++){e.SetArray(b5,b6,b4(b6));}return b5;},iter:function(b7,b8){var b9;for(b9=0;b9<=e.GetLength(b8)-1;b9++){b7(e.GetArray(b8,b9));}return;},iter2:function(b_,b$,ca){var cb;b.checkLength(b$,ca);for(cb=0;cb<=e.GetLength(b$)-1;cb++){(b_(e.GetArray(b$,cb)))(e.GetArray(ca,cb));}return;},iteri:function(cc,cd){var ce;for(ce=0;ce<=e.GetLength(cd)-1;ce++){(cc(ce))(e.GetArray(cd,ce));}return;},iteri2:function(cf,cg,ch){var ci;b.checkLength(cg,ch);for(ci=0;ci<=e.GetLength(cg)-1;ci++){((cf(ci))(e.GetArray(cg,ci)))(e.GetArray(ch,ci));}return;},map:function(cj,ck){var cl,cm;cl=f(e.GetLength(ck));for(cm=0;cm<=e.GetLength(ck)-1;cm++){e.SetArray(cl,cm,cj(e.GetArray(ck,cm)));}return cl;},map2:function(cn,co,cp){var cq,cr;b.checkLength(co,cp);cq=f(e.GetLength(cp));for(cr=0;cr<=e.GetLength(cp)-1;cr++){e.SetArray(cq,cr,(cn(e.GetArray(co,cr)))(e.GetArray(cp,cr)));}return cq;},mapi:function(cs,ct){var cu,cv;cu=f(e.GetLength(ct));for(cv=0;cv<=e.GetLength(ct)-1;cv++){e.SetArray(cu,cv,(cs(cv))(e.GetArray(ct,cv)));}return cu;},mapi2:function(cw,cx,cy){var cz,cA;b.checkLength(cx,cy);cz=f(e.GetLength(cx));for(cA=0;cA<=e.GetLength(cx)-1;cA++){e.SetArray(cz,cA,((cw(cA))(e.GetArray(cx,cA)))(e.GetArray(cy,cA)));}return cz;},max:function(cB){return b.reduce(function(cC){return function(cD){return c.Max(cC,cD);};},cB);},maxBy:function(cE,cF){return b.reduce(function(cG){return function(cH){return h.Compare(cE(cG),cE(cH))===1?cG:cH;};},cF);},min:function(cI){return b.reduce(function(cJ){return function(cK){return c.Min(cJ,cK);};},cI);},minBy:function(cL,cM){return b.reduce(function(cN){return function(cO){return h.Compare(cL(cN),cL(cO))===-1?cN:cO;};},cM);},nonEmpty:function(cP){return e.GetLength(cP)===0?c.FailWith("The input array was empty."):null;},ofSeq:function(cQ){var cR,cS;cR=[];cS=i.Get(cQ);while(cS.MoveNext()){cR.push(cS.get_Current());}return cR;},partition:function(cT,cU){var cV,cW,cX;cV=[];cW=[];for(cX=0;cX<=e.GetLength(cU)-1;cX++){cT(e.GetArray(cU,cX))?cV.push(e.GetArray(cU,cX)):cW.push(e.GetArray(cU,cX));}return[cV,cW];},permute:function(cY,cZ){var c0,c1;c0=f(e.GetLength(cZ));for(c1=0;c1<=e.GetLength(cZ)-1;c1++){e.SetArray(c0,cY(c1),e.GetArray(cZ,c1));}return c0;},reduce:function(c2,c3){var c4,c5;b.nonEmpty(c3);c4=e.GetArray(c3,0);for(c5=1;c5<=e.GetLength(c3)-1;c5++){c4=(c2(c4))(e.GetArray(c3,c5));}return c4;},reduceBack:function(c6,c7){var c8,c9,c_;b.nonEmpty(c7);c8=e.GetLength(c7);c9=e.GetArray(c7,c8-1);for(c_=2;c_<=c8;c_++){c9=(c6(e.GetArray(c7,c8-c_)))(c9);}return c9;},reverse:function(c$,da,db){var dc;dc=b.sub(c$,da,db).slice().reverse();return b.blit(dc,0,c$,da,e.GetLength(dc));},scan:function(dd,de,df){var dg,dh;dg=f(1+e.GetLength(df));e.SetArray(dg,0,de);for(dh=0;dh<=e.GetLength(df)-1;dh++){e.SetArray(dg,dh+1,(dd(e.GetArray(dg,dh)))(e.GetArray(df,dh)));}return dg;},scanBack:function(di,dj,dk){var dl,dm,dn;dl=e.GetLength(dj);dm=f(1+dl);e.SetArray(dm,dl,dk);for(dn=0;dn<=dl-1;dn++){e.SetArray(dm,dl-dn-1,(di(e.GetArray(dj,dl-dn-1)))(e.GetArray(dm,dl-dn)));}return dm;},sort:function(_do){return b.sortBy(function(dp){return dp;},_do);},sortBy:function(dq,dr){var ds;ds=$.Tupled(function(dt){var du,dv;du=dt[0];dv=dt[1];return c.Compare(dq(du),dq(dv));});return dr.slice().sort(ds);},sortInPlace:function(dw){return b.sortInPlaceBy(function(dx){return dx;},dw);},sortInPlaceBy:function(dy,dz){var dA;dA=$.Tupled(function(dB){var dC,dD;dC=dB[0];dD=dB[1];return c.Compare(dy(dC),dy(dD));});return dz.sort(dA);},sortInPlaceWith:function(dE,dF){var dG;dG=$.Tupled(function(dH){var dI,dJ;dI=dH[0];dJ=dH[1];return(dE(dI))(dJ);});return dF.sort(dG);},sortWith:function(dK,dL){var dM;dM=$.Tupled(function(dN){var dO,dP;dO=dN[0];dP=dN[1];return(dK(dO))(dP);});return dL.slice().sort(dM);},sub:function(dQ,dR,dS){b.checkRange(dQ,dR,dS);return dQ.slice(dR,dR+dS);},sum:function($arr){var $0=this,$this=this;var sum=0;for(var i=0;i<$arr.length;i++)sum+=$arr[i];return sum;},sumBy:function($f,$arr){var $0=this,$this=this;var sum=0;for(var i=0;i<$arr.length;i++)sum+=$f($arr[i]);return sum;},tryFind:function(dT,dU){var dV,dW;dV={$:0};dW=0;while(dW<e.GetLength(dU)?dV.$==0:false){dT(e.GetArray(dU,dW))?dV={$:1,$0:e.GetArray(dU,dW)}:null;dW=dW+1;}return dV;},tryFindIndex:function(dX,dY){var dZ,d0;dZ={$:0};d0=0;while(d0<e.GetLength(dY)?dZ.$==0:false){dX(e.GetArray(dY,d0))?dZ={$:1,$0:d0}:null;d0=d0+1;}return dZ;},tryPick:function(d1,d2){var d3,d4,d5;d3={$:0};d4=0;while(d4<e.GetLength(d2)?d3.$==0:false){d5=d1(e.GetArray(d2,d4));d5.$==1?d3=d5:null;d4=d4+1;}return d3;},unzip:function(d6){var d7,d8,d9,d_,d$,ea;d7=[];d8=[];for(d9=0;d9<=e.GetLength(d6)-1;d9++){d_=e.GetArray(d6,d9);d$=d_[1];ea=d_[0];d7.push(ea);d8.push(d$);}return[d7,d8];},unzip3:function(eb){var ec,ed,ee,ef,eg,eh,ei,ej;ec=[];ed=[];ee=[];for(ef=0;ef<=e.GetLength(eb)-1;ef++){eg=e.GetArray(eb,ef);eh=eg[2];ei=eg[1];ej=eg[0];ec.push(ej);ed.push(ei);ee.push(eh);}return[ec,ed,ee];},zip:function(ek,el){var em,en;b.checkLength(ek,el);em=f(ek.length);for(en=0;en<=e.GetLength(ek)-1;en++){e.SetArray(em,en,[e.GetArray(ek,en),e.GetArray(el,en)]);}return em;},zip3:function(eo,ep,eq){var er,es;b.checkLength(eo,ep);b.checkLength(ep,eq);er=f(eo.length);for(es=0;es<=e.GetLength(eo)-1;es++){e.SetArray(er,es,[e.GetArray(eo,es),e.GetArray(ep,es),e.GetArray(eq,es)]);}return er;}},Arrays2D:{copy:function(et){return j.init(et.length,et.length?et[0].length:0,function(eu){return function(ev){return e.GetArray2D(et,eu,ev);};});},init:function(ew,ex,ey){var ez,eA,eB;ez=j.zeroCreate(ew,ex);for(eA=0;eA<=ew-1;eA++){for(eB=0;eB<=ex-1;eB++){e.SetArray2D(ez,eA,eB,(ey(eA))(eB));}}return ez;},iter:function(eC,eD){var eE,eF,eG,eH;eE=eD.length;eF=eD.length?eD[0].length:0;for(eG=0;eG<=eE-1;eG++){for(eH=0;eH<=eF-1;eH++){eC(e.GetArray2D(eD,eG,eH));}}return;},iteri:function(eI,eJ){var eK,eL,eM,eN;eK=eJ.length;eL=eJ.length?eJ[0].length:0;for(eM=0;eM<=eK-1;eM++){for(eN=0;eN<=eL-1;eN++){((eI(eM))(eN))(e.GetArray2D(eJ,eM,eN));}}return;},map:function(eO,eP){return j.init(eP.length,eP.length?eP[0].length:0,function(eQ){return function(eR){return eO(e.GetArray2D(eP,eQ,eR));};});},mapi:function(eS,eT){return j.init(eT.length,eT.length?eT[0].length:0,function(eU){return function(eV){return((eS(eU))(eV))(e.GetArray2D(eT,eU,eV));};});},zeroCreate:function(eW,eX){return e.Array2DZeroCreate(eW,eX);}},AsyncProxy:$.Class({},{get_CancellationToken:function(){return k.GetCT();},get_DefaultCancellationToken:function(){return k.defCTS().contents;}}),CancellationTokenSource:$.Class({Cancel:function(){var eY,eZ,e3,e4;if(!this.c){this.c=true;eZ=function(e0){var e1,e2;try{e0(null);e1={$:0};}catch(e2){e1={$:1,$0:e2};}return e1;};e3=this.r;e4=b.choose(eZ,e3);eY=e.GetLength(e4)>0?c.Raise(l.New(e4)):null;}else{eY=null;}return eY;},Cancel1:function(e5){var e6,e7,e8,e_;if(!e5){e6=this.Cancel();}else{if(!this.c){this.c=true;e8=function(e9){return e9(null);};e_=this.r;e7=b.iter(e8,e_);}else{e7=null;}e6=e7;}return e6;},CancelAfter:function(e$){var fa,fb,fd,ff=this;if(!this.c){fb=this.pending;m.iter(function(fc){return n(fc);},fb);fd=o(function(){return ff.Cancel();},e$);fa=void(this.pending={$:1,$0:fd});}else{fa=null;}return fa;},get_IsCancellationRequested:function(){return this.c;}},{CreateLinkedTokenSource:function(fg,fh){return p.CreateLinkedTokenSource1([fg,fh]);},CreateLinkedTokenSource1:function(fi){var fj,fk;fj=p.New();fk=function(fl){var fm,fo;fm=function(){return fj.Cancel();};fo=k.Register(fl,function(){return fm();});return;};return b.iter(fk,fi);},New:function(){var fq;fq=$.New(this,{});fq.c=false;fq.pending={$:0};fq.r=[];return fq;}}),Char:$.Class({},{GetNumericValue:function(fr){return(fr>=48?fr<=57:false)?d(fr)-d(48):-1;},IsControl:function(fs){return(fs>=0?fs<=31:false)?true:fs>=128?fs<=159:false;},IsDigit:function(ft){return ft>=48?ft<=57:false;},IsLetter:function(fu){return(fu>=65?fu<=90:false)?true:fu>=97?fu<=122:false;},IsLetterOrDigit:function(fv){return q.IsLetter(fv)?true:q.IsDigit(fv);},IsLower:function(fw){return fw>=97?fw<=122:false;},IsUpper:function(fx){return fx>=65?fx<=90:false;},IsWhiteSpace:function($c){var $0=this,$this=this;return $$.String.fromCharCode($c).match(/\s/)!==null;},Parse:function(fy){return fy.length===1?fy.charCodeAt(0):c.FailWith("String must be exactly one character long.");}}),Concurrency:{AwaitEvent:function(fz){var fA;fA=function(fB){var fC,fD,fE,fF,fG,fH;fC=function(){return r.subscribeTo(fz,function(fJ){var fK;s.Force(fD).Dispose();s.Force(fF).Dispose();fK=function(){return fB.k.call(null,{$:0,$0:fJ});};return k.scheduler().Fork(fK);});};fD=s.Create(fC);fE=function(){return k.Register(fB.ct,function(){var fO;s.Force(fD).Dispose();fO=function(){return fB.k.call(null,{$:2,$0:new t("OperationCanceledException")});};return k.scheduler().Fork(fO);});};fF=s.Create(fE);fG=s.Force(fD);fH=s.Force(fF);return null;};return k.checkCancel(fA);},Bind:function(fQ,fR){var fS;fS=function(fT){return fQ({k:function(fU){var fV,fW,fX,f1;if(fU.$==0){fW=fU.$0;fX=function(){var fZ,f0;try{fZ=(fR(fW))(fT);}catch(f0){fZ=fT.k.call(null,{$:1,$0:f0});}return fZ;};fV=k.scheduler().Fork(fX);}else{f1=function(){return fT.k.call(null,fU);};fV=k.scheduler().Fork(f1);}return fV;},ct:fT.ct});};return k.checkCancel(fS);},Catch:function(f3){var f4;f4=function(f5){var f6,f$;try{f6=f3({k:function(f7){var f8,f9,f_;if(f7.$==0){f9=f7.$0;f8=f5.k.call(null,{$:0,$0:{$:0,$0:f9}});}else{if(f7.$==1){f_=f7.$0;f8=f5.k.call(null,{$:0,$0:{$:1,$0:f_}});}else{f8=f5.k.call(null,f7);}}return f8;},ct:f5.ct});}catch(f$){f6=f5.k.call(null,{$:0,$0:{$:1,$0:f$}});}return f6;};return k.checkCancel(f4);},Combine:function(ga,gb){return k.Bind(ga,function(){return gb;});},Delay:function(gd){var ge;ge=function(gf){var gg,gh;try{gg=(gd(null))(gf);}catch(gh){gg=gf.k.call(null,{$:1,$0:gh});}return gg;};return k.checkCancel(ge);},For:function(gi,gj){var gk;gk=i.Get(gi);return k.While(function(){return gk.MoveNext();},k.Delay(function(){return gj(gk.get_Current());}));},FromContinuations:function(gn){var go;go=function(gp){var gq,gr;gq={contents:false};gr=function(gs){var gt;if(gq.contents){gt=c.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");}else{gq.contents=true;gt=k.scheduler().Fork(gs);}return gt;};return gn([function(gu){return gr(function(){return gp.k.call(null,{$:0,$0:gu});});},function(gw){return gr(function(){return gp.k.call(null,{$:1,$0:gw});});},function(gy){return gr(function(){return gp.k.call(null,{$:2,$0:gy});});}]);};return k.checkCancel(go);},GetCT:$.Field(function(){var gA;gA=function(gB){return gB.k.call(null,{$:0,$0:gB.ct});};return k.checkCancel(gA);}),Ignore:function(gC){return k.Bind(gC,function(){return k.Return(null);});},OnCancel:function(gE){var gF;gF=function(gG){return gG.k.call(null,{$:0,$0:k.Register(gG.ct,gE)});};return k.checkCancel(gF);},Parallel:function(gH){var gI,gJ,gK;gI=b.ofSeq(gH);if(e.GetLength(gI)===0){gJ=k.Return([]);}else{gK=function(gL){var gM,gN,gO,gP;gM=gI.length;gN={contents:gM};gO=b.create(gM,undefined);gP=function(gQ){return function(gR){var gS,gT,gU,gV,gW,gX,gY,gZ,g0;gS=[gN.contents,gR];if(gS[0]===0){gT=null;}else{if(gS[0]===1){if(gS[1].$==0){gV=gS[1].$0;e.SetArray(gO,gQ,gV);gN.contents=0;gU=gL.k.call(null,{$:0,$0:gO});}else{gS[0];gW=gS[1];gN.contents=0;gU=gL.k.call(null,gW);}gT=gU;}else{if(gS[1].$==0){gY=gS[1].$0;gZ=gS[0];e.SetArray(gO,gQ,gY);gX=void(gN.contents=gZ-1);}else{gS[0];g0=gS[1];gN.contents=0;gX=gL.k.call(null,g0);}gT=gX;}}return gT;};};return b.iteri(function(g1){return function(g2){var g3;g3=function(){return g2({k:gP(g1),ct:gL.ct});};return k.scheduler().Fork(g3);};},gI);};gJ=k.checkCancel(gK);}return gJ;},Register:function(g5,g6){var g7;g7=g5.r.push(g6)-1;return{Dispose:function(){return e.SetArray(g5.r,g7,function(){});}};},Return:function(g_){var g$;g$=function(ha){return ha.k.call(null,{$:0,$0:g_});};return k.checkCancel(g$);},Scheduler:$.Class({Fork:function(hb){var hc,hd,hf=this;this.robin.push(hb);if(this.idle){this.idle=false;hd=o(function(){return hf.tick();},0);hc=void hd;}else{hc=null;}return hc;},tick:function(){var hg,hh,hi,hj,hk,hl,hn=this;hg=u.now();hh=true;while(hh){hi=this.robin.length;if(hi===0){this.idle=true;hj=hh=false;}else{(this.robin.shift())(null);if(u.now()-hg>40){hl=o(function(){return hn.tick();},0);hk=hh=false;}else{hk=null;}hj=hk;}}return;}},{New:function(){var ho;ho=$.New(this,{});ho.idle=true;ho.robin=[];return ho;}}),Sleep:function(hp){var hq;hq=function(hr){var hs,ht,hu,hv,hw,hx;hs=function(){return o(function(){var hA;s.Force(hv).Dispose();hA=function(){return hr.k.call(null,{$:0,$0:null});};return k.scheduler().Fork(hA);},hp);};ht=s.Create(hs);hu=function(){return k.Register(hr.ct,function(){var hE;n(s.Force(ht));hE=function(){return hr.k.call(null,{$:2,$0:new t("OperationCanceledException")});};return k.scheduler().Fork(hE);});};hv=s.Create(hu);hw=s.Force(ht);hx=s.Force(hv);return null;};return k.checkCancel(hq);},Start:function(hG,hH){return k.StartWithContinuations(hG,function(){},function(hJ){return v.LogMore(["WebSharper: Uncaught asynchronous exception",hJ]);},function(){},hH);},StartChild:function(hL){var hM;hM=function(hN){var hO,hP,hQ,hT,hY;hO={contents:{$:0}};hP=[];hQ=function(){return hL({k:function(hS){hO.contents={$:1,$0:hS};while(hP.length>0){(hP.shift())(hS);}return;},ct:hN.ct});};k.scheduler().Fork(hQ);hT=function(hU){var hV,hW,hX;hV=hO.contents;if(hV.$==0){hW=hP.push(hU.k);}else{hX=hV.$0;hW=hU.k.call(null,hX);}return hW;};hY=k.checkCancel(hT);return hN.k.call(null,{$:0,$0:hY});};return k.checkCancel(hM);},StartWithContinuations:function(hZ,h0,h1,h2,h3){var h4,h5;h4=c.DefaultArg(h3,k.defCTS().contents);h5=function(){return hZ({k:function(h7){var h8,h9,h_,h$;if(h7.$==1){h9=h7.$0;h8=h1(h9);}else{if(h7.$==2){h_=h7.$0;h8=h2(h_);}else{h$=h7.$0;h8=h0(h$);}}return h8;},ct:h4});};return k.scheduler().Fork(h5);},TryCancelled:function(ia,ib){var ic;ic=function(id){return ia({k:function(ie){var _if,ig;if(ie.$==2){ig=ie.$0;ib(ig);_if=id.k.call(null,ie);}else{_if=id.k.call(null,ie);}return _if;},ct:id.ct});};return k.checkCancel(ic);},TryFinally:function(ih,ii){var ij;ij=function(ik){return ih({k:function(il){var im,_in;try{ii(null);im=ik.k.call(null,il);}catch(_in){im=ik.k.call(null,{$:1,$0:_in});}return im;},ct:ik.ct});};return k.checkCancel(ij);},TryWith:function(io,ip){var iq;iq=function(ir){return io({k:function(is){var it,iu,iv,iw,ix;if(is.$==0){iu=is.$0;it=ir.k.call(null,{$:0,$0:iu});}else{if(is.$==1){iv=is.$0;try{iw=(ip(iv))(ir);}catch(ix){iw=ir.k.call(null,is);}it=iw;}else{it=ir.k.call(null,is);}}return it;},ct:ir.ct});};return k.checkCancel(iq);},Using:function(iy,iz){return k.TryFinally(iz(iy),function(){return iy.Dispose();});},While:function(iB,iC){return iB(null)?k.Bind(iC,function(){return k.While(iB,iC);}):k.Return(null);},checkCancel:function(iE){return function(iF){return iF.ct.c?iF.k.call(null,{$:2,$0:new t("OperationCanceledException")}):iE(iF);};},defCTS:$.Field(function(){return{contents:p.New()};}),scheduler:$.Field(function(){return w.New();})},Control:{createEvent:function(iG,iH,iI){return{AddHandler:iG,RemoveHandler:iH,Subscribe:function(iJ){var iK;iK=iI(function(){return function(iM){return iJ.OnNext.call(null,iM);};});iG(iK);return{Dispose:function(){return iH(iK);}};}};}},DateTimeHelpers:{AddMonths:function(iO,iP){var iQ;iQ=new u(iO);return(new u(iQ.getFullYear(),iQ.getMonth()+iP,iQ.getDate(),iQ.getHours(),iQ.getMinutes(),iQ.getSeconds(),iQ.getMilliseconds())).getTime();},AddYears:function(iR,iS){var iT;iT=new u(iR);return(new u(iT.getFullYear()+iS,iT.getMonth(),iT.getDate(),iT.getHours(),iT.getMinutes(),iT.getSeconds(),iT.getMilliseconds())).getTime();},DatePortion:function(iU){var iV;iV=new u(iU);return(new u(iV.getFullYear(),iV.getMonth(),iV.getDate())).getTime();},TimePortion:function(iW){var iX;iX=new u(iW);return(((24*0+iX.getHours())*60+iX.getMinutes())*60+iX.getSeconds())*1000+iX.getMilliseconds();}},Enumerable:{Of:function(iY){return{GetEnumerator:iY};}},Enumerator:{Get:function(iZ){var i0,i1,i7,i8;if(iZ instanceof $$.Array){i1=function(i2){var i3,i4,i5,i6;i3=i2.s;if(i3<e.GetLength(iZ)){i5=e.GetArray(iZ,i3);i2.c=i5;i6=i3+1;i2.s=i6;i4=true;}else{i4=false;}return i4;};i0=x.New(0,null,i1);}else{if(h.Equals(typeof iZ,"string")){i8=function(i9){var i_,i$,ja,jb;i_=i9.s;if(i_<iZ.length){ja=iZ.charCodeAt(i_);i9.c=ja;jb=i_+1;i9.s=jb;i$=true;}else{i$=false;}return i$;};i7=x.New(0,null,i8);}else{i7=iZ.GetEnumerator();}i0=i7;}return i0;},T:$.Class({MoveNext:function(){return this.n.call(null,this);},get_Current:function(){return this.c;}},{New:function(jc,jd,je){var jf;jf=$.New(this,{});jf.s=jc;jf.c=jd;jf.n=je;return jf;}})},ExtraTopLevelOperatorsProxy:{array2D:function(jg){var jh,jj,jk;jh=function(ji){return b.ofSeq(ji);};jj=g.map(jh,jg);jk=b.ofSeq(jj);jk.dims=2;return jk;}},IntrinsicFunctionProxy:{Array2DZeroCreate:function(jl,jm){var jn;jn=b.init(jl,function(){return f(jm);});jn.dims=2;return jn;},BoundsCheck:function(jp,jq){return(jq<0?true:jq>=e.GetLength(jp))?c.Raise(new t("IndexOutOfRangeException")):null;},BoundsCheck2D:function(jr,js,jt){return(((js<0?true:jt<0)?true:js>=jr.length)?true:jt>=(jr.length?jr[0].length:0))?c.Raise(new t("IndexOutOfRangeException")):null;},GetArray:function(ju,jv){e.BoundsCheck(ju,jv);return ju[jv];},GetArray2D:function(jw,jx,jy){e.BoundsCheck2D(jw,jx,jy);return jw[jx][jy];},GetArray2DSub:function(jz,jA,jB,jC,jD){var jE,jF,jG,jH,jI;jE=jC<0?0:jC;jF=jD<0?0:jD;jG=e.Array2DZeroCreate(jE,jF);for(jH=0;jH<=jE-1;jH++){for(jI=0;jI<=jF-1;jI++){e.SetArray2D(jG,jH,jI,e.GetArray2D(jz,jA+jH,jB+jI));}}return jG;},GetArraySub:function(jJ,jK,jL){var jM,jN;jM=f(jL);for(jN=0;jN<=jL-1;jN++){e.SetArray(jM,jN,e.GetArray(jJ,jK+1));}return jM;},GetLength:function(jO){var jP;jP=jO.dims;return jP===2?jO.length*jO.length:jO.length;},SetArray:function(jQ,jR,jS){e.BoundsCheck(jQ,jR);jQ[jR]=jS;return;},SetArray2D:function(jT,jU,jV,jW){e.BoundsCheck2D(jT,jU,jV);jT[jU][jV]=jW;return;},SetArray2DSub:function(jX,jY,jZ,j0,j1,j2){var j3,j4;for(j3=0;j3<=j0-1;j3++){for(j4=0;j4<=j1-1;j4++){e.SetArray2D(jX,jY+j3,jZ+j4,e.GetArray2D(j2,j3,j4));}}return;},SetArraySub:function(j5,j6,j7,j8){var j9;for(j9=0;j9<=j7-1;j9++){e.SetArray(j5,j6+j9,e.GetArray(j8,j9));}return;}},JavaScript:{Delete:function($x,$field){var $0=this,$this=this;return delete $x[$field];},ForEach:function($x,$iter){var $0=this,$this=this;for(var k in $x){if($iter(k))break;}},GetFieldNames:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push(k);return r;},GetFieldValues:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push($o[k]);return r;},GetFields:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push([k,$o[k]]);return r;},Log:function($x){var $0=this,$this=this;if($$.console)$$.console.log($x);},LogMore:function($args){var $0=this,$this=this;if($$.console)$$.console.log.apply($$.console,$args);}},Json:{Activate:function(j_){var j$,ka,kb;j$=j_.$TYPES;for(ka=0;ka<=e.GetLength(j$)-1;ka++){e.SetArray(j$,ka,y.lookup(e.GetArray(j$,ka)));}kb=function(kc){var kd,ke,kf,kg,kh,ki;if(h.Equals(kc,null)){kd=kc;}else{ke=typeof kc;if(ke==="object"){if(kc instanceof $$.Array){kg=y.shallowMap(kb,kc);}else{kh=y.shallowMap(kb,kc.$V);ki=kc.$T;kg=h.Equals(typeof ki,"undefined")?kh:y.restore(e.GetArray(j$,ki),kh);}kf=kg;}else{kf=kc;}kd=kf;}return kd;};return kb(j_.$DATA);},lookup:function(kj){var kk,kl,km,kn,ko,kp;kk=e.GetLength(kj);kl=$$;km=0;while(km<kk){kn=e.GetArray(kj,km);ko=kl[kn];if(!h.Equals(typeof ko,undefined)){kl=ko;kp=km=km+1;}else{kp=c.FailWith("Invalid server reply. Failed to find type: "+kn);}}return kl;},restore:function(kq,kr){var ks;ks=new kq();v.ForEach(kr,function(kt){ks[kt]=kr[kt];return false;});return ks;},shallowMap:function(ku,kv){var kw,kx,ky,kz;if(kv instanceof $$.Array){kw=b.map(ku,kv);}else{kx=typeof kv;if(kx==="object"){kz={};v.ForEach(kv,function(kA){kz[kA]=ku(kv[kA]);return false;});ky=kz;}else{ky=kv;}kw=ky;}return kw;}},Lazy:{Create:function(kB){var kC,kD;kC={value:undefined,created:false,eval:kB};kD=function(){var kF;if(kC.created){kF=kC.value;}else{kC.created=true;kC.value=kB(null);kF=kC.value;}return kF;};kC.eval=kD;return kC;},CreateFromValue:function(kG){return{value:kG,created:true,eval:function(){return kG;},eval:function(){return kG;}};},Force:function(kJ){return kJ.eval.call(null,null);}},List:{T:$.Class({GetEnumerator:function(){var kK;kK=function(kL){var kM,kN,kO,kP;kM=kL.s;if(kM.$==0){kN=false;}else{kO=kM.$1;kP=kM.$0;kL.c=kP;kL.s=kO;kN=true;}return kN;};return x.New(this,null,kK);},get_Item:function(kQ){return g.nth(kQ,this);},get_Length:function(){return g.length(this);}},{Construct:function(kR,kS){return $.New(A,{$:1,$0:kR,$1:kS});},get_Nil:function(){return $.New(A,{$:0});}}),append:function(kT,kU){return z.ofSeq(g.append(kT,kU));},choose:function(kV,kW){return z.ofSeq(g.choose(kV,kW));},collect:function(kX,kY){return z.ofSeq(g.collect(kX,kY));},concat:function(kZ){return z.ofSeq(g.concat(kZ));},exists2:function(k0,k1,k2){return b.exists2(k0,b.ofSeq(k1),b.ofSeq(k2));},filter:function(k3,k4){return z.ofSeq(g.filter(k3,k4));},fold2:function(k5,k6,k7,k8){return b.fold2(k5,k6,b.ofSeq(k7),b.ofSeq(k8));},foldBack:function(k9,k_,k$){return b.foldBack(k9,b.ofSeq(k_),k$);},foldBack2:function(la,lb,lc,ld){return b.foldBack2(la,b.ofSeq(lb),b.ofSeq(lc),ld);},forall2:function(le,lf,lg){return b.forall2(le,b.ofSeq(lf),b.ofSeq(lg));},head:function(lh){var li,lj;if(lh.$==1){lj=lh.$0;li=lj;}else{li=c.FailWith("The input list was empty.");}return li;},init:function(lk,ll){return z.ofArray(b.init(lk,ll));},iter2:function(lm,ln,lo){return b.iter2(lm,b.ofSeq(ln),b.ofSeq(lo));},iteri2:function(lp,lq,lr){return b.iteri2(lp,b.ofSeq(lq),b.ofSeq(lr));},map:function(ls,lt){return z.ofSeq(g.map(ls,lt));},map2:function(lu,lv,lw){return z.ofArray(b.map2(lu,b.ofSeq(lv),b.ofSeq(lw)));},map3:function(lx,ly,lz,lA){var lB;lB=b.map2(function(lC){return function(lD){return lC(lD);};},b.map2(lx,b.ofSeq(ly),b.ofSeq(lz)),b.ofSeq(lA));return z.ofArray(lB);},mapi:function(lE,lF){return z.ofSeq(g.mapi(lE,lF));},mapi2:function(lG,lH,lI){return z.ofArray(b.mapi2(lG,b.ofSeq(lH),b.ofSeq(lI)));},max:function(lJ){return g.reduce(function(lK){return function(lL){return c.Max(lK,lL);};},lJ);},maxBy:function(lM,lN){return g.reduce(function(lO){return function(lP){return h.Compare(lM(lO),lM(lP))===1?lO:lP;};},lN);},min:function(lQ){return g.reduce(function(lR){return function(lS){return c.Min(lR,lS);};},lQ);},minBy:function(lT,lU){return g.reduce(function(lV){return function(lW){return h.Compare(lT(lV),lT(lW))===-1?lV:lW;};},lU);},ofArray:function(lX){var lY,lZ;lY=$.New(A,{$:0});for(lZ=0;lZ<=e.GetLength(lX)-1;lZ++){lY=$.New(A,{$:1,$0:e.GetArray(lX,e.GetLength(lX)-lZ-1),$1:lY});}return lY;},ofSeq:function(l0){var l1,l2,l3;l1=[];l2=i.Get(l0);while(l2.MoveNext()){l1.unshift(l2.get_Current());}l3=l1.slice(0);l3.reverse();return z.ofArray(l3);},partition:function(l4,l5){var l6,l7,l8;l6=b.partition(l4,b.ofSeq(l5));l7=l6[1];l8=l6[0];return[z.ofArray(l8),z.ofArray(l7)];},permute:function(l9,l_){return z.ofArray(b.permute(l9,b.ofSeq(l_)));},reduceBack:function(l$,ma){return b.reduceBack(l$,b.ofSeq(ma));},replicate:function(mb,mc){return z.ofArray(b.create(mb,mc));},rev:function(md){var me;me=b.ofSeq(md);me.reverse();return z.ofArray(me);},scan:function(mf,mg,mh){return z.ofSeq(g.scan(mf,mg,mh));},scanBack:function(mi,mj,mk){return z.ofArray(b.scanBack(mi,b.ofSeq(mj),mk));},sort:function(ml){var mm;mm=b.ofSeq(ml);b.sortInPlace(mm);return z.ofArray(mm);},sortBy:function(mn,mo){return z.sortWith(function(mp){return function(mq){return c.Compare(mn(mp),mn(mq));};},mo);},sortWith:function(mr,ms){var mt;mt=b.ofSeq(ms);b.sortInPlaceWith(mr,mt);return z.ofArray(mt);},tail:function(mu){var mv,mw;if(mu.$==1){mw=mu.$1;mv=mw;}else{mv=c.FailWith("The input list was empty.");}return mv;},unzip:function(mx){var my,mz,mA,mB,mC,mD;my=[];mz=[];mA=i.Get(mx);while(mA.MoveNext()){mB=mA.get_Current();mC=mB[1];mD=mB[0];my.push(mD);mz.push(mC);}return[z.ofArray(my.slice(0)),z.ofArray(mz.slice(0))];},unzip3:function(mE){var mF,mG,mH,mI,mJ,mK,mL,mM;mF=[];mG=[];mH=[];mI=i.Get(mE);while(mI.MoveNext()){mJ=mI.get_Current();mK=mJ[2];mL=mJ[1];mM=mJ[0];mF.push(mM);mG.push(mL);mH.push(mK);}return[z.ofArray(mF.slice(0)),z.ofArray(mG.slice(0)),z.ofArray(mH.slice(0))];},zip:function(mN,mO){return z.ofArray(b.zip(b.ofSeq(mN),b.ofSeq(mO)));},zip3:function(mP,mQ,mR){return z.ofArray(b.zip3(b.ofSeq(mP),b.ofSeq(mQ),b.ofSeq(mR)));}},OperatorIntrinsics:{GetArraySlice:function(mS,mT,mU){var mV,mW,mX,mY,mZ,m0,m1,m2;mV=[mT,mU];if(mV[0].$==0){if(mV[1].$==1){mY=mV[1].$0;mX=mS.slice(0,mY+1);}else{mX=[];}mW=mX;}else{if(mV[1].$==0){m0=mV[0].$0;mZ=mS.slice(m0);}else{m1=mV[1].$0;m2=mV[0].$0;mZ=mS.slice(m2,m1+1);}mW=mZ;}return mW;},GetArraySlice2D:function(m3,m4,m5,m6,m7){var m8,m9,m_,m$,na,nb,nc,nd,ne,nf,ng,nh,ni,nj;if(m4.$==1){m_=m4.$0;m9=m_;}else{m9=0;}m8=m9;if(m6.$==1){nb=m6.$0;na=nb;}else{na=0;}m$=na;if(m5.$==1){ne=m5.$0;nd=ne;}else{nd=m3.length-1;}nc=nd;if(m7.$==1){nh=m7.$0;ng=nh;}else{ng=(m3.length?m3[0].length:0)-1;}nf=ng;ni=nc-m8+1;nj=nf-m$+1;return e.GetArray2DSub(m3,m8,m$,ni,nj);},GetArraySlice2DFixed1:function(nk,nl,nm,nn){var no,np,nq,nr,ns,nt,nu,nv,nw;if(nm.$==1){nq=nm.$0;np=nq;}else{np=0;}no=np;if(nn.$==1){nt=nn.$0;ns=nt;}else{ns=(nk.length?nk[0].length:0)-1;}nr=ns;nu=nr-no+1;nv=f(nu);for(nw=0;nw<=nu-1;nw++){e.SetArray(nv,nw,e.GetArray2D(nk,nl,no+nw));}return nv;},GetArraySlice2DFixed2:function(nx,ny,nz,nA){var nB,nC,nD,nE,nF,nG,nH,nI,nJ;if(ny.$==1){nD=ny.$0;nC=nD;}else{nC=0;}nB=nC;if(nz.$==1){nG=nz.$0;nF=nG;}else{nF=nx.length-1;}nE=nF;nH=nE-nB+1;nI=f(nH);for(nJ=0;nJ<=nH-1;nJ++){e.SetArray(nI,nJ,e.GetArray2D(nx,nB+nJ,nA));}return nI;},GetStringSlice:function(nK,nL,nM){var nN,nO,nP,nQ,nR,nS,nT,nU;nN=[nL,nM];if(nN[0].$==0){if(nN[1].$==1){nQ=nN[1].$0;nP=nK.slice(0,nQ+1);}else{nP="";}nO=nP;}else{if(nN[1].$==0){nS=nN[0].$0;nR=nK.slice(nS);}else{nT=nN[1].$0;nU=nN[0].$0;nR=nK.slice(nU,nT+1);}nO=nR;}return nO;},SetArraySlice:function(nV,nW,nX,nY){var nZ,n0,n1,n2,n3,n4;if(nW.$==1){n1=nW.$0;n0=n1;}else{n0=0;}nZ=n0;if(nX.$==1){n4=nX.$0;n3=n4;}else{n3=e.GetLength(nV)-1;}n2=n3;return e.SetArraySub(nV,nZ,n2-nZ+1,nY);},SetArraySlice2D:function(n5,n6,n7,n8,n9,n_){var n$,oa,ob,oc,od,oe,of,og,oh,oi,oj,ok;if(n6.$==1){ob=n6.$0;oa=ob;}else{oa=0;}n$=oa;if(n8.$==1){oe=n8.$0;od=oe;}else{od=0;}oc=od;if(n7.$==1){oh=n7.$0;og=oh;}else{og=n5.length-1;}of=og;if(n9.$==1){ok=n9.$0;oj=ok;}else{oj=(n5.length?n5[0].length:0)-1;}oi=oj;return e.SetArray2DSub(n5,n$,oc,of-n$+1,oi-oc+1,n_);},SetArraySlice2DFixed1:function(ol,om,on,oo,op){var oq,or,os,ot,ou,ov,ow,ox;if(on.$==1){os=on.$0;or=os;}else{or=0;}oq=or;if(oo.$==1){ov=oo.$0;ou=ov;}else{ou=(ol.length?ol[0].length:0)-1;}ot=ou;ow=ot-oq+1;for(ox=0;ox<=ow-1;ox++){e.SetArray2D(ol,om,oq+ox,e.GetArray(op,ox));}return;},SetArraySlice2DFixed2:function(oy,oz,oA,oB,oC){var oD,oE,oF,oG,oH,oI,oJ,oK;if(oz.$==1){oF=oz.$0;oE=oF;}else{oE=0;}oD=oE;if(oA.$==1){oI=oA.$0;oH=oI;}else{oH=oy.length-1;}oG=oH;oJ=oG-oD+1;for(oK=0;oK<=oJ-1;oK++){e.SetArray2D(oy,oD+oK,oB,e.GetArray(oC,oK));}return;}},Operators:{Compare:function(oL,oM){return h.Compare(oL,oM);},Decrement:function(oN){oN.contents=oN.contents-1;},DefaultArg:function(oO,oP){var oQ,oR;if(oO.$==0){oQ=oP;}else{oR=oO.$0;oQ=oR;}return oQ;},FailWith:function(oS){return c.Raise(new t(oS));},Increment:function(oT){oT.contents=oT.contents+1;},KeyValue:function(oU){return[oU.K,oU.V];},Max:function(oV,oW){return h.Compare(oV,oW)===1?oV:oW;},Min:function(oX,oY){return h.Compare(oX,oY)===-1?oX:oY;},Pown:function(oZ,o0){var o1;o1=function(o2){var o3,o4,o5;if(o2===1){o3=oZ;}else{if(o2%2===0){o5=o1(o2/2>>0);o4=o5*o5;}else{o4=oZ*o1(o2-1);}o3=o4;}return o3;};return o1(o0);},Raise:function($e){var $0=this,$this=this;throw $e;},Sign:function(o6){return o6===0?0:o6<0?-1:1;},Truncate:function(o7){return o7<0?B.ceil(o7):B.floor(o7);},Using:function(o8,o9){var o_;try{o_=o9(o8);}finally{o8.Dispose();}return o_;},range:function(o$,pa){return g.init(1+pa-o$,function(pb){return pb+o$;});},step:function(pc,pd,pe){var pf,pg,pi,pk;pf=c.Sign(pd);pg=function(ph){return pf*(pe-ph)>=0;};pi=g.initInfinite(function(pj){return pc+pj*pd;});pk=g.takeWhile(pg,pi);return pk;}},Option:{bind:function(pl,pm){var pn,po;if(pm.$==0){pn={$:0};}else{po=pm.$0;pn=pl(po);}return pn;},exists:function(pp,pq){var pr,ps;if(pq.$==0){pr=false;}else{ps=pq.$0;pr=pp(ps);}return pr;},fold:function(pt,pu,pv){var pw,px;if(pv.$==0){pw=pu;}else{px=pv.$0;pw=(pt(pu))(px);}return pw;},foldBack:function(py,pz,pA){var pB,pC;if(pz.$==0){pB=pA;}else{pC=pz.$0;pB=(py(pC))(pA);}return pB;},forall:function(pD,pE){var pF,pG;if(pE.$==0){pF=true;}else{pG=pE.$0;pF=pD(pG);}return pF;},iter:function(pH,pI){var pJ,pK;if(pI.$==0){pJ=null;}else{pK=pI.$0;pJ=pH(pK);}return pJ;},map:function(pL,pM){var pN,pO;if(pM.$==0){pN={$:0};}else{pO=pM.$0;pN={$:1,$0:pL(pO)};}return pN;},toArray:function(pP){var pQ,pR;if(pP.$==0){pQ=[];}else{pR=pP.$0;pQ=[pR];}return pQ;},toList:function(pS){var pT,pU;if(pS.$==0){pT=$.New(A,{$:0});}else{pU=pS.$0;pT=z.ofArray([pU]);}return pT;}},Pervasives:{NewFromList:function(pV){var pW,pX,pY,pZ,p0;pW={};pX=i.Get(pV);while(pX.MoveNext()){pY=pX.get_Current();pZ=pY[1];p0=pY[0];pW[p0]=pZ;}return pW;}},PrintfHelpers:{padNumLeft:function(p1,p2){var p3,p4,p5,p6;p3=e.GetArray(p1,0);if((p3===" "?true:p3==="+")?true:p3==="-"){p5=p1.substr(1);p6=p2-1;p4=p3+C.PadLeftWith(p5,p6,48);}else{p4=C.PadLeftWith(p1,p2,48);}return p4;},plusForPos:function(p7,p8){return 0<=p7?"+"+p8:p8;},plusForPos0:function(p9,p_){return 0<=p9?"+"+p_:p_;},prettyPrint:function(qa){var qb,ql,qm,qn,qo,qp,qr;qb=function(qc){var qd,qe,qf,qg,qk;qd=$$.String(qc);if(qd==="[object Object]"){qf=v.GetFields(qc);qg=$.Tupled(function(qh){var qi,qj;qi=qh[0];qj=qh[1];return qi+" = "+D.prettyPrint(qj);});qk=b.map(qg,qf);qe="{"+C.concat("; ",qk)+"}";}else{qe=qd;}return qe;};ql=typeof qa;if(ql=="string"){qm="\""+qa+"\"";}else{if(ql=="object"){if(qa instanceof $$.Array){qp=function(qq){return D.prettyPrint(qq);};qr=b.map(qp,qa);qo="[|"+C.concat("; ",qr)+"|]";}else{qo=qb(qa);}qn=qo;}else{qn=$$.String(qa);}qm=qn;}return qm;},printArray:function(qs,qt){var qu;qu=b.map(qs,qt);return"[|"+C.concat("; ",qu)+"|]";},printArray2D:function(qv,qw){var qx;qx=g.delay(function(){var qz;qz=qw.length?qw[0].length:0;return g.map(function(qA){var qB;qB=g.delay(function(){return g.map(function(qD){return qv(e.GetArray2D(qw,qA,qD));},c.range(0,qz-1));});return C.concat("; ",qB);},c.range(0,qw.length-1));});return"[["+C.concat("][",qx)+"]]";},printList:function(qE,qF){var qG;qG=g.map(qE,qF);return"["+C.concat("; ",qG)+"]";},spaceForPos:function(qH,qI){return 0<=qH?" "+qI:qI;},toSafe:function(qJ){return qJ==null?"":qJ;}},Queue:{Clear:function(qK){return qK.splice(0,e.GetLength(qK));},Contains:function(qL,qM){return g.exists(function(qN){return h.Equals(qM,qN);},qL);},CopyTo:function(qO,qP,qQ){return b.blit(qO,0,qP,qQ,e.GetLength(qO));}},Remoting:{AjaxProvider:$.Field(function(){return F.New();}),Async:function(qR,qS){var qT,qU,qV;qT=E.makeHeaders(qR);qU=E.makePayload(qS);qV=function(){var qX,qY;qX=G.get_CancellationToken();qY=function(qZ){var q0,rg;q0=$.Tupled(function(q1){var q2,q3,q4,q5,q6,q9,q$,rc,rf;q2=q1[0];q3=q1[1];q4=q1[2];q5={contents:true};q6=function(){var q8;if(q5.contents){q5.contents=false;q8=q4(new t("OperationCanceledException"));}else{q8=null;}return q8;};q9=k.Register(qZ,function(){return q6();});q$=function(ra){var rb;if(q5.contents){q5.contents=false;q9.Dispose();rb=q2(y.Activate(H.parse(ra)));}else{rb=null;}return rb;};rc=function(rd){var re;if(q5.contents){q5.contents=false;q9.Dispose();re=q3(rd);}else{re=null;}return re;};rf=E.EndPoint();return E.AjaxProvider().Async(rf,qT,qU,q$,rc);});rg=k.FromContinuations(q0);return rg;};return k.Bind(qX,qY);};return k.Delay(qV);},Call:function(rh,ri){var rj,rk,rl,rm;rj=E.EndPoint();rk=E.makeHeaders(rh);rl=E.makePayload(ri);rm=E.AjaxProvider().Sync(rj,rk,rl);return y.Activate(H.parse(rm));},EndPoint:$.Field(function(){return"?";}),Send:function(rn,ro){var rp,rq,rr;rp=E.Async(rn,ro);rq=k.Ignore(rp);rr={$:0};return k.Start(rq,rr);},XhrProvider:$.Class({Async:function(rs,rt,ru,rv,rw){return E.ajax(true,rs,rt,ru,rv,rw);},Sync:function(rx,ry,rz){var rA;rA={contents:undefined};E.ajax(false,rx,ry,rz,function(rB){rA.contents=rB;},function(rC){return c.Raise(rC);});return rA.contents;}},{New:function(){return $.New(this,{});}}),ajax:function($async,$url,$headers,$data,$ok,$err){var $0=this,$this=this;var xhr=new $$.XMLHttpRequest();xhr.open("POST",$url,$async);for(var h in $headers){xhr.setRequestHeader(h,$headers[h]);}function k(){if(xhr.status==200){$ok(xhr.responseText);}else{var msg="Response status is not 200: ";$err(new $$.Error(msg+xhr.status));}}if("onload"in xhr){xhr.onload=xhr.onerror=xhr.onabort=k;}else{xhr.onreadystatechange=function(){if(xhr.readyState==4){k();}};}xhr.send($data);},makeHeaders:function(rD){var rE;rE={};rE["content-type"]="application/json";rE["x-websharper-rpc"]=rD;return rE;},makePayload:function(rF){return H.stringify(rF);}},Seq:{append:function(rG,rH){return I.Of(function(){var rJ,rK;rJ=i.Get(rG);rK=function(rL){var rM,rN,rO,rP,rQ,rR;if(rL.s.MoveNext()){rN=rL.s.get_Current();rL.c=rN;rM=true;}else{if(rL.s===rJ){rP=i.Get(rH);rL.s=rP;if(rP.MoveNext()){rR=rP.get_Current();rL.c=rR;rQ=true;}else{rQ=false;}rO=rQ;}else{rO=false;}rM=rO;}return rM;};return x.New(rJ,null,rK);});},average:function(rS){var rT,rY,rZ;rT=g.fold($.Tupled(function(rU){var rV,rW;rV=rU[0];rW=rU[1];return function(rX){return[rV+1,rW+rX];};}),[0,0],rS);rY=rT[1];rZ=rT[0];return rY/rZ;},averageBy:function(r0,r1){var r2,r7,r8;r2=g.fold($.Tupled(function(r3){var r4,r5;r4=r3[0];r5=r3[1];return function(r6){return[r4+1,r5+r0(r6)];};}),[0,0],r1);r7=r2[1];r8=r2[0];return r7/r8;},cache:function(r9){var r_,r$,sa;r_=[];r$=i.Get(r9);sa=function(){var sc;sc=function(sd){var se,sf,sg,sh,si,sj;if(sd.s+1<r_.length){sf=sd.s+1;sd.s=sf;sg=r_[sd.s];sd.c=sg;se=true;}else{if(r$.MoveNext()){si=sd.s+1;sd.s=si;sj=r$.get_Current();sd.c=sj;r_.push(sd.get_Current());sh=true;}else{sh=false;}se=sh;}return se;};return x.New(0,null,sc);};return I.Of(sa);},choose:function(sk,sl){var sm;sm=function(sn){var so,sp,sq;so=sk(sn);if(so.$==0){sp=$.New(A,{$:0});}else{sq=so.$0;sp=z.ofArray([sq]);}return sp;};return g.collect(sm,sl);},collect:function(sr,ss){return g.concat(g.map(sr,ss));},compareWith:function(st,su,sv){var sw,sx,sy,sz,sA;sw=i.Get(su);sx=i.Get(sv);sy=0;sz=true;while(sz?sy===0:false){sA=[sw.MoveNext(),sx.MoveNext()];sA[0]?sA[1]?sy=(st(sw.get_Current()))(sx.get_Current()):sy=1:sA[1]?sy=-1:sz=false;}return sy;},concat:function(sB){return I.Of(function(){var sD,sE;sD=i.Get(sB);sE=function(sF){var sG,sH,sI,sJ,sK,sL;sG=sF.s;if(h.Equals(sG,null)){if(sD.MoveNext()){sJ=i.Get(sD.get_Current());sF.s=sJ;sI=sE(sF);}else{sI=false;}sH=sI;}else{if(sG.MoveNext()){sL=sG.get_Current();sF.c=sL;sK=true;}else{sF.s=null;sK=sE(sF);}sH=sK;}return sH;};return x.New(null,null,sE);});},countBy:function(sM,sN){var sO;sO=function(){var sQ,sR,sS,sT,sU,sV,sW,sY,sZ;sQ={};sR=i.Get(sN);sS=[];while(sR.MoveNext()){sT=sM(sR.get_Current());sU=h.Hash(sT);if(sQ.hasOwnProperty(sU)){sV=void(sQ[sU]=sQ[sU]+1);}else{sS.push(sT);sV=void(sQ[sU]=1);}}sW=function(sX){return[sX,sQ[h.Hash(sX)]];};sY=sS.slice(0);sZ=b.map(sW,sY);return sZ;};return g.delay(sO);},delay:function(s0){return I.Of(function(){return i.Get(s0(null));});},distinct:function(s2){return g.distinctBy(function(s3){return s3;},s2);},distinctBy:function(s4,s5){var s6;s6=function(){var s8,s9,s_;s8=i.Get(s5);s9={};s_=function(s$){var ta,tb,tc,tf,th,ti,tj;if(s8.MoveNext()){tb=s8.get_Current();tc=function(td){var te;te=s4(td);return h.Hash(te);};tf=function(tg){return s9.hasOwnProperty(tc(tg));};th=tf(tb);while(th?s8.MoveNext():false){tb=s8.get_Current();th=tf(tb);}if(th){ti=false;}else{s9[tc(tb)]=null;tj=tb;s$.c=tj;ti=true;}ta=ti;}else{ta=false;}return ta;};return x.New(null,null,s_);};return I.Of(s6);},empty:function(){return[];},enumFinally:function(tk,tl){return I.Of(function(){var tn,to,tp,tq;try{to=i.Get(tk);}catch(tp){tl(null);to=c.Raise(tp);}tn=to;tq=function(tr){var ts,tt,tu,tv;try{if(tn.MoveNext()){tu=tn.get_Current();tr.c=tu;tt=true;}else{tl(null);tt=false;}ts=tt;}catch(tv){tl(null);ts=c.Raise(tv);}return ts;};return x.New(null,null,tq);});},enumUsing:function(tw,tx){return tx(tw);},enumWhile:function(ty,tz){return I.Of(function(){var tB,tL;tB=function(tC){var tD,tE,tF,tG,tH,tI,tJ,tK;tD=tC.s;if(tD.$==1){tF=tD.$0;if(tF.MoveNext()){tH=tF.get_Current();tC.c=tH;tG=true;}else{tI={$:0};tC.s=tI;tG=tB(tC);}tE=tG;}else{if(ty(null)){tK={$:1,$0:i.Get(tz)};tC.s=tK;tJ=tB(tC);}else{tJ=false;}tE=tJ;}return tE;};tL={$:0};return x.New(tL,null,tB);});},exists:function(tM,tN){var tO,tP;tO=i.Get(tN);tP=false;while(!tP?tO.MoveNext():false){tP=tM(tO.get_Current());}return tP;},exists2:function(tQ,tR,tS){var tT,tU,tV;tT=i.Get(tR);tU=i.Get(tS);tV=false;while((!tV?tT.MoveNext():false)?tU.MoveNext():false){tV=(tQ(tT.get_Current()))(tU.get_Current());}return tV;},filter:function(tW,tX){var tY;tY=function(){var t0,t1;t0=i.Get(tX);t1=function(t2){var t3,t4,t5,t6,t7;t3=t0.MoveNext();t4=t0.get_Current();t5=false;while(t3){if(tW(t4)){t7=t4;t2.c=t7;t5=true;t6=t3=false;}else{t6=t0.MoveNext()?t4=t0.get_Current():t3=false;}}return t5;};return x.New(null,null,t1);};return I.Of(tY);},find:function(t8,t9){var t_,t$,ua;t_=g.tryFind(t8,t9);if(t_.$==0){t$=c.FailWith("KeyNotFoundException");}else{ua=t_.$0;t$=ua;}return t$;},findIndex:function(ub,uc){var ud,ue,uf;ud=g.tryFindIndex(ub,uc);if(ud.$==0){ue=c.FailWith("KeyNotFoundException");}else{uf=ud.$0;ue=uf;}return ue;},fold:function(ug,uh,ui){var uj,uk;uj=uh;uk=i.Get(ui);while(uk.MoveNext()){uj=(ug(uj))(uk.get_Current());}return uj;},forall:function(ul,um){return!g.exists(function(un){return!ul(un);},um);},forall2:function(uo,up,uq){return!g.exists2(function(ur){return function(us){return!(uo(ur))(us);};},up,uq);},groupBy:function(ut,uu){return g.delay(function(){var uw,ux,uy,uz,uA,uB,uC;uw={};ux={};uy=[];uz=i.Get(uu);while(uz.MoveNext()){uA=uz.get_Current();uB=ut(uA);uC=h.Hash(uB);!uw.hasOwnProperty(uC)?uy.push(uB):null;ux[uC]=uB;uw.hasOwnProperty(uC)?uw[uC].push(uA):void(uw[uC]=[uA]);}return b.map(function(uD){return[uD,uw[h.Hash(uD)]];},uy);});},head:function(uE){var uF;uF=i.Get(uE);return uF.MoveNext()?uF.get_Current():g.insufficient();},init:function(uG,uH){return g.take(uG,g.initInfinite(uH));},initInfinite:function(uI){var uJ;uJ=function(){var uL;uL=function(uM){var uN,uO;uN=uI(uM.s);uM.c=uN;uO=uM.s+1;uM.s=uO;return true;};return x.New(0,null,uL);};return I.Of(uJ);},insufficient:function(){return c.FailWith("The input sequence has an insufficient number of elements.");},isEmpty:function(uP){var uQ;uQ=i.Get(uP);return!uQ.MoveNext();},iter:function(uR,uS){return g.iteri(function(){return function(uU){return uR(uU);};},uS);},iter2:function(uV,uW,uX){var uY,uZ;uY=i.Get(uW);uZ=i.Get(uX);while(uY.MoveNext()?uZ.MoveNext():false){(uV(uY.get_Current()))(uZ.get_Current());}return;},iteri:function(u0,u1){var u2,u3;u2=0;u3=i.Get(u1);while(u3.MoveNext()){(u0(u2))(u3.get_Current());u2=u2+1;}return;},length:function(u4){var u5,u6;u5=0;u6=i.Get(u4);while(u6.MoveNext()){u5=u5+1;}return u5;},map:function(u7,u8){var u9;u9=function(){var u$,va;u$=i.Get(u8);va=function(vb){var vc,vd;if(u$.MoveNext()){vd=u7(u$.get_Current());vb.c=vd;vc=true;}else{vc=false;}return vc;};return x.New(null,null,va);};return I.Of(u9);},mapi:function(ve,vf){return g.mapi2(ve,g.initInfinite(function(vg){return vg;}),vf);},mapi2:function(vh,vi,vj){var vk;vk=function(){var vm,vn,vo;vm=i.Get(vi);vn=i.Get(vj);vo=function(vp){var vq,vr;if(vm.MoveNext()?vn.MoveNext():false){vr=(vh(vm.get_Current()))(vn.get_Current());vp.c=vr;vq=true;}else{vq=false;}return vq;};return x.New(null,null,vo);};return I.Of(vk);},max:function(vs){return g.reduce(function(vt){return function(vu){return h.Compare(vt,vu)>=0?vt:vu;};},vs);},maxBy:function(vv,vw){return g.reduce(function(vx){return function(vy){return h.Compare(vv(vx),vv(vy))>=0?vx:vy;};},vw);},min:function(vz){return g.reduce(function(vA){return function(vB){return h.Compare(vA,vB)<=0?vA:vB;};},vz);},minBy:function(vC,vD){return g.reduce(function(vE){return function(vF){return h.Compare(vC(vE),vC(vF))<=0?vE:vF;};},vD);},nth:function(vG,vH){var vI,vJ;vG<0?c.FailWith("negative index requested"):null;vI=-1;vJ=i.Get(vH);while(vI<vG){!vJ.MoveNext()?g.insufficient():null;vI=vI+1;}return vJ.get_Current();},pairwise:function(vK){var vL,vN;vL=function(vM){return[e.GetArray(vM,0),e.GetArray(vM,1)];};vN=g.windowed(2,vK);return g.map(vL,vN);},pick:function(vO,vP){var vQ,vR,vS;vQ=g.tryPick(vO,vP);if(vQ.$==0){vR=c.FailWith("KeyNotFoundException");}else{vS=vQ.$0;vR=vS;}return vR;},readOnly:function(vT){return I.Of(function(){return i.Get(vT);});},reduce:function(vV,vW){var vX,vY;vX=i.Get(vW);!vX.MoveNext()?c.FailWith("The input sequence was empty"):null;vY=vX.get_Current();while(vX.MoveNext()){vY=(vV(vY))(vX.get_Current());}return vY;},scan:function(vZ,v0,v1){var v2;v2=function(){var v4,v5;v4=i.Get(v1);v5=function(v6){var v7,v8,v9;if(v6.s){if(v4.MoveNext()){v9=(vZ(v6.get_Current()))(v4.get_Current());v6.c=v9;v8=true;}else{v8=false;}v7=v8;}else{v6.c=v0;v6.s=true;v7=true;}return v7;};return x.New(false,null,v5);};return I.Of(v2);},skip:function(v_,v$){return I.Of(function(){var wb,wc;wb=i.Get(v$);for(wc=1;wc<=v_;wc++){!wb.MoveNext()?g.insufficient():null;}return wb;});},skipWhile:function(wd,we){return I.Of(function(){var wg,wh,wi,wj,wk;wg=i.Get(we);wh=true;while(wg.MoveNext()?wd(wg.get_Current()):false){wh=false;}if(wh){wj=g.empty();wi=i.Get(wj);}else{wk=function(wl){var wm,wn,wo,wp;if(wl.s){wl.s=false;wn=wg.get_Current();wl.c=wn;wm=true;}else{wo=wg.MoveNext();wp=wg.get_Current();wl.c=wp;wm=wo;}return wm;};wi=x.New(true,null,wk);}return wi;});},sort:function(wq){return g.sortBy(function(wr){return wr;},wq);},sortBy:function(ws,wt){return g.delay(function(){var wv;wv=b.ofSeq(wt);b.sortInPlaceBy(ws,wv);return wv;});},sum:function(ww){return g.fold(function(wx){return function(wy){return wx+wy;};},0,ww);},sumBy:function(wz,wA){return g.fold(function(wB){return function(wC){return wB+wz(wC);};},0,wA);},take:function(wD,wE){return I.Of(function(){var wG,wH;wG=i.Get(wE);wH=function(wI){var wJ,wK,wL,wM;if(wI.s>=wD){wJ=false;}else{if(wG.MoveNext()){wL=wI.s+1;wI.s=wL;wM=wG.get_Current();wI.c=wM;wK=true;}else{wG.Dispose();wI.s=wD;wK=false;}wJ=wK;}return wJ;};return x.New(0,null,wH);});},takeWhile:function(wN,wO){return g.delay(function(){return g.enumUsing(i.Get(wO),function(wQ){return g.enumWhile(function(){return wQ.MoveNext()?wN(wQ.get_Current()):false;},g.delay(function(){return[wQ.get_Current()];}));});});},toArray:function(wT){var wU,wV,wW;wU=[];wV=i.Get(wT);while(wV.MoveNext()){wW=wV.get_Current();wU.push(wW);}return wU.slice(0);},toList:function(wX){return z.ofSeq(wX);},truncate:function(wY,wZ){return g.delay(function(){return g.enumUsing(i.Get(wZ),function(w1){var w2;w2={contents:0};return g.enumWhile(function(){return w1.MoveNext()?w2.contents<wY:false;},g.delay(function(){c.Increment(w2);return[w1.get_Current()];}));});});},tryFind:function(w5,w6){var w7,w8,w9;w7=i.Get(w6);w8={$:0};while(w8.$==0?w7.MoveNext():false){w9=w7.get_Current();w5(w9)?w8={$:1,$0:w9}:null;}return w8;},tryFindIndex:function(w_,w$){var xa,xb,xc,xd;xa=i.Get(w$);xb=true;xc=0;while(xb?xa.MoveNext():false){xd=xa.get_Current();w_(xd)?xb=false:xc=xc+1;}return xb?{$:0}:{$:1,$0:xc};},tryPick:function(xe,xf){var xg,xh;xg=i.Get(xf);xh={$:0};while(h.Equals(xh,{$:0})?xg.MoveNext():false){xh=xe(xg.get_Current());}return xh;},unfold:function(xi,xj){var xk;xk=function(){var xm;xm=function(xn){var xo,xp,xq,xr;xo=xi(xn.s);if(xo.$==0){xp=false;}else{xq=xo.$0[0];xr=xo.$0[1];xn.c=xq;xn.s=xr;xp=true;}return xp;};return x.New(xj,null,xm);};return I.Of(xk);},windowed:function(xs,xt){xs<=0?c.FailWith("The input must be non-negative."):null;return g.delay(function(){return g.enumUsing(i.Get(xt),function(xv){var xw;xw=[];return g.append(g.enumWhile(function(){return xw.length<xs?xv.MoveNext():false;},g.delay(function(){xw.push(xv.get_Current());return g.empty();})),g.delay(function(){return xw.length===xs?g.append([xw.slice(0)],g.delay(function(){return g.enumWhile(function(){return xv.MoveNext();},g.delay(function(){xw.shift();xw.push(xv.get_Current());return[xw.slice(0)];}));})):g.empty();}));});});},zip:function(xD,xE){return g.mapi2(function(xF){return function(xG){return[xF,xG];};},xD,xE);},zip3:function(xH,xI,xJ){return g.mapi2(function(xK){return $.Tupled(function(xL){var xM,xN;xM=xL[0];xN=xL[1];return[xK,xM,xN];});},xH,g.zip(xI,xJ));}},Stack:{Clear:function(xO){return xO.splice(0,e.GetLength(xO));},Contains:function(xP,xQ){return g.exists(function(xR){return h.Equals(xQ,xR);},xP);},CopyTo:function(xS,xT,xU){return b.blit(xT,0,xT,xU,e.GetLength(xS));}},Strings:{Compare:function(xV,xW){return c.Compare(xV,xW);},CopyTo:function(xX,xY,xZ,x0,x1){return b.blit(C.ToCharArray(xX),xY,xZ,x0,x1);},EndsWith:function($x,$s){var $0=this,$this=this;return $x.substring($x.length-$s.length)==$s;},IndexOf:function($s,$c,$i){var $0=this,$this=this;return $s.indexOf($$.String.fromCharCode($c),$i);},Insert:function($x,$index,$s){var $0=this,$this=this;return $x.substring(0,$index-1)+$s+$x.substring($index);},IsNullOrEmpty:function($x){var $0=this,$this=this;return $x==null||$x=="";},Join:function($sep,$values){var $0=this,$this=this;return $values.join($sep);},LastIndexOf:function($s,$c,$i){var $0=this,$this=this;return $s.lastIndexOf($$.String.fromCharCode($c),$i);},PadLeft:function(x2,x3){return C.PadLeftWith(x2,x3,32);},PadLeftWith:function($s,$n,$c){var $0=this,$this=this;return $$.Array($n-$s.length+1).join($$.String.fromCharCode($c))+$s;},PadRight:function(x4,x5){return C.PadRightWith(x4,x5,32);},PadRightWith:function($s,$n,$c){var $0=this,$this=this;return $s+$$.Array($n-$s.length+1).join($$.String.fromCharCode($c));},RegexEscape:function($s){var $0=this,$this=this;return $s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");},Remove:function($x,$ix,$ct){var $0=this,$this=this;return $x.substring(0,$ix)+$x.substring($ix+$ct);},Replace:function(x6,x7,x8){var x9;x9=function(x_){var x$,ya,yb,yc,yd;x$=x_.indexOf(x7);if(x$!==-1){yb=C.ReplaceOnce(x_,x7,x8);yc=x$+x8.length;yd=x$+x8.length;ya=C.Substring(yb,0,yd)+x9(yb.substring(yc));}else{ya=x_;}return ya;};return x9(x6);},ReplaceChar:function(ye,yf,yg){return C.Replace(ye,J.fromCharCode(yf),J.fromCharCode(yg));},ReplaceOnce:function($string,$search,$replace){var $0=this,$this=this;return $string.replace($search,$replace);},Split:function(yh,yi,yj){var yk;yk=C.SplitWith(yh,yi);return yj===1?b.filter(function(yl){return yl!=="";},yk):yk;},SplitChars:function(ym,yn,yo){var yp;yp="["+C.RegexEscape(J.fromCharCode.apply(undefined,yn))+"]";return C.Split(ym,new K(yp),yo);},SplitStrings:function(yq,yr,ys){var yt;yt=C.concat("|",b.map(function(yu){return C.RegexEscape(yu);},yr));return C.Split(yq,new K(yt),ys);},SplitWith:function($str,$pat){var $0=this,$this=this;return $str.split($pat);},StartsWith:function($t,$s){var $0=this,$this=this;return $t.substring(0,$s.length)==$s;},Substring:function($s,$ix,$ct){var $0=this,$this=this;return $s.substr($ix,$ct);},ToCharArray:function(yv){return b.init(yv.length,function(yw){return yv.charCodeAt(yw);});},ToCharArrayRange:function(yx,yy,yz){return b.init(yz,function(yA){return yx.charCodeAt(yy+yA);});},Trim:function($s){var $0=this,$this=this;return $s.replace(/^\s+/,"").replace(/\s+$/,"");},collect:function(yB,yC){return b.init(yC.length,function(yD){return yB(yC.charCodeAt(yD));}).join("");},concat:function(yE,yF){return g.toArray(yF).join(yE);},exists:function(yG,yH){return g.exists(yG,C.protect(yH));},forall:function(yI,yJ){return g.forall(yI,C.protect(yJ));},init:function(yK,yL){return b.init(yK,yL).join("");},iter:function(yM,yN){return g.iter(yM,C.protect(yN));},iteri:function(yO,yP){return g.iteri(yO,C.protect(yP));},length:function(yQ){return C.protect(yQ).length;},map:function(yR,yS){return C.collect(function(yT){return J.fromCharCode(yR(yT));},C.protect(yS));},mapi:function(yU,yV){return g.toArray(g.mapi(function(yW){return function(yX){return J.fromCharCode((yU(yW))(yX));};},yV)).join("");},protect:function(yY){return yY===null?"":yY;},replicate:function(yZ,y0){return C.init(yZ,function(){return y0;});}},Unchecked:{Compare:function(y2,y3){var y4,y5,y6,y7;if(y2===y3){y4=0;}else{y5=typeof y2;if(y5==="undefined"){y7=typeof y3;y6=y7==="undefined"?0:-1;}else{y6=y5==="function"?c.FailWith("Cannot compare function values."):y5==="boolean"?y2<y3?-1:1:y5==="number"?y2<y3?-1:1:y5==="string"?y2<y3?-1:1:y2===null?-1:y3===null?1:"CompareTo"in y2?y2.CompareTo(y3):(y2 instanceof f?y3 instanceof f:false)?h.compareArrays(y2,y3):(y2 instanceof u?y3 instanceof u:false)?h.compareDates(y2,y3):h.compareArrays(v.GetFields(y2),v.GetFields(y3));}y4=y6;}return y4;},Equals:function(y8,y9){var y_,y$;if(y8===y9){y_=true;}else{y$=typeof y8;y_=y$==="object"?y8===null?false:y9===null?false:"Equals"in y8?y8.Equals(y9):(y8 instanceof f?y9 instanceof f:false)?h.arrayEquals(y8,y9):(y8 instanceof u?y9 instanceof u:false)?h.dateEquals(y8,y9):h.arrayEquals(v.GetFields(y8),v.GetFields(y9)):false;}return y_;},Hash:function(za){var zb;zb=typeof za;return zb==="function"?0:zb==="boolean"?za?1:0:zb==="number"?za:zb==="string"?h.hashString(za):zb==="object"?za==null?0:za instanceof f?h.hashArray(za):h.hashObject(za):0;},arrayEquals:function(zc,zd){var ze,zf,zg;if(e.GetLength(zc)===e.GetLength(zd)){zf=true;zg=0;while(zf?zg<e.GetLength(zc):false){!h.Equals(e.GetArray(zc,zg),e.GetArray(zd,zg))?zf=false:null;zg=zg+1;}ze=zf;}else{ze=false;}return ze;},compareArrays:function(zh,zi){var zj,zk,zl,zm;if(e.GetLength(zh)<e.GetLength(zi)){zj=-1;}else{if(e.GetLength(zh)>e.GetLength(zi)){zk=1;}else{zl=0;zm=0;while(zl===0?zm<e.GetLength(zh):false){zl=h.Compare(e.GetArray(zh,zm),e.GetArray(zi,zm));zm=zm+1;}zk=zl;}zj=zk;}return zj;},compareDates:function(zn,zo){return c.Compare(zn.getTime(),zo.getTime());},dateEquals:function(zp,zq){return zp.getTime()===zq.getTime();},hashArray:function(zr){var zs,zt;zs=-34948909;for(zt=0;zt<=e.GetLength(zr)-1;zt++){zs=h.hashMix(zs,h.Hash(e.GetArray(zr,zt)));}return zs;},hashMix:function(zu,zv){return(zu<<5)+zu+zv;},hashObject:function(zw){var zx,zy,zB;if("GetHashCode"in zw){zx=zw.GetHashCode();}else{zy=function(zz,zA){return h.hashMix(zz,zA);};zB={contents:0};v.ForEach(zw,function(zC){zB.contents=zy(zy(zB.contents,h.hashString(zC)),h.Hash(zw[zC]));return false;});zx=zB.contents;}return zx;},hashString:function(zD){var zE,zF,zG;if(zD===null){zE=0;}else{zF=5381;for(zG=0;zG<=zD.length-1;zG++){zF=h.hashMix(zF,zD.charCodeAt(zG)<<0);}zE=zF;}return zE;}},Util:{addListener:function(zH,zI){zH.Subscribe(r.observer(zI));},observer:function(zJ){return{OnCompleted:function(){},OnError:function(){},OnNext:zJ};},subscribeTo:function(zM,zN){return zM.Subscribe(r.observer(zN));}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Arrays);c=$.Safe(a.Operators);d=$.Safe($$.Number);e=$.Safe(a.IntrinsicFunctionProxy);f=$.Safe($$.Array);g=$.Safe(a.Seq);h=$.Safe(a.Unchecked);i=$.Safe(a.Enumerator);j=$.Safe(a.Arrays2D);k=$.Safe(a.Concurrency);l=$.Safe(a.AggregateException);m=$.Safe(a.Option);n=$.Safe($$.clearTimeout);o=$.Safe($$.setTimeout);p=$.Safe(a.CancellationTokenSource);q=$.Safe(a.Char);r=$.Safe(a.Util);s=$.Safe(a.Lazy);t=$.Safe($$.Error);u=$.Safe($$.Date);v=$.Safe(a.JavaScript);w=$.Safe(k.Scheduler);x=$.Safe(i.T);y=$.Safe(a.Json);z=$.Safe(a.List);A=$.Safe(z.T);B=$.Safe($$.Math);C=$.Safe(a.Strings);D=$.Safe(a.PrintfHelpers);E=$.Safe(a.Remoting);F=$.Safe(E.XhrProvider);G=$.Safe(a.AsyncProxy);H=$.Safe($$.JSON);I=$.Safe(a.Enumerable);J=$.Safe($$.String);return K=$.Safe($$.RegExp);});$.OnLoad(function(){E.EndPoint();E.AjaxProvider();k.scheduler();k.defCTS();k.GetCT();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;$.Define($$,{IntelliFactory:{WebSharper:{Testing:{Assert:{For:function(r,s,t){var u,v,w;u=s.Base;for(v=0;v<=b.GetLength(u)-1;v++){t(b.GetArray(s.Base,v));}for(w=1;w<=r;w++){t(s.Next.call(null,null));}return;},Raises:function(x){var y,z;try{x(null);y=c(false,"Assert raises exception test failed.");}catch(z){y=c(true,"Pass.");}return y;}},Pervasives:{Is:function(A,B){var C;if(!d.Equals(A,B)){e.Log(["Equality test failed.",A,B]);C=c(false,"Equality test failed.");}else{C=c(true,"Pass.");}return C;},Isnt:function(D,E){var F;if(d.Equals(D,E)){e.Log(["Inequality test failed.",D,E]);F=c(false,"Inequality test failed.");}else{F=c(true,"Pass.");}return F;},Test:function(G){return h.New(G);},TestBuilder:$.Class({Delay:function(H){return i(this.name,H);},Zero:function(){return null;}},{New:function(I){var J;J=$.New(this,{});J.name=I;return J;}})},Random:{ArrayOf:function(K){return{Base:[[]],Next:function(){var M;M=j.Natural().Next.call(null,null)%100;return k.init(M,function(){return K.Next.call(null,null);});}};},Boolean:$.Field(function(){return{Base:[true,false],Next:function(){return j.StandardUniform().Next.call(null,null)>0.5;}};}),Const:function(P){return{Base:[P],Next:function(){return P;}};},Exponential:function(R){return{Base:[],Next:function(){var T;T=j.StandardUniform().Next.call(null,null);return-l.log(1-T)/R;}};},Float:$.Field(function(){return{Base:[0],Next:function(){var V;V=j.Boolean().Next.call(null,null)?1:-1;return V*j.Exponential(0.1).Next.call(null,null);}};}),FloatExhaustive:$.Field(function(){return{Base:[0,m,n,-n],Next:function(){return j.Float().Next.call(null,null);}};}),FloatWithin:function(X,Y){return{Base:[X,Y],Next:function(){return X+(Y-X)*l.random();}};},Implies:function(_0,_1){return!_0?true:_1;},Imply:function(_2,_3){return j.Implies(_2,_3);},Int:$.Field(function(){return{Base:[0,1,-1],Next:function(){return l.round(j.Float().Next.call(null,null));}};}),ListOf:function(_5){var _6,_8;_6=function(_7){return o.ofArray(_7);};_8=j.ArrayOf(_5);return j.Map(_6,_8);},Map:function(_9,_){var ba;ba=_.Next;return{Base:k.map(_9,_.Base),Next:function(bb){return _9(ba(bb));}};},Mix:function(bb,bc){var bd;bd={contents:false};return{Base:bb.Base.concat(bc.Base),Next:function(){bd.contents=!bd.contents;return bd.contents?bb.Next.call(null,null):bc.Next.call(null,null);}};},Natural:$.Field(function(){var bf;bf=j.Int().Next;return{Base:[0,1],Next:function(bg){var bh;bh=bf(bg);return l.abs(bh);}};}),OneOf:function(bi){var bj;bj=j.Within(1,b.GetLength(bi));return{Base:bi,Next:function(){return b.GetArray(bi,bj.Next.call(null,null)-1);}};},OptionOf:function(bl){return j.Mix(j.Const({$:0}),j.Map(function(bm){return{$:1,$0:bm};},bl));},StandardUniform:$.Field(function(){return{Base:[],Next:function(){return l.random();}};}),String:$.Field(function(){return{Base:[""],Next:function(){var bp,bq;bp=j.Natural().Next.call(null,null)%100;bq=k.init(bp,function(){return j.Int().Next.call(null,null)%256;});return p.fromCharCode.apply(undefined,bq);}};}),StringExhaustive:$.Field(function(){return{Base:[null,""],Next:j.String().Next};}),Tuple2Of:function(bs,bt){return{Base:q.toArray(q.delay(function(){return q.collect(function(bv){return q.map(function(bw){return[bv,bw];},bt.Base);},bs.Base);})),Next:function(){return[bs.Next.call(null,null),bt.Next.call(null,null)];}};},Tuple3Of:function(by,bz,bA){return{Base:q.toArray(q.delay(function(){return q.collect(function(bC){return q.collect(function(bD){return q.map(function(bE){return[bC,bD,bE];},bA.Base);},bz.Base);},by.Base);})),Next:function(){return[by.Next.call(null,null),bz.Next.call(null,null),bA.Next.call(null,null)];}};},Within:function(bG,bH){return{Base:[bG,bH],Next:function(){return j.Natural().Next.call(null,null)%(bH-bG)+bG;}};}}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.IntrinsicFunctionProxy);c=$.Safe($$.ok);d=$.Safe(a.Unchecked);e=$.Safe(a.JavaScript);f=$.Safe(a.Testing);g=$.Safe(f.Pervasives);h=$.Safe(g.TestBuilder);i=$.Safe($$.test);j=$.Safe(f.Random);k=$.Safe(a.Arrays);l=$.Safe($$.Math);m=$.Safe($$.NaN);n=$.Safe($$.Infinity);o=$.Safe(a.List);p=$.Safe($$.String);return q=$.Safe(a.Seq);});$.OnLoad(function(){j.StringExhaustive();j.String();j.StandardUniform();j.Natural();j.Int();j.FloatExhaustive();j.Float();j.Boolean();return;});}());

var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;$.Define($$,{IntelliFactory:{WebSharper:{Html:{Activator:{Activate:$.Field(function(){var B,C;if(c.hasDocument()){C=d.getElementById("websharper-data");B=C?e.OnLoad(function(){var E,F,G,H;E=C.getAttribute("content");F=f.Activate(g.parse(E));G=h.GetFields(F);H=$.Tupled(function(I){var J,K,L,M;J=I[0];K=I[1];L=K.get_Body();M=d.getElementById(J);M.parentNode.replaceChild(L.get_Body(),M);return L.Render();});return i.iter(H,G);}):null;}else{B=null;}return B;}),hasDocument:function(){var $0=this,$this=this;return typeof $$.document!=="undefined";}},Attribute:$.Class({Render:function(){return null;},get_Body:function(){var N;N=this.HtmlProvider.CreateAttribute(this.Name);N.value=this.Value;return N;}},{New:function(O,P,Q){var R;R=j.New1(O);R.Name=P;R.Value=Q;return R;},New1:function(S){var T;T=$.New(this,{});T.HtmlProvider=S;return T;}}),AttributeBuilder:$.Class({Class:function(U){return this.NewAttr("class",U);},NewAttr:function(V,W){var X;X=j.New(this.HtmlProvider,V,W);return X;},get_CheckBox:function(){return this.NewAttr("type","checkbox");},get_Hidden:function(){return this.NewAttr("type","hidden");},get_Password:function(){return this.NewAttr("type","password");},get_Radio:function(){return this.NewAttr("type","radio");},get_Reset:function(){return this.NewAttr("type","reset");},get_Submit:function(){return this.NewAttr("type","submit");},get_TextField:function(){return this.NewAttr("type","textfield");}},{New:function(Y){var Z;Z=$.New(this,{});Z.HtmlProvider=Y;return Z;}}),Default:{A:function(_0){var _1;_1=e.Tags();return _1.NewTag("a",_0);},Action:function(_2){var _3;_3=e.Attr();return _3.NewAttr("action",_2);},Align:function(_4){var _5;_5=e.Attr();return _5.NewAttr("align",_4);},Alt:function(_6){var _7;_7=e.Attr();return _7.NewAttr("alt",_6);},Attr:$.Field(function(){return k.Attr();}),B:function(_8){var _9;_9=e.Tags();return _9.NewTag("b",_8);},Body:function(_){var ba;ba=e.Tags();return ba.NewTag("body",_);},Br:function(ba){var bb;bb=e.Tags();return bb.NewTag("br",ba);},Button:function(bc){var bd;bd=e.Tags();return bd.NewTag("button",bc);},Code:function(be){var bf;bf=e.Tags();return bf.NewTag("code",be);},Deprecated:$.Field(function(){return k.DeprecatedHtml();}),Div:function(bg){return e.Tags().Div(bg);},Em:function(bh){var bi;bi=e.Tags();return bi.NewTag("em",bh);},Form:function(bj){var bk;bk=e.Tags();return bk.NewTag("form",bj);},H1:function(bl){var bm;bm=e.Tags();return bm.NewTag("h1",bl);},H2:function(bn){var bo;bo=e.Tags();return bo.NewTag("h2",bn);},H3:function(bp){var bq;bq=e.Tags();return bq.NewTag("h3",bp);},H4:function(br){var bs;bs=e.Tags();return bs.NewTag("h4",br);},HRef:function(bt){var bu;bu=e.Attr();return bu.NewAttr("href",bt);},HTML5:{Attr:$.Field(function(){return l.Attr();}),Tags:$.Field(function(){return l.Tags();})},Head:function(bv){var bw;bw=e.Tags();return bw.NewTag("head",bv);},Height:function(bx){var by;by=e.Attr();return by.NewAttr("height",bx);},Hr:function(bz){var bA;bA=e.Tags();return bA.NewTag("hr",bz);},I:function(bB){var bC;bC=e.Tags();return bC.NewTag("i",bB);},IFrame:function(bD){var bE;bE=e.Tags();return bE.NewTag("iframe",bD);},Id:function(bF){var bG;bG=e.Attr();return bG.NewAttr("id",bF);},Img:function(bH){var bI;bI=e.Tags();return bI.NewTag("img",bH);},Input:function(bJ){var bK;bK=e.Tags();return bK.NewTag("input",bJ);},LI:function(bL){var bM;bM=e.Tags();return bM.NewTag("li",bL);},Name:function(bN){var bO;bO=e.Attr();return bO.NewAttr("name",bN);},NewAttr:function(bP){return function(bQ){return e.Attr().NewAttr(bP,bQ);};},OL:function(bR){var bS;bS=e.Tags();return bS.NewTag("ol",bR);},OnLoad:function(bT){return k.HtmlProvider().OnDocumentReady(bT);},P:function(bU){var bV;bV=e.Tags();return bV.NewTag("p",bU);},Pre:function(bW){var bX;bX=e.Tags();return bX.NewTag("pre",bW);},RowSpan:function(bY){var bZ;bZ=e.Attr();return bZ.NewAttr("rowspan",bY);},Script:function(b0){var b1;b1=e.Tags();return b1.NewTag("script",b0);},Select:function(b2){var b3;b3=e.Tags();return b3.NewTag("select",b2);},Selected:function(b4){var b5;b5=e.Attr();return b5.NewAttr("selected",b4);},Span:function(b6){var b7;b7=e.Tags();return b7.NewTag("span",b6);},Src:function(b8){var b9;b9=e.Attr();return b9.NewAttr("src",b8);},TBody:function(b_){var b$;b$=e.Tags();return b$.NewTag("tbody",b_);},TD:function(ca){var cb;cb=e.Tags();return cb.NewTag("td",ca);},TFoot:function(cc){var cd;cd=e.Tags();return cd.NewTag("tfoot",cc);},TH:function(ce){var cf;cf=e.Tags();return cf.NewTag("th",ce);},THead:function(cg){var ch;ch=e.Tags();return ch.NewTag("thead",cg);},TR:function(ci){var cj;cj=e.Tags();return cj.NewTag("tr",ci);},Table:function(ck){var cl;cl=e.Tags();return cl.NewTag("table",ck);},Tags:$.Field(function(){return k.Tags();}),Text:function(cm){return e.Tags().text(cm);},TextArea:function(cn){var co;co=e.Tags();return co.NewTag("textarea",cn);},UL:function(cp){var cq;cq=e.Tags();return cq.NewTag("ul",cp);},VAlign:function(cr){var cs;cs=e.Attr();return cs.NewAttr("valign",cr);},Width:function(ct){var cu;cu=e.Attr();return cu.NewAttr("width",ct);}},DeprecatedAttributeBuilder:$.Class({NewAttr:function(cv,cw){var cx;cx=j.New(this.HtmlProvider,cv,cw);return cx;}},{New:function(cy){var cz;cz=$.New(this,{});cz.HtmlProvider=cy;return cz;}}),DeprecatedTagBuilder:$.Class({NewTag:function(cA,cB){var cC,cD,cE;cC=m.New(this.HtmlProvider,cA);cD=n.Get(cB);while(cD.MoveNext()){cE=cD.get_Current();cC.AppendI(cE);}return cC;}},{New:function(cF){var cG;cG=$.New(this,{});cG.HtmlProvider=cF;return cG;}}),Element:$.Class({AppendI:function(cH){var cI,cJ,cK,cL,cM,cN,cO,cP,cQ;cI=cH.get_Body();if(cI.nodeType===2){cK=this["HtmlProvider@31"];cL=this.Body;cJ=cK.AppendAttribute(cL,cI);}else{cM=this["HtmlProvider@31"];cN=this.Body;cO=cH.get_Body();cJ=cM.AppendNode(cN,cO);}if(this.IsRendered){cP=cH.Render();}else{cQ=this.RenderInternal;cP=void(this.RenderInternal=function(){cQ(null);return cH.Render();});}return cP;},AppendN:function(cS){var cT,cU;cT=this["HtmlProvider@31"];cU=this.Body;return cT.AppendNode(cU,cS);},OnLoad:function(cV){var cW,cX;cW=this["HtmlProvider@31"];cX=this.Body;return cW.OnLoad(cX,cV);},Render:function(){var cY;if(!this.IsRendered){this.RenderInternal.call(null,null);cY=void(this.IsRendered=true);}else{cY=null;}return cY;},get_Body:function(){return this.Body;},get_Html:function(){return this["HtmlProvider@31"].GetHtml(this.Body);},get_HtmlProvider:function(){return this["HtmlProvider@31"];},get_Id:function(){var cZ,c0,c1,c2,c3,c4,c5;cZ=this["HtmlProvider@31"];c0=this.Body;c1=cZ.GetProperty(c0,"id");if(c1===undefined?true:c1===""){c3="id"+o.round(o.random()*100000000);c4=this["HtmlProvider@31"];c5=this.Body;c4.SetProperty(c5,"id",c3);c2=c3;}else{c2=c1;}return c2;},get_Item:function(c6){var c7,c8,c9,c_;c7=this["HtmlProvider@31"];c8=this.Body;c7.GetAttribute(c8,c6);c9=this["HtmlProvider@31"];c_=this.Body;return c9.GetAttribute(c_,c6);},get_Text:function(){return this["HtmlProvider@31"].GetText(this.Body);},get_Value:function(){return this["HtmlProvider@31"].GetValue(this.Body);},set_Html:function(c$){var da,db;da=this["HtmlProvider@31"];db=this.Body;return da.SetHtml(db,c$);},set_Item:function(dc,dd){var de,df;de=this["HtmlProvider@31"];df=this.Body;return de.SetAttribute(df,dc,dd);},set_Text:function(dg){var dh,di;dh=this["HtmlProvider@31"];di=this.Body;return dh.SetText(di,dg);},set_Value:function(dj){var dk,dl;dk=this["HtmlProvider@31"];dl=this.Body;return dk.SetValue(dl,dj);}},{New:function(dm,dn){var _do,dp;_do=m.New1(dm);dp=d.createElement(dn);_do.RenderInternal=function(){};_do.Body=dp;_do.IsRendered=false;return _do;},New1:function(dr){var ds;ds=$.New(this,{});ds["HtmlProvider@31"]=dr;return ds;}}),Events:{JQueryEventSupport:$.Class({OnBlur:function(dt,du){return p(du.get_Body()).bind("blur",function(){return dt(du);});},OnChange:function(dw,dx){return p(dx.get_Body()).bind("change",function(){return dw(dx);});},OnClick:function(dz,dA){return this.OnMouse("click",dz,dA);},OnDoubleClick:function(dB,dC){return this.OnMouse("dblclick",dB,dC);},OnError:function(dD,dE){return p(dE.get_Body()).bind("error",function(){return dD(dE);});},OnFocus:function(dG,dH){return p(dH.get_Body()).bind("focus",function(){return dG(dH);});},OnKeyDown:function(dJ,dK){var dL;dL=function(dM){return(dJ(dK))({KeyCode:dM.keyCode});};return p(dK.get_Body()).bind("keydown",dL);},OnKeyPress:function(dN,dO){return p(dO.get_Body()).keypress(function(dP){return(dN(dO))({CharacterCode:dP.which});});},OnKeyUp:function(dQ,dR){var dS;dS=function(dT){return(dQ(dR))({KeyCode:dT.keyCode});};return p(dR.get_Body()).bind("keyup",dS);},OnLoad:function(dU,dV){return p(dV.get_Body()).bind("load",function(){return dU(dV);});},OnMouse:function(dX,dY,dZ){var d0;d0=function(d1){return(dY(dZ))({X:d1.pageX,Y:d1.pageY});};return p(dZ.get_Body()).bind(dX,d0);},OnMouseDown:function(d2,d3){return this.OnMouse("mousedown",d2,d3);},OnMouseEnter:function(d4,d5){return this.OnMouse("mouseenter",d4,d5);},OnMouseLeave:function(d6,d7){return this.OnMouse("mouseleave",d6,d7);},OnMouseMove:function(d8,d9){return this.OnMouse("mousemove",d8,d9);},OnMouseOut:function(d_,d$){return this.OnMouse("mouseout",d_,d$);},OnMouseUp:function(ea,eb){return this.OnMouse("mouseup",ea,eb);},OnResize:function(ec,ed){return p(ed.get_Body()).bind("resize",function(){return ec(ed);});},OnScroll:function(ef,eg){return p(eg.get_Body()).bind("scroll",function(){return ef(eg);});},OnSelect:function(ei,ej){return p(ej.get_Body()).bind("select",function(){return ei(ej);});},OnSubmit:function(el,em){return p(em.get_Body()).bind("submit",function(){return el(em);});},OnUnLoad:function(eo,ep){return p(ep.get_Body()).bind("unload",function(){return eo(ep);});}},{New:function(){return $.New(this,{});}})},EventsPervasives:{Events:$.Field(function(){return r.New();})},Html5AttributeBuilder:$.Class({NewAttr:function(er,es){var et;et=j.New(this.HtmlProvider,er,es);return et;}},{New:function(eu){var ev;ev=$.New(this,{});ev.HtmlProvider=eu;return ev;}}),Html5TagBuilder:$.Class({NewTag:function(ew,ex){var ey,ez,eA;ey=m.New(this.HtmlProvider,ew);ez=n.Get(ex);while(ez.MoveNext()){eA=ez.get_Current();ey.AppendI(eA);}return ey;}},{New:function(eB){var eC;eC=$.New(this,{});eC.HtmlProvider=eB;return eC;}}),Implementation:{Attr:$.Field(function(){return s.New(k.HtmlProvider());}),DeprecatedHtml:$.Field(function(){return t.New(k.HtmlProvider());}),HTML5:{Attr:$.Field(function(){return u.New(l.Html5Provider());}),Html5Provider:$.Field(function(){return v.New();}),Tags:$.Field(function(){return w.New(l.Html5Provider());})},HtmlProvider:$.Field(function(){return v.New();}),JQueryHtmlProvider:$.Class({AddClass:function(eD,eE){return p(eD).addClass(eE);},AppendAttribute:function(eF,eG){var eH,eI;eH=eG.nodeName;eI=eG.value;return this.SetAttribute(eF,eH,eI);},AppendNode:function(eJ,eK){return p(eJ).append(p(eK));},Clear:function(eL){return p(eL).contents().detach();},CreateAttribute:function(eM){return d.createAttribute(eM);},CreateElement:function(eN){return d.createElement(eN);},CreateTextNode:function(eO){return d.createTextNode(eO);},GetAttribute:function(eP,eQ){return p(eP).attr(eQ);},GetHtml:function(eR){return p(eR).html();},GetProperty:function(eS,eT){var eU;eU=p(eS).attr(eT);return eU;},GetText:function(eV){return eV.textContent;},GetValue:function(eW){var eX;eX=p(eW).val();return eX;},HasAttribute:function(eY,eZ){return p(eY).attr(eZ)!=null;},OnDocumentReady:function(e0){return p(d).ready(e0);},OnLoad:function(e1,e2){return p(e1).ready(e2);},Remove:function(e3){return p(e3).remove();},RemoveAttribute:function(e4,e5){return p(e4).removeAttr(e5);},RemoveClass:function(e6,e7){return p(e6).removeClass(e7);},SetAttribute:function(e8,e9,e_){return p(e8).attr(e9,e_);},SetCss:function(e$,fa,fb){return p(e$).css(fa,fb);},SetHtml:function(fc,fd){return p(fc).html(fd);},SetProperty:function(fe,ff,fg){var fh;fh=p(fe).prop(ff,fg);return fh;},SetStyle:function(fi,fj){return p(fi).attr("style",fj);},SetText:function(fk,fl){fk.textContent=fl;},SetValue:function(fm,fn){return p(fm).val(fn);}},{New:function(){return $.New(this,{});}}),Tags:$.Field(function(){return x.New(k.HtmlProvider());})},Operators:{OnAfterRender:function(fo,fp){var fq;fq=fp.Render;fp.Render=function(){fq.apply(fp);return fo(fp);};return;},OnBeforeRender:function(fs,ft){var fu;fu=ft.Render;ft.Render=function(){fs(ft);return fu.apply(ft);};return;},add:function(fw,fx){var fy,fz;fy=n.Get(fx);while(fy.MoveNext()){fz=fy.get_Current();fw.AppendI(fz);}return fw;}},PageletExtensions:{"IPagelet.AppendTo":function(fA,fB){var fC,fD;fC=d.getElementById(fB);fD=fC.appendChild(fA.get_Body());return fA.Render();}},TagBuilder:$.Class({Div:function(fE){return this.NewTag("div",fE);},NewTag:function(fF,fG){var fH,fI,fJ;fH=m.New(this.HtmlProvider,fF);fI=n.Get(fG);while(fI.MoveNext()){fJ=fI.get_Current();fH.AppendI(fJ);}return fH;},text:function(fK){return $.New(y,{text:fK});}},{New:function(fL){var fM;fM=$.New(this,{});fM.HtmlProvider=fL;return fM;}}),Text:$.Class({Render:function(){return null;},get_Body:function(){return d.createTextNode(this.text);}})}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Html);c=$.Safe(b.Activator);d=$.Safe($$.document);e=$.Safe(b.Default);f=$.Safe(a.Json);g=$.Safe($$.JSON);h=$.Safe(a.JavaScript);i=$.Safe(a.Arrays);j=$.Safe(b.Attribute);k=$.Safe(b.Implementation);l=$.Safe(k.HTML5);m=$.Safe(b.Element);n=$.Safe(a.Enumerator);o=$.Safe($$.Math);p=$.Safe($$.jQuery);q=$.Safe(b.Events);r=$.Safe(q.JQueryEventSupport);s=$.Safe(b.AttributeBuilder);t=$.Safe(b.DeprecatedTagBuilder);u=$.Safe(b.Html5AttributeBuilder);v=$.Safe(k.JQueryHtmlProvider);w=$.Safe(b.Html5TagBuilder);x=$.Safe(b.TagBuilder);y=$.Safe(b.Text);z=$.Safe(e.HTML5);return A=$.Safe(b.EventsPervasives);});$.OnLoad(function(){k.Tags();k.HtmlProvider();l.Tags();l.Html5Provider();l.Attr();k.DeprecatedHtml();k.Attr();A.Events();e.Tags();z.Tags();z.Attr();e.Deprecated();e.Attr();c.Activate();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;$.Define($$,{IntelliFactory:{WebSharper:{Control:{Disposable:{Of:function(F){return{Dispose:F};}},Event:{Event:$.Class({AddHandler:function(G){return this.Handlers.Add(G);},RemoveHandler:function(H){var I,K,L,N,O;I=function(J){return b.Equals(H,J);};K=this.Handlers;L=function(M){return K.RemoveAt(M);};N=this.Handlers;O=c.tryFindIndex(I,N);return d.iter(L,O);},Subscribe:function(P){var Q,T=this;Q=function(R){return P.OnNext(R);};this.AddHandler(Q);return f.Of(function(){return T.RemoveHandler(Q);});},Trigger:function(U){var V,W,X;V=this.Handlers.ToArray();for(W=0;W<=V.length-1;W++){X=g.GetArray(V,W);X(U);}return;}})},EventModule:{Choose:function(Y,Z){var _0;_0=h.New();i.addListener(Z,function(_1){var _2,_3,_4;_2=Y(_1);if(_2.$==0){_3=null;}else{_4=_2.$0;_3=_0.event.Trigger(_4);}return _3;});return _0.event;},Filter:function(_5,_6){var _7;_7=$.New(k,{Handlers:n.New1()});i.addListener(_6,function(_8){return _5(_8)?_7.Trigger(_8):null;});return _7;},Map:function(_9,_){var ba;ba=$.New(k,{Handlers:n.New1()});i.addListener(_,function(bb){return ba.Trigger(_9(bb));});return ba;},Merge:function(bb,bc){var bd;bd=$.New(k,{Handlers:n.New1()});i.addListener(bb,function(be){return bd.Trigger(be);});i.addListener(bc,function(bf){return bd.Trigger(bf);});return bd;},Pairwise:function(bg){var bh,bi;bh={contents:{$:0}};bi=$.New(k,{Handlers:n.New1()});i.addListener(bg,function(bj){var bk,bl,bm;bk=bh.contents;if(bk.$==1){bm=bk.$0;bh.contents={$:1,$0:bj};bl=bi.Trigger([bm,bj]);}else{bl=void(bh.contents={$:1,$0:bj});}return bl;});return bi;},Partition:function(bn,bo){return[o.Filter(bn,bo),o.Filter(function(bp){var bq;bq=bn(bp);return!bq;},bo)];},Scan:function(br,bs,bt){var bu,bv;bu={contents:bs};bv=function(bw){bu.contents=(br(bu.contents))(bw);return bu.contents;};return o.Map(bv,bt);},Split:function(bx,by){var bz,bE;bz=function(bA){var bB,bC,bD;bB=bx(bA);if(bB.$==0){bD=bB.$0;bC={$:1,$0:bD};}else{bC={$:0};}return bC;};bE=function(bF){var bG,bH,bI;bG=bx(bF);if(bG.$==1){bI=bG.$0;bH={$:1,$0:bI};}else{bH={$:0};}return bH;};return[o.Choose(bz,by),o.Choose(bE,by)];}},FSharpEvent:$.Class({},{New:function(){var bJ;bJ=$.New(this,{});bJ.event=$.New(k,{Handlers:n.New1()});return bJ;}}),HotStream:{HotStream:$.Class({Subscribe:function(bK){var bL,bM;this.Latest.contents.$==1?bK.OnNext(this.Latest.contents.$0):null;bM=this.Event;bL=i.subscribeTo(bM.event,function(bN){return bK.OnNext(bN);});return bL;},Trigger:function(bO){var bP;this.Latest.contents={$:1,$0:bO};bP=this.Event;return bP.event.Trigger(bO);}},{New:function(){return $.New(q,{Latest:{contents:{$:0}},Event:h.New()});}})},MailboxProcessor:$.Class({PostAndAsyncReply:function(bQ,bR){var bS,bV=this;bS=function(){var bU,bW;bU=bV.PostAndTryAsyncReply(bQ,bR);bW=function(bX){var bY,bZ,b0;if(bX.$==1){b0=bX.$0;bZ=b0;}else{bZ=r.Raise(new s("TimeoutException"));}bY=bZ;return t.Return(bY);};return t.Bind(bU,bW);};return t.Delay(bS);},PostAndTryAsyncReply:function(b1,b2){var b3,b4,cb=this;b3=r.DefaultArg(b2,this.get_DefaultTimeout());b4=$.Tupled(function(b5){var b6,b7,b8,b9,b_,ca,cc,cd,cg,ch;b6=b5[0];b7=b5[1];b8=b5[2];if(b3<0){b_=b1(function(b$){return b6({$:1,$0:b$});});ca=cb.mailbox.AddLast(b_);b9=cb.resume();}else{cc={contents:true};cd=b1(function(ce){var cf;if(cc.contents){cc.contents=false;cf=b6({$:1,$0:ce});}else{cf=null;}return cf;});cg=cb.mailbox.AddLast(cd);cb.resume();ch=u(function(){var cj;if(cc.contents){cc.contents=false;cj=b6({$:0});}else{cj=null;}return cj;},b3);b9=void ch;}return b9;});return t.FromContinuations(b4);},Receive:function(ck){var cl,co=this;cl=function(){var cn,cp;cn=co.TryReceive(ck);cp=function(cq){var cr,cs,ct;if(cq.$==1){ct=cq.$0;cs=ct;}else{cs=r.Raise(new s("TimeoutException"));}cr=cs;return t.Return(cr);};return t.Bind(cn,cp);};return t.Delay(cl);},Scan:function(cu,cv){var cw,cz=this;cw=function(){var cy,cA;cy=cz.TryScan(cu,cv);cA=function(cB){var cC,cD,cE;if(cB.$==1){cE=cB.$0;cD=cE;}else{cD=r.Raise(new s("TimeoutException"));}cC=cD;return t.Return(cC);};return t.Bind(cy,cA);};return t.Delay(cw);},Start:function(){var cF,cG,cL=this,cS;if(this.started){cF=r.FailWith("The MailboxProcessor has already been started.");}else{this.started=true;cG=function(){var cI,cO,cP;cI=function(){var cK,cM;cK=cL.initial.call(null,cL);cM=function(){return t.Return(null);};return t.Bind(cK,cM);};cO=t.Delay(cI);cP=function(cQ){var cR;cR=cL.errorEvent;cR.event.Trigger(cQ);return t.Return(null);};return t.TryWith(cO,cP);};cS=t.Delay(cG);cF=cL.startAsync(cS);}return cF;},TryReceive:function(cT){var cU,cV,c0=this;cU=r.DefaultArg(cT,this.get_DefaultTimeout());cV=$.Tupled(function(cW){var cX,cY,cZ,c1,c2,c3,c6,c7,c8,c$,dd,de;cX=cW[0];cY=cW[1];cZ=cW[2];if(b.Equals(c0.mailbox.get_First(),null)){if(cU<0){c3=function(){var c5;c5=c0.dequeue();cX({$:1,$0:c5});return t.Return(null);};c6=t.Delay(c3);c2=void(c0.savedCont={$:1,$0:c6});}else{c7={contents:true};c8=u(function(){var c_;if(c7.contents){c7.contents=false;c0.savedCont={$:0};c_=cX({$:0});}else{c_=null;}return c_;},cU);c$=function(){var db,dc;if(c7.contents){c7.contents=false;v(c8);dc=c0.dequeue();cX({$:1,$0:dc});db=t.Return(null);}else{db=t.Return(null);}return db;};dd=t.Delay(c$);c2=void(c0.savedCont={$:1,$0:dd});}c1=c2;}else{de=c0.dequeue();c1=cX({$:1,$0:de});}return c1;});return t.FromContinuations(cV);},TryScan:function(df,dg){var dh,di,dn=this;dh=r.DefaultArg(dg,this.get_DefaultTimeout());di=function(){var dk,dr,ds,dt,du,dx,d2;dk=function(){var dm,_do,dp,dq;dm=dn.mailbox.get_First();_do={$:0};while(!b.Equals(dm,null)){dp=df(dm.v);if(dp.$==0){dq=dm=dm.n;}else{dn.mailbox.Remove(dm);dm=null;dq=_do=dp;}}return _do;};dr=dk(null);if(dr.$==1){dt=dr.$0;du=function(dv){var dw;dw={$:1,$0:dv};return t.Return(dw);};ds=t.Bind(dt,du);}else{dx=$.Tupled(function(dy){var dz,dA,dB,dC,dD,dN,dO,dR;dz=dy[0];dA=dy[1];dB=dy[2];if(dh<0){dD=function(){var dF,dM;dF=function(){var dH,dI,dJ,dK;dH=df(dn.mailbox.get_First().v);if(dH.$==1){dJ=dH.$0;dn.mailbox.RemoveFirst();dK=function(dL){dz({$:1,$0:dL});return t.Return(null);};dI=t.Bind(dJ,dK);}else{dD(null);dI=t.Return(null);}return dI;};dM=t.Delay(dF);dn.savedCont={$:1,$0:dM};return;};dC=dD(null);}else{dN={contents:true};dO=u(function(){var dQ;if(dN.contents){dN.contents=false;dn.savedCont={$:0};dQ=dz({$:0});}else{dQ=null;}return dQ;},dh);dR=function(){var dT,d1;dT=function(){var dV,dW,dX,dY;dV=df(dn.mailbox.get_First().v);if(dV.$==1){dX=dV.$0;dn.mailbox.RemoveFirst();dY=function(dZ){var d0;if(dN.contents){dN.contents=false;v(dO);dz({$:1,$0:dZ});d0=t.Return(null);}else{d0=t.Return(null);}return d0;};dW=t.Bind(dX,dY);}else{dR(null);dW=t.Return(null);}return dW;};d1=t.Delay(dT);dn.savedCont={$:1,$0:d1};return;};dC=dR(null);}return dC;});d2=t.FromContinuations(dx);ds=d2;}return ds;};return t.Delay(di);},dequeue:function(){var d3;d3=this.mailbox.get_First().v;this.mailbox.RemoveFirst();return d3;},get_CurrentQueueLength:function(){return this.mailbox.get_Count();},get_DefaultTimeout:function(){return this["DefaultTimeout@"];},get_Error:function(){var d4;d4=this.errorEvent;return d4.event;},resume:function(){var d5,d6,d7;d5=this.savedCont;if(d5.$==1){d7=d5.$0;this.savedCont={$:0};d6=this.startAsync(d7);}else{d6=null;}return d6;},set_DefaultTimeout:function(d8){this["DefaultTimeout@"]=d8;return;},startAsync:function(d9){var d_;d_=this.token;return t.Start(d9,d_);}},{New:function(d$,ea){var eb,ec,ed,ee,ef,eh;eb=$.New(this,{});eb.initial=d$;eb.token=ea;eb.started=false;eb.errorEvent=h.New();eb.mailbox=x.New();eb.savedCont={$:0};ec=eb.token;if(ec.$==0){ed=null;}else{ee=ec.$0;ef=function(){return eb.resume();};eh=t.Register(ee,function(){return ef();});ed=void eh;}eb["DefaultTimeout@"]=-1;return eb;},Start:function(ej,ek){var el;el=y.New(ej,ek);el.Start();return el;}}),Observable:{Aggregate:function(em,en,eo){var ep;ep=function(eq){var er,es,ex;er={contents:en};es=function(et){return z.Protect(function(){return(eo(er.contents))(et);},function(ev){er.contents=ev;return eq.OnNext(ev);},function(ew){return eq.OnError(ew);});};ex=A.New(es,function(ey){return eq.OnError(ey);},function(){return eq.OnCompleted();});return em.Subscribe(ex);};return z.New(ep);},Choose:function(eA,eB){var eC;eC=function(eD){var eE,eL;eE=function(eF){var eH;eH=function(eI){return eD.OnNext(eI);};return z.Protect(function(){return eA(eF);},function(eJ){return d.iter(eH,eJ);},function(eK){return eD.OnError(eK);});};eL=A.New(eE,function(eM){return eD.OnError(eM);},function(){return eD.OnCompleted();});return eB.Subscribe(eL);};return z.New(eC);},CombineLatest:function(eO,eP,eQ){var eR;eR=function(eS){var eT,eU,eV,e5,e7,e_,fa,fd,fe;eT={contents:{$:0}};eU={contents:{$:0}};eV=function(){var eX,eY,eZ,e0,e1;eX=[eT.contents,eU.contents];if(eX[0].$==1){if(eX[1].$==1){e0=eX[0].$0;e1=eX[1].$0;eZ=z.Protect(function(){return(eQ(e0))(e1);},function(e3){return eS.OnNext(e3);},function(e4){return eS.OnError(e4);});}else{eZ=null;}eY=eZ;}else{eY=null;}return eY;};e5=function(e6){eT.contents={$:1,$0:e6};return eV(null);};e7=A.New(e5,function(){},function(){});e_=function(e$){eU.contents={$:1,$0:e$};return eV(null);};fa=A.New(e_,function(){},function(){});fd=eO.Subscribe(e7);fe=eP.Subscribe(fa);return f.Of(function(){fd.Dispose();return fe.Dispose();});};return z.New(eR);},Concat:function(fg,fh){var fi;fi=function(fj){var fk,fl,fq;fk={contents:{$:0}};fl=fg.Subscribe(A.New(function(fm){return fj.OnNext(fm);},function(){},function(){var fp;fp=fh.Subscribe(fj);fk.contents={$:1,$0:fp};}));fq=function(){fk.contents.$==1?fk.contents.$0.Dispose():null;return fl.Dispose();};return f.Of(fq);};return z.New(fi);},Drop:function(fs,ft){var fu;fu=function(fv){var fw,fx,fz;fw={contents:0};fx=function(fy){r.Increment(fw);return fw.contents>fs?fv.OnNext(fy):null;};fz=A.New(fx,function(fA){return fv.OnError(fA);},function(){return fv.OnCompleted();});return ft.Subscribe(fz);};return z.New(fu);},Filter:function(fC,fD){var fE;fE=function(fF){var fG,fN;fG=function(fH){var fJ;fJ=function(fK){return fF.OnNext(fK);};return z.Protect(function(){return fC(fH)?{$:1,$0:fH}:{$:0};},function(fL){return d.iter(fJ,fL);},function(fM){return fF.OnError(fM);});};fN=A.New(fG,function(fO){return fF.OnError(fO);},function(){return fF.OnCompleted();});return fD.Subscribe(fN);};return z.New(fE);},Map:function(fQ,fR){var fS;fS=function(fT){var fU,fZ;fU=function(fV){return z.Protect(function(){return fQ(fV);},function(fX){return fT.OnNext(fX);},function(fY){return fT.OnError(fY);});};fZ=A.New(fU,function(f0){return fT.OnError(f0);},function(){return fT.OnCompleted();});return fR.Subscribe(fZ);};return z.New(fS);},Merge:function(f2,f3){var f4;f4=function(f5){var f6,f7,f8,ga,gb,gf;f6={contents:false};f7={contents:false};f8=A.New(function(f9){return f5.OnNext(f9);},function(){},function(){f6.contents=true;return(f6.contents?f7.contents:false)?f5.OnCompleted():null;});ga=f2.Subscribe(f8);gb=A.New(function(gc){return f5.OnNext(gc);},function(){},function(){f7.contents=true;return(f6.contents?f7.contents:false)?f5.OnCompleted():null;});gf=f3.Subscribe(gb);return f.Of(function(){ga.Dispose();return gf.Dispose();});};return z.New(f4);},Never:function(){return z.New(function(){return f.Of(function(){});});},New:function(gj){return $.New(B,{Subscribe1:gj});},Observable:$.Class({Subscribe:function(gk){return this.Subscribe1.call(null,gk);}}),Of:function(gl){return z.New(function(gm){return f.Of(gl(function(gn){return gm.OnNext(gn);}));});},Protect:function(go,gp,gq){var gr,gs,gt,gu,gv,gw;try{gs={$:0,$0:go(null)};}catch(gt){gs={$:1,$0:gt};}gr=gs;if(gr.$==1){gv=gr.$0;gu=gq(gv);}else{gw=gr.$0;gu=gp(gw);}return gu;},Range:function(gx,gy){var gz;gz=function(gA){var gB;for(gB=gx;gB<=gx+gy;gB++){gA.OnNext(gB);}return f.Of(function(){});};return z.New(gz);},Return:function(gD){var gE;gE=function(gF){gF.OnNext(gD);gF.OnCompleted();return f.Of(function(){});};return z.New(gE);},SelectMany:function(gH){return z.New(function(gI){var gJ,gL;gJ={contents:function(){}};gL=i.subscribeTo(gH,function(gM){var gN;gN=i.subscribeTo(gM,function(gO){return gI.OnNext(gO);});gJ.contents=function(){gJ.contents.call(null,null);return gN.Dispose();};return;});return f.Of(function(){gJ.contents.call(null,null);return gL.Dispose();});});},Sequence:function(gR){var gS;gS=function(gT){var gU,gV,gW,gX;if(gT.$==1){gV=gT.$1;gW=gT.$0;gX=gS(gV);gU=z.CombineLatest(gW,gX,function(gY){return function(gZ){return $.New(D,{$:1,$0:gY,$1:gZ});};});}else{gU=z.Return($.New(D,{$:0}));}return gU;};return gS(C.ofSeq(gR));},Switch:function(g0){return z.New(function(g1){var g2,g3,g4;g2={contents:0};g3={contents:{$:0}};g4=i.subscribeTo(g0,function(g5){var g6,g7,g9;r.Increment(g2);g3.contents.$==1?g3.contents.$0.Dispose():null;g6=g2.contents;g7=i.subscribeTo(g5,function(g8){return g6===g2.contents?g1.OnNext(g8):null;});g9={$:1,$0:g7};g3.contents=g9;return;});return g4;});}},ObservableModule:{Pairwise:function(g_){var g$;g$=function(ha){var hb,hc,hh;hb={contents:{$:0}};hc=function(hd){var he,hf,hg;he=hb.contents;if(he.$==1){hg=he.$0;hf=ha.OnNext([hg,hd]);}else{hf=null;}hb.contents={$:1,$0:hd};return;};hh=A.New(hc,function(hi){return ha.OnError(hi);},function(){return ha.OnCompleted();});return g_.Subscribe(hh);};return z.New(g$);},Partition:function(hk,hl){var hm;hm=function(hn){var ho;ho=hk(hn);return!ho;};return[z.Filter(hk,hl),z.Filter(hm,hl)];},Scan:function(hp,hq,hr){var hs;hs=function(ht){var hu,hv,hA;hu={contents:hq};hv=function(hw){return z.Protect(function(){return(hp(hu.contents))(hw);},function(hy){hu.contents=hy;return ht.OnNext(hy);},function(hz){return ht.OnError(hz);});};hA=A.New(hv,function(hB){return ht.OnError(hB);},function(){return ht.OnCompleted();});return hr.Subscribe(hA);};return z.New(hs);},Split:function(hD,hE){var hF,hK,hL,hQ;hF=function(hG){var hH,hI,hJ;hH=hD(hG);if(hH.$==0){hJ=hH.$0;hI={$:1,$0:hJ};}else{hI={$:0};}return hI;};hK=z.Choose(hF,hE);hL=function(hM){var hN,hO,hP;hN=hD(hM);if(hN.$==1){hP=hN.$0;hO={$:1,$0:hP};}else{hO={$:0};}return hO;};hQ=z.Choose(hL,hE);return[hK,hQ];}},Observer:{New:function(hR,hS,hT){return $.New(E,{onNext:hR,onError:hS,onCompleted:hT});},Observer:$.Class({OnCompleted:function(){return this.onCompleted.call(null,null);},OnError:function(hU){return this.onError.call(null,hU);},OnNext:function(hV){return this.onNext.call(null,hV);}}),Of:function(hW){return $.New(E,{onNext:function(hX){return hW(hX);},onError:function(hY){return r.Raise(hY);},onCompleted:function(){return null;}});}}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Unchecked);c=$.Safe(a.Seq);d=$.Safe(a.Option);e=$.Safe(a.Control);f=$.Safe(e.Disposable);g=$.Safe(a.IntrinsicFunctionProxy);h=$.Safe(e.FSharpEvent);i=$.Safe(a.Util);j=$.Safe(e.Event);k=$.Safe(j.Event);l=$.Safe(a.Collections);m=$.Safe(l.ResizeArray);n=$.Safe(m.ResizeArrayProxy);o=$.Safe(e.EventModule);p=$.Safe(e.HotStream);q=$.Safe(p.HotStream);r=$.Safe(a.Operators);s=$.Safe($$.Error);t=$.Safe(a.Concurrency);u=$.Safe($$.setTimeout);v=$.Safe($$.clearTimeout);w=$.Safe(l.LinkedList);x=$.Safe(w.ListProxy);y=$.Safe(e.MailboxProcessor);z=$.Safe(e.Observable);A=$.Safe(e.Observer);B=$.Safe(z.Observable);C=$.Safe(a.List);D=$.Safe(C.T);return E=$.Safe(A.Observer);});$.OnLoad(function(){return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;$.Define($$,{IntelliFactory:{WebSharper:{Collections:{BalancedTree:{Add:function(E,F){return c.Put(function(){return function(H){return H;};},E,F);},Branch:function(I,J,K){return{Node:I,Left:J,Right:K,Height:1+d.Max(J==null?0:J.Height,K==null?0:K.Height),Count:1+(J==null?0:J.Count)+(K==null?0:K.Count)};},Build:function(L,M,N){var O,P,Q,R,S;O=N-M+1;if(O<=0){P=null;}else{Q=(M+N)/2>>0;R=c.Build(L,M,Q-1);S=c.Build(L,Q+1,N);P=c.Branch(e.GetArray(L,Q),R,S);}return P;},Contains:function(T,U){return!((c.Lookup(T,U))[0]==null);},Enumerate:function(V,W){var X;X=$.Tupled(function(Y){var Z,_0,_1,_2,_3,_4,_5;Z=Y[0];_0=Y[1];if(Z==null){if(_0.$==1){_3=_0.$0[0];_4=_0.$1;_5=_0.$0[1];_2={$:1,$0:[_3,[_5,_4]]};}else{_2={$:0};}_1=_2;}else{_1=V?X([Z.Right,$.New(h,{$:1,$0:[Z.Node,Z.Left],$1:_0})]):X([Z.Left,$.New(h,{$:1,$0:[Z.Node,Z.Right],$1:_0})]);}return _1;});return f.unfold(X,[W,$.New(h,{$:0})]);},Lookup:function(_6,_7){var _8,_9,_,ba,bb,bc;_8=[];_9=_7;_=true;while(_){if(_9==null){ba=_=false;}else{bb=d.Compare(_6,_9.Node);if(bb===0){bc=_=false;}else{if(bb===1){_8.unshift([true,_9.Node,_9.Left]);bc=_9=_9.Right;}else{_8.unshift([false,_9.Node,_9.Right]);bc=_9=_9.Left;}}ba=bc;}}return[_9,_8];},OfSeq:function(bc){var bd;bd=i.sort(f.toArray(f.distinct(bc)));return c.Build(bd,0,bd.length-1);},Put:function(be,bf,bg){var bh,bi,bj;bh=c.Lookup(bf,bg);bi=bh[0];bj=bh[1];return bi==null?c.Rebuild(bj,c.Branch(bf,null,null)):c.Rebuild(bj,c.Branch((be(bi.Node))(bf),bi.Left,bi.Right));},Rebuild:function(bk,bl){var bm,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB;bm=function(bn){return bn==null?0:bn.Height;};bo=bl;for(bp=0;bp<=e.GetLength(bk)-1;bp++){bq=e.GetArray(bk,bp);if(bq[0]){bs=bq[1];bt=bq[2];if(bm(bo)>bm(bt)+1){if(bm(bo.Left)===bm(bo.Right)+1){bw=bo.Left;bv=c.Branch(bw.Node,c.Branch(bs,bt,bw.Left),c.Branch(bo.Node,bw.Right,bo.Right));}else{bv=c.Branch(bo.Node,c.Branch(bs,bt,bo.Left),bo.Right);}bu=bv;}else{bu=c.Branch(bs,bt,bo);}br=bu;}else{bx=bq[1];by=bq[2];if(bm(bo)>bm(by)+1){if(bm(bo.Right)===bm(bo.Left)+1){bB=bo.Right;bA=c.Branch(bB.Node,c.Branch(bo.Node,bo.Left,bB.Left),c.Branch(bx,bB.Right,by));}else{bA=c.Branch(bo.Node,bo.Left,c.Branch(bx,bo.Right,by));}bz=bA;}else{bz=c.Branch(bx,bo,by);}br=bz;}bo=br;}return bo;},Remove:function(bC,bD){var bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO;bE=c.Lookup(bC,bD);bF=bE[0];bG=bE[1];if(bF==null){bH=bD;}else{if(bF.Right==null){bI=c.Rebuild(bG,bF.Left);}else{if(bF.Left==null){bJ=c.Rebuild(bG,bF.Right);}else{bL=bF.Left;bM=bF.Right;bK=f.append(c.Enumerate(false,bL),c.Enumerate(false,bM));bN=f.toArray(bK);bO=c.Build(bN,0,bN.length-1);bJ=c.Rebuild(bG,bO);}bI=bJ;}bH=bI;}return bH;},TryFind:function(bP,bQ){var bR;bR=(c.Lookup(bP,bQ))[0];return bR==null?{$:0}:{$:1,$0:bR.Node};}},Dictionary:$.Class({Add:function(bS,bT){var bU,bV;bU=this.hash.call(null,bS);if(this.data.hasOwnProperty(bU)){bV=d.FailWith("An item with the same key has already been added.");}else{this.data[bU]={K:bS,V:bT};bV=void(this.count=this.count+1);}return bV;},Clear:function(){this.data={};this.count=0;return;},ContainsKey:function(bW){return this.data.hasOwnProperty(this.hash.call(null,bW));},GetEnumerator:function(){var bX;bX=j.GetFieldValues(this.data);return k.Get(bX);},Remove:function(bY){var bZ,b0;bZ=this.hash.call(null,bY);if(this.data.hasOwnProperty(bZ)){j.Delete(this.data,bZ);this.count=this.count-1;b0=true;}else{b0=false;}return b0;},get_Item:function(b1){var b2,b3,b4;b2=this.hash.call(null,b1);if(this.data.hasOwnProperty(b2)){b4=this.data[b2];b3=b4.V;}else{b3=l.notPresent();}return b3;},set_Item:function(b5,b6){var b7;b7=this.hash.call(null,b5);!this.data.hasOwnProperty(b7)?void(this.count=this.count+1):null;this.data[b7]={K:b5,V:b6};return;}},{New:function(b8,b9){return $.New(this,m.New11(b8,function(b_){return function(b$){return b9.Equals(b_,b$);};},function(ca){return b9.GetHashCode(ca);}));},New1:function(cb){return $.New(this,m.New11(cb,function(cc){return function(cd){return n.Equals(cc,cd);};},function(ce){return n.Hash(ce);}));},New11:function(cf,cg,ch){var ci,cj,ck,cl;ci=$.New(this,{});ci.hash=ch;ci.count=0;ci.data={};cj=k.Get(cf);while(cj.MoveNext()){ck=cj.get_Current();cl=ck.K;ci.data[ci.hash.call(null,cl)]=ck.V;}return ci;},New12:function(cm){return $.New(this,m.New11([],function(cn){return function(co){return cm.Equals(cn,co);};},function(cp){return cm.GetHashCode(cp);}));},New2:function(){return $.New(this,m.New11([],function(cq){return function(cr){return n.Equals(cq,cr);};},function(cs){return n.Hash(cs);}));},New3:function(){return $.New(this,m.New2());},New4:function(cu,cv){return $.New(this,m.New12(cv));}}),DictionaryUtil:{notPresent:function(){return d.FailWith("The given key was not present in the dictionary.");}},FSharpMap:$.Class({Add:function(cw,cx){var cy,cz;cy=this.tree;cz=$.New(p,{Key:cw,Value:cx});return o.New1(c.Add(cz,cy));},CompareTo:function(cA){return f.compareWith(function(cB){return function(cC){return d.Compare(cB,cC);};},this,cA);},ContainsKey:function(cD){var cE,cF;cE=this.tree;cF=$.New(p,{Key:cD,Value:undefined});return c.Contains(cF,cE);},Equals:function(cG){return this.get_Count()===cG.get_Count()?f.forall2(function(cH){return function(cI){return n.Equals(cH,cI);};},this,cG):false;},GetEnumerator:function(){var cJ,cK,cM,cN;cJ=this.tree;cK=function(cL){return{K:cL.Key,V:cL.Value};};cM=c.Enumerate(false,cJ);cN=f.map(cK,cM);return k.Get(cN);},GetHashCode:function(){var cO;cO=f.toArray(this);return n.Hash(cO);},Remove:function(cP){var cQ,cR;cQ=this.tree;cR=$.New(p,{Key:cP,Value:undefined});return o.New1(c.Remove(cR,cQ));},TryFind:function(cS){var cT,cU,cV,cX;cT=this.tree;cU=$.New(p,{Key:cS,Value:undefined});cV=function(cW){return cW.Value;};cX=c.TryFind(cU,cT);return q.map(cV,cX);},get_Count:function(){var cY;cY=this.tree;return cY==null?0:cY.Count;},get_IsEmpty:function(){return this.tree==null;},get_Item:function(cZ){var c0,c1,c2;c0=this.TryFind(cZ);if(c0.$==0){c1=d.FailWith("The given key was not present in the dictionary.");}else{c2=c0.$0;c1=c2;}return c1;},get_Tree:function(){return this.tree;}},{New:function(c3){return $.New(this,o.New1(r.fromSeq(c3)));},New1:function(c4){var c5;c5=$.New(this,{});c5.tree=c4;return c5;}}),FSharpSet:$.Class({Add:function(c6){return s.New1(c.Add(c6,this.tree));},CompareTo:function(c7){return f.compareWith(function(c8){return function(c9){return d.Compare(c8,c9);};},this,c7);},Contains:function(c_){return c.Contains(c_,this.tree);},Equals:function(c$){return this.get_Count()===c$.get_Count()?f.forall2(function(da){return function(db){return n.Equals(da,db);};},this,c$):false;},GetEnumerator:function(){var dc,dd;dc=this.tree;dd=c.Enumerate(false,dc);return k.Get(dd);},GetHashCode:function(){var de;de=f.toArray(this);return-1741749453+n.Hash(de);},IsProperSubsetOf:function(df){return this.IsSubsetOf(df)?this.get_Count()<df.get_Count():false;},IsProperSupersetOf:function(dg){return this.IsSupersetOf(dg)?this.get_Count()>dg.get_Count():false;},IsSubsetOf:function(dh){return f.forall(function(di){return dh.Contains(di);},this);},IsSupersetOf:function(dj){var dl=this;return f.forall(function(dk){return dl.Contains(dk);},dj);},Remove:function(dm){return s.New1(c.Remove(dm,this.tree));},add:function(dn){var _do,dp;_do=f.append(this,dn);dp=c.OfSeq(_do);return s.New1(dp);},get_Count:function(){var dq;dq=this.tree;return dq==null?0:dq.Count;},get_IsEmpty:function(){return this.tree==null;},get_MaximumElement:function(){var dr;dr=this.tree;return f.head(c.Enumerate(true,dr));},get_MinimumElement:function(){var ds;ds=this.tree;return f.head(c.Enumerate(false,ds));},get_Tree:function(){return this.tree;},sub:function(dt){return t.Filter(function(du){return!dt.Contains(du);},this);}},{New:function(dv){return $.New(this,s.New1(u.ofSeq(dv)));},New1:function(dw){var dx;dx=$.New(this,{});dx.tree=dw;return dx;}}),HashSet:{HashSet:$.Class({Add:function(dy){return this.add(dy);},Clear:function(){this.data=v.prototype.constructor.apply(undefined,[].concat([]));this.count=0;return;},Contains:function(dz){var dA;dA=this.data[this.hash.call(null,dz)];return dA==null?false:this.arrContains(dz,dA);},CopyTo:function(dB){var dC,dD,dE;dC=0;dD=x.concat(this.data);for(dE=0;dE<=dD.length-1;dE++){e.SetArray(dB,dE,dD[dE]);}return;},ExceptWith:function(dF){var dG,dH,dI;dG=k.Get(dF);while(dG.MoveNext()){dH=dG.get_Current();dI=this.Remove(dH);}return;},GetEnumerator:function(){var dJ;dJ=x.concat(this.data);return k.Get(dJ);},IntersectWith:function(dK){var dL,dM,dN,dO,dP,dQ,dR;dL=y.New3(dK,this.equals,this.hash);dM=x.concat(this.data);for(dN=0;dN<=dM.length-1;dN++){dO=dM[dN];dP=dL.Contains(dO);if(!dP){dR=this.Remove(dO);dQ=void dR;}else{dQ=null;}}return;},IsProperSubsetOf:function(dS){var dT;dT=i.ofSeq(dS);return this.count<e.GetLength(dT)?this.IsSubsetOf(dT):false;},IsProperSupersetOf:function(dU){var dV;dV=i.ofSeq(dU);return this.count>e.GetLength(dV)?this.IsSupersetOf(dV):false;},IsSubsetOf:function(dW){var dX,dY,d0;dX=y.New3(dW,this.equals,this.hash);dY=function(dZ){return dX.Contains(dZ);};d0=x.concat(this.data);return f.forall(dY,d0);},IsSupersetOf:function(d1){var d2,d4=this;d2=function(d3){return d4.Contains(d3);};return f.forall(d2,d1);},Overlaps:function(d5){var d6,d8=this;d6=function(d7){return d8.Contains(d7);};return f.exists(d6,d5);},Remove:function(d9){var d_,d$,ea,eb;d_=this.hash.call(null,d9);d$=this.data[d_];if(d$==null){ea=false;}else{if(this.arrRemove(d9,d$)){this.count=this.count-1;eb=true;}else{eb=false;}ea=eb;}return ea;},RemoveWhere:function(ec){var ed,ee,ef,eg,eh;ed=x.concat(this.data);for(ee=0;ee<=ed.length-1;ee++){ef=ed[ee];if(ec(ef)){eh=this.Remove(ef);eg=void eh;}else{eg=null;}}return;},SetEquals:function(ei){var ej;ej=y.New3(ei,this.equals,this.hash);return this.get_Count()===ej.get_Count()?this.IsSupersetOf(ej):false;},SymmetricExceptWith:function(ek){var el,em,en,eo,ep;el=k.Get(ek);while(el.MoveNext()){em=el.get_Current();if(this.Contains(em)){eo=this.Remove(em);en=void eo;}else{ep=this.Add(em);en=void ep;}}return;},UnionWith:function(eq){var er,es,et;er=k.Get(eq);while(er.MoveNext()){es=er.get_Current();et=this.Add(es);}return;},add:function(eu){var ev,ew,ex,ey,ez,eA;ev=this.hash.call(null,eu);ew=this.data[ev];if(ew==null){this.data[ev]=[eu];this.count=this.count+1;ex=true;}else{if(this.arrContains(eu,ew)){ey=false;}else{ez=[eu];eA=ew.push.apply(ew,[].concat(ez));this.count=this.count+1;ey=true;}ex=ey;}return ex;},arrContains:function(eB,eC){var eD,eE,eF;eD=true;eE=0;eF=eC.length;while(eD?eE<eF:false){(this.equals.call(null,eC[eE]))(eB)?eD=false:eE=eE+1;}return!eD;},arrRemove:function(eG,eH){var eI,eJ,eK,eL,eM,eN,eO;eI=true;eJ=0;eK=eH.length;while(eI?eJ<eK:false){if((this.equals.call(null,eH[eJ]))(eG)){eM=eJ;eN=[];eO=eH.splice.apply(eH,[eM,1].concat(eN));eL=eI=false;}else{eL=eJ=eJ+1;}}return!eI;},get_Count:function(){return this.count;}},{New:function(eP){return $.New(this,y.New3(f.empty(),function(eQ){return function(eR){return eP.Equals(eQ,eR);};},function(eS){return eP.GetHashCode(eS);}));},New1:function(eT,eU){return $.New(this,y.New3(eT,function(eV){return function(eW){return eU.Equals(eV,eW);};},function(eX){return eU.GetHashCode(eX);}));},New11:function(eY){return $.New(this,y.New3(eY,function(eZ){return function(e0){return n.Equals(eZ,e0);};},function(e1){return n.Hash(e1);}));},New2:function(){return $.New(this,y.New3(f.empty(),function(e2){return function(e3){return n.Equals(e2,e3);};},function(e4){return n.Hash(e4);}));},New3:function(e5,e6,e7){var e8,e9,e_,e$;e8=$.New(this,{});e8.equals=e6;e8.hash=e7;e8.data=v.prototype.constructor.apply(undefined,[].concat([]));e8.count=0;e9=k.Get(e5);while(e9.MoveNext()){e_=e9.get_Current();e$=e8.add(e_);}return e8;}}),HashSetUtil:{concat:function($o){var $0=this,$this=this;var r=[];for(var k in $o){r.push.apply(r,$o[k]);};return r;}}},LinkedList:{EnumeratorProxy:$.Class({Dispose:function(){return null;},MoveNext:function(){this.c=this.c.n;return!n.Equals(this.c,null);},get_Current:function(){return this.c.v;}},{New:function(fa){var fb;fb=$.New(this,{});fb.c=fa;return fb;}}),ListProxy:$.Class({AddAfter:function(fc,fd){var fe,ff,fg;fe=fc.n;ff={p:fc,n:fe,v:fd};n.Equals(fc.n,null)?void(this.p=ff):null;fc.n=ff;if(!n.Equals(fe,null)){fe.p=ff;fg=ff;}else{fg=null;}this.c=this.c+1;return ff;},AddBefore:function(fh,fi){var fj,fk,fl;fj=fh.p;fk={p:fj,n:fh,v:fi};n.Equals(fh.p,null)?void(this.n=fk):null;fh.p=fk;if(!n.Equals(fj,null)){fj.n=fk;fl=fk;}else{fl=null;}this.c=this.c+1;return fk;},AddFirst:function(fm){var fn,fo;if(this.c===0){fo={p:null,n:null,v:fm};this.n=fo;this.p=this.n;this.c=1;fn=fo;}else{fn=this.AddBefore(this.n,fm);}return fn;},AddLast:function(fp){var fq,fr;if(this.c===0){fr={p:null,n:null,v:fp};this.n=fr;this.p=this.n;this.c=1;fq=fr;}else{fq=this.AddAfter(this.p,fp);}return fq;},Clear:function(){this.c=0;this.n=null;this.p=null;return;},Contains:function(fs){var ft,fu;ft=false;fu=this.n;while(!n.Equals(fu,null)?!ft:false){fu.v==fs?ft=true:fu=fu.n;}return ft;},Find:function(fv){var fw,fx;fw=this.n;fx=true;while(fx?!n.Equals(fw,null):false){fw.v==fv?fx=false:fw=fw.n;}return fx?null:fw;},FindLast:function(fy){var fz,fA;fz=this.p;fA=true;while(fA?!n.Equals(fz,null):false){fz.v==fy?fA=false:fz=fz.p;}return fA?null:fz;},GetEnumerator:function(){return A.New(this);},Remove:function(fB){var fC,fD,fE,fF;fC=fB.p;fD=fB.n;if(n.Equals(fC,null)){fE=void(this.n=fD);}else{fC.n=fD;fE=fD;}if(n.Equals(fD,null)){fF=void(this.p=fC);}else{fD.p=fC;fF=fC;}this.c=this.c-1;return;},Remove1:function(fG){var fH,fI;fH=this.Find(fG);if(n.Equals(fH,null)){fI=false;}else{this.Remove(fH);fI=true;}return fI;},RemoveFirst:function(){return this.Remove(this.n);},RemoveLast:function(){return this.Remove(this.p);},get_Count:function(){return this.c;},get_First:function(){return this.n;},get_Last:function(){return this.p;}},{New:function(){return $.New(this,B.New1(f.empty()));},New1:function(fJ){var fK,fL,fM,fN;fK=$.New(this,{});fK.c=0;fK.n=null;fK.p=null;fL=k.Get(fJ);if(fL.MoveNext()){fK.n={p:null,n:null,v:fL.get_Current()};fK.p=fK.n;fM=void(fK.c=1);}else{fM=null;}while(fL.MoveNext()){fN={p:fK.p,n:null,v:fL.get_Current()};fK.p.n=fN;fK.p=fN;fK.c=fK.c+1;}return fK;}})},MapModule:{Exists:function(fO,fP){var fQ;fQ=function(fR){return(fO(fR.K))(fR.V);};return f.exists(fQ,fP);},Filter:function(fS,fT){var fU,fV,fX,fY,fZ,f0;fU=fT.get_Tree();fV=function(fW){return(fS(fW.Key))(fW.Value);};fX=c.Enumerate(false,fU);fY=f.filter(fV,fX);fZ=f.toArray(fY);f0=c.Build(fZ,0,fZ.length-1);return o.New1(f0);},FindKey:function(f1,f2){var f3;f3=function(f4){return(f1(f4.K))(f4.V)?{$:1,$0:f4.K}:{$:0};};return f.pick(f3,f2);},Fold:function(f5,f6,f7){var f8,f9,ga;f8=f7.get_Tree();f9=function(f_){return function(f$){return((f5(f_))(f$.Key))(f$.Value);};};ga=c.Enumerate(false,f8);return f.fold(f9,f6,ga);},FoldBack:function(gb,gc,gd){var ge,gf,gi;ge=gc.get_Tree();gf=function(gg){return function(gh){return((gb(gh.Key))(gh.Value))(gg);};};gi=c.Enumerate(true,ge);return f.fold(gf,gd,gi);},ForAll:function(gj,gk){var gl;gl=function(gm){return(gj(gm.K))(gm.V);};return f.forall(gl,gk);},Iterate:function(gn,go){var gp;gp=function(gq){return(gn(gq.K))(gq.V);};return f.iter(gp,go);},Map:function(gr,gs){var gt,gu,gw,gx,gy;gt=gs.get_Tree();gu=function(gv){return $.New(p,{Key:gv.Key,Value:(gr(gv.Key))(gv.Value)});};gw=c.Enumerate(false,gt);gx=f.map(gu,gw);gy=c.OfSeq(gx);return o.New1(gy);},OfArray:function(gz){var gA,gE,gF;gA=$.Tupled(function(gB){var gC,gD;gC=gB[0];gD=gB[1];return $.New(p,{Key:gC,Value:gD});});gE=f.map(gA,gz);gF=c.OfSeq(gE);return o.New1(gF);},Partition:function(gG,gH){var gI,gK,gL,gM,gN,gO,gP,gQ;gI=function(gJ){return(gG(gJ.Key))(gJ.Value);};gL=gH.get_Tree();gK=f.toArray(c.Enumerate(false,gL));gM=i.partition(gI,gK);gN=gM[1];gO=gM[0];gP=c.Build(gO,0,gO.length-1);gQ=c.Build(gN,0,gN.length-1);return[o.New1(gP),o.New1(gQ)];},Pick:function(gR,gS){var gT;gT=function(gU){return(gR(gU.K))(gU.V);};return f.pick(gT,gS);},ToSeq:function(gV){var gW,gX,gZ;gW=gV.get_Tree();gX=function(gY){return[gY.Key,gY.Value];};gZ=c.Enumerate(false,gW);return f.map(gX,gZ);},TryFind:function(g0,g1){return g1.TryFind(g0);},TryFindKey:function(g2,g3){var g4;g4=function(g5){return(g2(g5.K))(g5.V)?{$:1,$0:g5.K}:{$:0};};return f.tryPick(g4,g3);},TryPick:function(g6,g7){var g8;g8=function(g9){return(g6(g9.K))(g9.V);};return f.tryPick(g8,g7);}},MapUtil:{fromSeq:function(g_){var g$;g$=f.toArray(f.delay(function(){return f.collect($.Tupled(function(hb){var hc,hd;hc=hb[1];hd=hb[0];return[$.New(p,{Key:hd,Value:hc})];}),f.distinctBy($.Tupled(function(he){return he[0];}),g_));}));i.sortInPlace(g$);return c.Build(g$,0,g$.length-1);}},Pair:$.Class({CompareTo:function(hf){return d.Compare(this.Key,hf.Key);},Equals:function(hg){return n.Equals(this.Key,hg.Key);},GetHashCode:function(){var hh;hh=this.Key;return n.Hash(hh);}}),ResizeArray:{ResizeArrayProxy:$.Class({Add:function(hi){return this.arr.push(hi);},AddRange:function(hj){var hl=this;return f.iter(function(hk){return hl.Add(hk);},hj);},Clear:function(){var hm,hn;hn=this.arr;hm=C.splice(this.arr,0,e.GetLength(hn),[]);return;},CopyTo:function(ho){return this.CopyTo1(ho,0);},CopyTo1:function(hp,hq){return this.CopyTo2(0,hp,hq,this.get_Count());},CopyTo2:function(hr,hs,ht,hu){return i.blit(this.arr,hr,hs,ht,hu);},GetEnumerator:function(){var hv;hv=this.arr;return k.Get(hv);},GetRange:function(hw,hx){return D.New(i.sub(this.arr,hw,hx));},Insert:function(hy,hz){var hA;hA=C.splice(this.arr,hy,0,[hz]);return;},InsertRange:function(hB,hC){var hD;hD=C.splice(this.arr,hB,0,f.toArray(hC));return;},RemoveAt:function(hE){var hF;hF=C.splice(this.arr,hE,1,[]);return;},RemoveRange:function(hG,hH){var hI;hI=C.splice(this.arr,hG,hH,[]);return;},Reverse:function(){return this.arr.reverse();},Reverse1:function(hJ,hK){return i.reverse(this.arr,hJ,hK);},ToArray:function(){return this.arr.slice();},get_Count:function(){var hL;hL=this.arr;return e.GetLength(hL);},get_Item:function(hM){return e.GetArray(this.arr,hM);},set_Item:function(hN,hO){return e.SetArray(this.arr,hN,hO);}},{New:function(hP){var hQ;hQ=$.New(this,{});hQ.arr=hP;return hQ;},New1:function(){return $.New(this,D.New([]));},New11:function(hR){return $.New(this,D.New(f.toArray(hR)));},New2:function(){return $.New(this,D.New([]));}}),splice:function($arr,$index,$howMany,$items){var $0=this,$this=this;return $$.Array.prototype.splice.apply($arr,[$index,$howMany].concat($items));}},SetModule:{Filter:function(hT,hU){var hV,hW;hV=f.toArray(f.filter(hT,hU));hW=c.Build(hV,0,hV.length-1);return s.New1(hW);},FoldBack:function(hX,hY,hZ){var h2;h2=hY.get_Tree();return f.fold(function(h0){return function(h1){return(hX(h1))(h0);};},hZ,c.Enumerate(true,h2));},Partition:function(h3,h4){var h5,h6,h7,h8,h9;h5=i.partition(h3,f.toArray(h4));h6=h5[1];h7=h5[0];h8=c.OfSeq(h7);h9=c.OfSeq(h6);return[s.New1(h8),s.New1(h9)];}},SetUtil:{ofSeq:function(h_){var h$;h$=f.toArray(h_);i.sortInPlace(h$);return c.Build(h$,0,h$.length-1);}}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Collections);c=$.Safe(b.BalancedTree);d=$.Safe(a.Operators);e=$.Safe(a.IntrinsicFunctionProxy);f=$.Safe(a.Seq);g=$.Safe(a.List);h=$.Safe(g.T);i=$.Safe(a.Arrays);j=$.Safe(a.JavaScript);k=$.Safe(a.Enumerator);l=$.Safe(b.DictionaryUtil);m=$.Safe(b.Dictionary);n=$.Safe(a.Unchecked);o=$.Safe(b.FSharpMap);p=$.Safe(b.Pair);q=$.Safe(a.Option);r=$.Safe(b.MapUtil);s=$.Safe(b.FSharpSet);t=$.Safe(b.SetModule);u=$.Safe(b.SetUtil);v=$.Safe($$.Array);w=$.Safe(b.HashSet);x=$.Safe(w.HashSetUtil);y=$.Safe(w.HashSet);z=$.Safe(b.LinkedList);A=$.Safe(z.EnumeratorProxy);B=$.Safe(z.ListProxy);C=$.Safe(b.ResizeArray);return D=$.Safe(C.ResizeArrayProxy);});$.OnLoad(function(){return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;$.Define($$,{IntelliFactory:{Reactive:{Disposable:$.Class({Dispose:function(){return this.Dispose1.call(null,null);}},{New:function(r){return $.New(b,{Dispose1:r});}}),HotStream:$.Class({Subscribe:function(s){var t;this.Latest.contents.$==1?s.OnNext(this.Latest.contents.$0):null;t=this.Event;return t.event.Subscribe(s);},Trigger:function(u){var v;this.Latest.contents={$:1,$0:u};v=this.Event;return v.event.Trigger(u);}},{New:function(w){var x;x={$:1,$0:w};return $.New(c,{Latest:{contents:x},Event:f.New()});},New1:function(){return $.New(c,{Latest:{contents:{$:0}},Event:f.New()});}}),Observable:$.Class({Subscribe:function(y){return this.OnSubscribe.call(null,y);},SubscribeWith:function(z,A){return this.OnSubscribe.call(null,g.New(z,A));}},{New:function(B){return $.New(h,{OnSubscribe:B});}}),Observer:$.Class({OnCompleted:function(){return this.OnCompleted1.call(null,null);},OnError:function(){return null;},OnNext:function(D){return this.OnNext1.call(null,D);}},{New:function(E,F){return $.New(g,{OnNext1:E,OnCompleted1:F});}}),Reactive:{Aggregate:function(G,H,I){return h.New(function(J){var K;K={contents:H};return i.subscribeTo(G,function(L){K.contents=(I(K.contents))(L);return J.OnNext(K.contents);});});},Choose:function(M,N){var O;O=function(P){return i.subscribeTo(M,function(Q){var R,S,T;R=N(Q);if(R.$==0){S=null;}else{T=R.$0;S=P.OnNext(T);}return S;});};return h.New(O);},CollectLatest:function(U){return h.New(function(V){var W,X;W=k.New2();X={contents:0};return i.subscribeTo(U,function(Y){var Z,_0;l.Increment(X);Z=X.contents;_0=i.subscribeTo(Y,function(_1){var _2;W.set_Item(Z,_1);_2=m.delay(function(){return m.map(function(_4){return _4.V;},W);});return V.OnNext(_2);});return;});});},CombineLatest:function(_5,_6,_7){var _8;_8=function(_9){var _,ba,bb,bi,bk,bm,bn,bp,br,bs,bt;_={contents:{$:0}};ba={contents:{$:0}};bb=function(){var bd,be,bf,bg,bh;bd=[_.contents,ba.contents];if(bd[0].$==1){if(bd[1].$==1){bg=bd[0].$0;bh=bd[1].$0;bf=_9.OnNext((_7(bg))(bh));}else{bf=null;}be=bf;}else{be=null;}return be;};bi=function(bj){_.contents={$:1,$0:bj};return bb(null);};bk=function(){};bm=g.New(bi,bk);bn=function(bo){ba.contents={$:1,$0:bo};return bb(null);};bp=function(){};br=g.New(bn,bp);bs=_5.Subscribe(bm);bt=_6.Subscribe(br);return b.New(function(){bs.Dispose();return bt.Dispose();});};return h.New(_8);},Concat:function(bu,bv){var bw;bw=function(bx){var by,bz,bB,bD,bE;by={contents:{$:0}};bz=function(bA){return bx.OnNext(bA);};bB=function(){by.contents={$:1,$0:bv.Subscribe(bx)};};bD=g.New(bz,bB);bE=bu.Subscribe(bD);return b.New(function(){by.contents.$==1?by.contents.$0.Dispose():null;return bE.Dispose();});};return h.New(bw);},Default:$.Field(function(){return o.New();}),Drop:function(bG,bH){var bI;bI=function(bJ){var bK;bK={contents:0};return i.subscribeTo(bG,function(bL){l.Increment(bK);return bK.contents>bH?bJ.OnNext(bL):null;});};return h.New(bI);},Heat:function(bM){var bN;bN=c.New1();i.subscribeTo(bM,function(bO){return bN.Trigger(bO);});return bN;},Merge:function(bP,bQ){var bR;bR=function(bS){var bT,bU,bV,bX,bZ,b0,b1,b3,b5,b6;bT={contents:false};bU={contents:false};bV=function(bW){return bS.OnNext(bW);};bX=function(){bT.contents=true;return(bT.contents?bU.contents:false)?bS.OnCompleted():null;};bZ=g.New(bV,bX);b0=bP.Subscribe(bZ);b1=function(b2){return bS.OnNext(b2);};b3=function(){bU.contents=true;return(bT.contents?bU.contents:false)?bS.OnCompleted():null;};b5=g.New(b1,b3);b6=bQ.Subscribe(b5);return b.New(function(){b0.Dispose();return b6.Dispose();});};return h.New(bR);},Never:function(){return h.New(function(){return b.New(function(){});});},Range:function(b_,b$){var ca;ca=function(cb){var cc;for(cc=b_;cc<=b_+b$;cc++){cb.OnNext(cc);}return b.New(function(){});};return h.New(ca);},Reactive:$.Class({Aggregate:function(ce,cf,cg){return n.Aggregate(ce,cf,cg);},Choose:function(ch,ci){return n.Choose(ch,ci);},CollectLatest:function(cj){return n.CollectLatest(cj);},CombineLatest:function(ck,cl,cm){return n.CombineLatest(ck,cl,cm);},Concat:function(cn,co){return n.Concat(cn,co);},Drop:function(cp,cq){return n.Drop(cp,cq);},Heat:function(cr){return n.Heat(cr);},Merge:function(cs,ct){return n.Merge(cs,ct);},Never:function(){return n.Never();},Return:function(cu){return n.Return(cu);},Select:function(cv,cw){return n.Select(cv,cw);},SelectMany:function(cx){return n.SelectMany(cx);},Sequence:function(cy){return n.Sequence(cy);},Switch:function(cz){return n.Switch(cz);},Where:function(cA,cB){return n.Where(cA,cB);}},{New:function(){return $.New(this,{});}}),Return:function(cC){var cD;cD=function(cE){cE.OnNext(cC);cE.OnCompleted();return b.New(function(){});};return h.New(cD);},Select:function(cG,cH){return h.New(function(cI){return i.subscribeTo(cG,function(cJ){return cI.OnNext(cH(cJ));});});},SelectMany:function(cK){return h.New(function(cL){var cM,cO;cM={contents:function(){}};cO=i.subscribeTo(cK,function(cP){var cQ;cQ=i.subscribeTo(cP,function(cR){return cL.OnNext(cR);});cM.contents=function(){cM.contents.call(null,null);return cQ.Dispose();};return;});return b.New(function(){cM.contents.call(null,null);return cO.Dispose();});});},Sequence:function(cU){var cV;cV=function(cW){var cX,cY,cZ,c0;if(cW.$==1){cY=cW.$1;cZ=cW.$0;c0=cV(cY);cX=n.CombineLatest(cZ,c0,function(c1){return function(c2){return $.New(q,{$:1,$0:c1,$1:c2});};});}else{cX=n.Return($.New(q,{$:0}));}return cX;};return n.Select(cV(p.ofSeq(cU)),function(c3){return c3;});},Switch:function(c4){return h.New(function(c5){var c6,c7,c8;c6={contents:0};c7={contents:{$:0}};c8=i.subscribeTo(c4,function(c9){var c_,c$,db;l.Increment(c6);c7.contents.$==1?c7.contents.$0.Dispose():null;c_=c6.contents;c$=i.subscribeTo(c9,function(da){return c_===c6.contents?c5.OnNext(da):null;});db={$:1,$0:c$};c7.contents=db;return;});return c8;});},Where:function(dc,dd){var de;de=function(df){return i.subscribeTo(dc,function(dg){return dd(dg)?df.OnNext(dg):null;});};return h.New(de);}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.Reactive);b=$.Safe(a.Disposable);c=$.Safe(a.HotStream);d=$.Safe($$.IntelliFactory.WebSharper);e=$.Safe(d.Control);f=$.Safe(e.FSharpEvent);g=$.Safe(a.Observer);h=$.Safe(a.Observable);i=$.Safe(d.Util);j=$.Safe(d.Collections);k=$.Safe(j.Dictionary);l=$.Safe(d.Operators);m=$.Safe(d.Seq);n=$.Safe(a.Reactive);o=$.Safe(n.Reactive);p=$.Safe(d.List);return q=$.Safe(p.T);});$.OnLoad(function(){n.Default();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;$.Define($$,{IntelliFactory:{Formlet:{Base:{D:$.Class({Dispose:function(){return null;}},{New:function(){return $.New(this,{});}}),Form:$.Class({Dispose:function(){return this.Dispose1.call(null,null);}}),Formlet:$.Class({Build:function(){return this.Build1.call(null,null);},MapResult:function(q){var t=this;return $.New(c,{Layout:this.Layout,Build1:function(){var s,u,v,w,y;s=t.Build1.call(null,null);u=t.Utils.Reactive;v=s.State;w=function(x){return q(x);};u.Select(v,w);y=s.State;return $.New(d,{Body:s.Body,Dispose1:s.Dispose1,Notify:s.Notify,State:y});},Utils:t.Utils});},get_Layout:function(){return this.Layout;}}),FormletBuilder:$.Class({Bind:function(z,A){var B;B=this.F;return B.Bind(z,A);},Delay:function(C){return this.F.Delay(C);},Return:function(D){return this.F.Return(D);},ReturnFrom:function(E){return E;}},{New:function(F){var G;G=$.New(this,{});G.F=F;return G;}}),FormletProvider:$.Class({AppendLayout:function(H,I){var J;J=this.ApplyLayout(I);return this.WithLayout(H,J);},Apply:function(K,L){var M,P=this;M=function(){var O,Q,R,S,T,V,W,X,Y,_0,_1,_2,_3,_4,_5,_6,_9;O=P.BuildForm(K);Q=P.BuildForm(L);R=P.U.Reactive;S=O.Body;T=function(U){return $.New(f,{$:1,$0:U});};V=R.Select(S,T);W=P.U.Reactive;X=Q.Body;Y=function(Z){return $.New(f,{$:2,$0:Z});};_0=W.Select(X,Y);_1=P.U.Reactive;_2=_1.Merge(V,_0);_3=P.U.Reactive;_4=Q.State;_5=O.State;_6=function(_7){return function(_8){return g.Apply(_8,_7);};};_9=_3.CombineLatest(_4,_5,_6);return $.New(d,{Body:_2,Dispose1:function(){Q.Dispose1.call(null,null);return O.Dispose1.call(null,null);},Notify:function(ba){Q.Notify.call(null,ba);return O.Notify.call(null,ba);},State:_9});};return P.New(M);},ApplyLayout:function(ba){var bb,bi=this;bb=function(){var bd,be,bf,bg,bh;bd=ba.Build();be=ba.get_Layout().Apply.call(null,bd.Body);if(be.$==0){bg=bd.Body;}else{be.$0[1];bh=be.$0[0];bg=bi.U.Reactive.Return(e.Set(bh));}bf=bg;return $.New(d,{Body:bf,Dispose1:bd.Dispose1,Notify:bd.Notify,State:bd.State});};return bi.New(bb);},Bind:function(bj,bk){var bl;bl=this.Map(bk,bj);return this.Join(bl);},BindWith:function(bm,bn,bo){var bp,bs=this;bp=function(){var br,bt,bu,bv,bw,by,bz,bA,bB,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM;br=bs.Bind(bn,bo);bt=br.Build();bu=bs.U.Reactive;bv=bt.Body;bw=function(bx){return bx.$==1?true:false;};by=bs.U.DefaultLayout.Apply.call(null,bu.Where(bv,bw));bz=bs.U.Reactive;bA=bt.Body;bB=function(bC){return bC.$==2?true:false;};bD=bs.U.DefaultLayout.Apply.call(null,bz.Where(bA,bB));bE=[by,bD];if(bE[0].$==1){if(bE[1].$==1){bI=bE[0].$0[0];bJ=bE[1].$0[0];bK=bs.U.Reactive;bL=(bm(bI))(bJ);bM=e.Set(bL);bH=bK.Return(bM);}else{bH=bs.U.Reactive.Never();}bG=bH;}else{bG=bs.U.Reactive.Never();}bF=bG;return $.New(d,{Body:bF,Dispose1:bt.Dispose1,Notify:bt.Notify,State:bt.State});};return bs.New(bp);},BuildForm:function(bN){var bO,bP,bQ,bR,bS;bO=bN.Build();bP=bN.get_Layout().Apply.call(null,bO.Body);if(bP.$==1){bR=bP.$0[1];bS=bP.$0[0];bQ=$.New(d,{Body:this.U.Reactive.Return(e.Set(bS)),Dispose1:function(){bO.Dispose1.call(null,null);return bR.Dispose();},Notify:bO.Notify,State:bO.State});}else{bQ=bO;}return bQ;},Delay:function(bU){var bV,bX=this;bV=function(){return bX.BuildForm(bU(null));};return $.New(c,{Layout:bX.L.Delay(function(){return bU(null).get_Layout();}),Build1:bV,Utils:bX.U});},Deletable:function(bZ){var b0,b4=this;b0=function(b1){var b2,b3;if(b1.$==1){b3=b1.$0;b2=b4.Return({$:1,$0:b3});}else{b2=b4.ReturnEmpty({$:0});}return b2;};return b4.Replace(bZ,b0);},Empty:function(){var b5,b7=this;b5=function(){return $.New(d,{Body:b7.U.Reactive.Return(e.Delete()),Dispose1:function(){},Notify:function(){},State:b7.U.Reactive.Never()});};return b7.New(b5);},EmptyForm:function(){return $.New(d,{Body:this.U.Reactive.Never(),Dispose1:function(){},Notify:function(){},State:this.U.Reactive.Never()});},Fail:function(ca){return $.New(d,{Body:this.U.Reactive.Never(),Dispose1:function(cb){return cb;},Notify:function(){},State:this.U.Reactive.Return($.New(g,{$:1,$0:ca}))});},FailWith:function(cd){var ce,cg=this;ce=function(){return cg.Fail(cd);};return cg.New(ce);},FlipBody:function(ch){var ci,cm=this,cr,cs;ci=function(){var ck,cl,cn,co,cq;ck=ch.Build();cl=cm.U.Reactive;cn=ck.Body;co=function(cp){return e.FlipEdit(cp);};cq=cl.Select(cn,co);return $.New(d,{Body:cq,Dispose1:ck.Dispose1,Notify:ck.Notify,State:ck.State});};cr=cm.New(ci);cs=ch.get_Layout();return cm.WithLayout(cs,cr);},FromState:function(ct){var cu,cw=this;cu=function(){return $.New(d,{Body:cw.U.Reactive.Never(),Dispose1:function(){},Notify:function(){},State:ct});};return cw.New(cu);},InitWith:function(cz,cA){var cB,cF=this,cJ,cK;cB=function(){var cD,cE,cG,cH,cI;cD=cA.Build();cE=cF.U.Reactive;cG=cF.U.Reactive.Return($.New(g,{$:0,$0:cz}));cH=cD.State;cI=cE.Concat(cG,cH);return $.New(d,{Body:cD.Body,Dispose1:cD.Dispose1,Notify:cD.Notify,State:cI});};cJ=cF.New(cB);cK=cA.get_Layout();return cF.WithLayout(cK,cJ);},InitWithFailure:function(cL){var cM,cQ=this,cU,cV;cM=function(){var cO,cP,cR,cS,cT;cO=cL.Build();cP=cQ.U.Reactive;cR=cQ.U.Reactive.Return($.New(g,{$:1,$0:$.New(j,{$:0})}));cS=cO.State;cT=cP.Concat(cR,cS);return $.New(d,{Body:cO.Body,Dispose1:cO.Dispose1,Notify:cO.Notify,State:cT});};cU=cQ.New(cM);cV=cL.get_Layout();return cQ.WithLayout(cV,cU);},Join:function(cW){var cX,c0=this;cX=function(){var cZ,c1,c2,c3,c8,c9,c_,c$,da,df,dg,dh,di,dk,dl,dm,dn,_do,dq,dr,ds,dt,du,dw,dy;cZ=c0.BuildForm(cW);c1=c0.U.Reactive;c2=cZ.State;c3=function(c4){var c5,c6,c7;if(c4.$==1){c6=c4.$0;c5=c0.Fail(c6);}else{c7=c4.$0;c5=c0.BuildForm(c7);}return c5;};c8=c0.U.Reactive;c9=c1.Select(c2,c3);c_=c8.Heat(c9);c$=c0.U.Reactive;da=function(db){var dc,dd,de;dc=c0.U.Reactive.Return(e.Delete());dd=c0.U.Reactive;de=db.Body;return dd.Concat(dc,de);};df=c$.Select(c_,da);dg=c0.U.Reactive;dh=c0.U.Reactive.Switch(df);di=function(dj){return $.New(f,{$:2,$0:dj});};dk=dg.Select(dh,di);dl=c0.U.Reactive;dm=c0.U.Reactive;dn=cZ.Body;_do=function(dp){return $.New(f,{$:1,$0:dp});};dq=dm.Select(dn,_do);dr=dl.Merge(dq,dk);dt=c0.U.Reactive;du=function(dv){return dv.State;};ds=c0.U.Reactive.Switch(dt.Select(c_,du));dw=function(dx){return cZ.Notify.call(null,dx);};dy=function(){return cZ.Dispose1.call(null,null);};return $.New(d,{Body:dr,Dispose1:dy,Notify:dw,State:ds});};return c0.New(cX);},LiftResult:function(dA){var dB;dB=function(dC){return $.New(g,{$:0,$0:dC});};return this.MapResult(dB,dA);},Map:function(dD,dE){var dF;dF=function(dG){return g.Map(dD,dG);};return this.MapResult(dF,dE);},MapBody:function(dH,dI){var dJ,dO=this;dJ={Apply:function(dK){var dL,dM,dN,dP,dQ,dR,dS,dT;dL=dI.get_Layout().Apply.call(null,dK);if(dL.$==0){dN=dO.U.DefaultLayout.Apply.call(null,dK);if(dN.$==0){dP={$:0};}else{dQ=dN.$0[1];dR=dN.$0[0];dP={$:1,$0:[dH(dR),dQ]};}dM=dP;}else{dS=dL.$0[1];dT=dL.$0[0];dM={$:1,$0:[dH(dT),dS]};}return dM;}};return dO.WithLayout(dJ,dI);},MapResult:function(dU,dV){var dW,d0=this;dW=function(){var dY,dZ,d1,d2,d4;dY=dV.Build();dZ=d0.U.Reactive;d1=dY.State;d2=function(d3){return dU(d3);};d4=dZ.Select(d1,d2);return $.New(d,{Body:dY.Body,Dispose1:dY.Dispose1,Notify:dY.Notify,State:d4});};return $.New(c,{Layout:dV.get_Layout(),Build1:dW,Utils:d0.U});},Never:function(){var d5,d7=this;d5=function(){return $.New(d,{Body:d7.U.Reactive.Never(),Dispose1:function(){},Notify:function(){},State:d7.U.Reactive.Never()});};return d7.New(d5);},New:function(d_){return $.New(c,{Layout:this.L.Default(),Build1:d_,Utils:this.U});},Replace:function(d$,ea){var eb,ed;eb=function(ec){return ea(ec);};ed=this.Map(eb,d$);return this.Switch(ed);},ReplaceFirstWithFailure:function(ee){var ef,ej=this,ep,eq;ef=function(){var eh,ei,ek,el,em,en,eo;eh=ee.Build();ei=ej.U.Reactive;ek=eh.State;el=ei.Drop(ek,1);em=ej.U.Reactive;en=ej.U.Reactive.Return($.New(g,{$:1,$0:$.New(j,{$:0})}));eo=em.Concat(en,el);return $.New(d,{Body:eh.Body,Dispose1:eh.Dispose1,Notify:eh.Notify,State:eo});};ep=ej.New(ef);eq=ee.get_Layout();return ej.WithLayout(eq,ep);},Return:function(er){var es,eu=this;es=function(){return $.New(d,{Body:eu.U.Reactive.Never(),Dispose1:function(ev){return ev;},Notify:function(){},State:eu.U.Reactive.Return($.New(g,{$:0,$0:er}))});};return eu.New(es);},ReturnEmpty:function(ex){var ey,eA=this;ey=function(){return $.New(d,{Body:eA.U.Reactive.Return(e.Delete()),Dispose1:function(eB){return eB;},Notify:function(){},State:eA.U.Reactive.Return($.New(g,{$:0,$0:ex}))});};return eA.New(ey);},SelectMany:function(eD){var eE,eH=this;eE=function(){var eG,eI,eJ,eK,eP,eQ,eR,eS,eT,eU,eW,eX,eZ,e4,e5,e_,e$,fa,fb,fc,fd,ff,fg,fh,fi,fk,fl,fn;eG=eH.BuildForm(eD);eI=eH.U.Reactive;eJ=eG.State;eK=function(eL){var eM,eN,eO;if(eL.$==1){eL.$0;eM={$:0};}else{eN=eL.$0;eO=eH.BuildForm(eN);eM={$:1,$0:eO};}return eM;};eP=eH.U.Reactive;eQ=eI.Choose(eJ,eK);eR=eP.Heat(eQ);eS=eH.U.Reactive;eT=eG.Body;eU=function(eV){return $.New(f,{$:1,$0:eV});};eW=eS.Select(eT,eU);eX={contents:function(eY){return $.New(f,{$:1,$0:eY});}};eZ=function(){var e1;e1=eX.contents;eX.contents=function(e2){var e3;e3=e1(e2);return $.New(f,{$:2,$0:e3});};return;};e4=eH.U.Reactive;e5=function(e6){var e7,e8,e9;eZ(null);e7=eX.contents;e8=eH.U.Reactive;e9=e6.Body;return e8.Select(e9,e7);};e_=e4.Select(eR,e5);e$=eH.U.Reactive.SelectMany(e_);fa=eH.U.Reactive;fb=fa.Merge(eW,e$);fc=eH.U.Reactive;fd=function(fe){return fe.State;};ff=fc.Select(eR,fd);fg=eH.U.Reactive;fh=eH.U.Reactive.CollectLatest(ff);fi=function(fj){return g.Sequence(fj);};fk=fg.Select(fh,fi);fl=function(fm){return eG.Notify.call(null,fm);};fn=function(){return eG.Dispose1.call(null,null);};return $.New(d,{Body:fb,Dispose1:fn,Notify:fl,State:fk});};return eH.New(eE);},Sequence:function(fp){var fq,fr,fs,ft,fu,fx,fy;fq=i.ofSeq(fp);if(fq.$==1){fs=fq.$1;ft=fq.$0;fu=this.Return(function(fv){return function(fw){return $.New(j,{$:1,$0:fv,$1:fw});};});fx=this.Sequence(fs);fy=this.Apply(fu,ft);fr=this.Apply(fy,fx);}else{fr=this.Return($.New(j,{$:0}));}return fr;},Switch:function(fz){var fA,fD=this;fA=function(){var fC,fE,fF,fG,fH,fI,fN,fO,fP,fQ,fR,fS,fT,fU,fW,fX,fY,fZ,f1,f3;fC=fD.WithLayoutOrDefault(fz);fE=fD.ApplyLayout(fC);fF=fD.BuildForm(fE);fG=fD.U.Reactive;fH=fF.State;fI=function(fJ){var fK,fL,fM;if(fJ.$==1){fJ.$0;fK={$:0};}else{fL=fJ.$0;fM=fD.BuildForm(fL);fK={$:1,$0:fM};}return fK;};fN=fD.U.Reactive;fO=fG.Choose(fH,fI);fP=fN.Heat(fO);fQ=fD.U.Reactive;fR=fF.Body;fT=fD.U.Reactive;fU=function(fV){return fV.Body;};fS=fD.U.Reactive.Switch(fT.Select(fP,fU));fW=fQ.Concat(fR,fS);fY=fD.U.Reactive;fZ=function(f0){return f0.State;};fX=fD.U.Reactive.Switch(fY.Select(fP,fZ));f1=function(f2){return fF.Notify.call(null,f2);};f3=function(){return fF.Dispose1.call(null,null);};return $.New(d,{Body:fW,Dispose1:f3,Notify:f1,State:fX});};return fD.New(fA);},WithCancelation:function(f5,f6){var f7,gd,ge,gf,gg,gh,gj;f7=function(f8){return function(f9){var f_,f$,ga,gb,gc;f_=[f8,f9];if(f_[1].$==0){f$=$.New(g,{$:0,$0:{$:0}});}else{if(f_[0].$==1){gb=f_[0].$0;ga=$.New(g,{$:1,$0:gb});}else{gc=f_[0].$0;ga=$.New(g,{$:0,$0:{$:1,$0:gc}});}f$=ga;}return f$;};};gd=this.Return(f7);ge=this.LiftResult(f5);gf=this.LiftResult(f6);gg=this.Apply(gd,ge);gh=function(gi){return g.Join(gi);};gj=this.Apply(gg,gf);return this.MapResult(gh,gj);},WithLayout:function(gk,gl){return $.New(c,{Layout:gk,Build1:function(){return gl.Build();},Utils:this.U});},WithLayoutOrDefault:function(gn){var go;go=function(gp){return gp;};return this.MapBody(go,gn);},WithNotification:function(gq,gr){var gs,gv=this,gy,gz;gs=function(){var gu,gw;gu=gv.BuildForm(gr);gw=function(gx){gu.Notify.call(null,gx);return gq(gx);};return $.New(d,{Body:gu.Body,Dispose1:gu.Dispose1,Notify:gw,State:gu.State});};gy=gv.New(gs);gz=gr.get_Layout();return gv.WithLayout(gz,gy);},WithNotificationChannel:function(gA){var gB,gF=this,gN,gO;gB=function(){var gD,gE,gG,gH,gJ,gL,gM;gD=gA.Build();gE=gF.U.Reactive;gG=gD.State;gH=function(gI){return[gI,gD.Notify];};gJ=function(gK){return g.Map(gH,gK);};gL=gE.Select(gG,gJ);gM=gD.Notify;return $.New(d,{Body:gD.Body,Dispose1:gD.Dispose1,Notify:gM,State:gL});};gN=gF.New(gB);gO=gA.get_Layout();return gF.WithLayout(gO,gN);}},{New:function(gP){var gQ;gQ=$.New(this,{});gQ.U=gP;gQ.L=k.New({Reactive:gQ.U.Reactive});return gQ;}}),LayoutUtils:$.Class({Default:function(){return{Apply:function(){return{$:0};}};},Delay:function(gS){return{Apply:function(gT){return gS(null).Apply.call(null,gT);}};},New:function(gU){return{Apply:function(gV){var gW,gX,gY;gW=gU(null);gX={contents:$.New(l,{$:0})};gY=m.subscribeTo(gV,function(gZ){var g0,g1,g2,g3;g0=e.ReplacedTree(gZ,gX.contents);gX.contents=e.Apply(gZ,gX.contents);g1=e.Range(gZ,gX.contents);g2=g1[0];gW.Remove.call(null,g0.get_Sequence());g3=function(g4){return function(g5){return(gW.Insert.call(null,g2+g4))(g5);};};return n.iteri(g3,gZ);});return{$:1,$0:[gW.Body,gY]};}};}},{New:function(){return $.New(this,{});}}),Result:$.Class({},{Apply:function(g7,g8){var g9,g_,g$,ha,hb,hc,hd,he,hf,hg;g9=[g7,g8];if(g9[0].$==1){if(g9[1].$==1){ha=g9[0].$0;hb=g9[1].$0;g$=$.New(g,{$:1,$0:i.append(ha,hb)});}else{hc=g9[0].$0;g$=$.New(g,{$:1,$0:hc});}g_=g$;}else{if(g9[1].$==1){g9[0].$0;he=g9[1].$0;hd=$.New(g,{$:1,$0:he});}else{hf=g9[0].$0;hg=g9[1].$0;hd=$.New(g,{$:0,$0:hf(hg)});}g_=hd;}return g_;},Join:function(hh){var hi,hj,hk;if(hh.$==1){hj=hh.$0;hi=$.New(g,{$:1,$0:hj});}else{hk=hh.$0;hi=hk;}return hi;},Map:function(hl,hm){var hn,ho,hp;if(hm.$==1){ho=hm.$0;hn=$.New(g,{$:1,$0:ho});}else{hp=hm.$0;hn=$.New(g,{$:0,$0:hl(hp)});}return hn;},OfOption:function(hq){var hr,hs;if(hq.$==0){hr=$.New(g,{$:1,$0:$.New(j,{$:0})});}else{hs=hq.$0;hr=$.New(g,{$:0,$0:hs});}return hr;},Sequence:function(ht){var hu;hu=function(hv){return function(hw){var hx,hy,hz,hA,hB,hC,hD,hE,hF;if(hv.$==1){hy=hv.$0;if(hw.$==1){hA=hw.$0;hz=$.New(g,{$:1,$0:i.append(hy,hA)});}else{hw.$0;hz=$.New(g,{$:1,$0:hy});}hx=hz;}else{hB=hv.$0;if(hw.$==1){hD=hw.$0;hC=$.New(g,{$:1,$0:hD});}else{hE=hw.$0;hF=i.ofArray([hE]);hC=$.New(g,{$:0,$0:i.append(hB,hF)});}hx=hC;}return hx;};};return n.fold(hu,$.New(g,{$:0,$0:$.New(j,{$:0})}),ht);}}),Tree:{Apply:function(hG,hH){var hI;hI=function(hJ,hK){var hL,hM,hN,hO,hP,hQ,hR,hS,hT,hU;if(hJ.$==1){hM=hJ.$0;if(hK.$==2){hO=hK.$1;hP=hK.$0;hN=$.New(l,{$:2,$0:hI(hM,hP),$1:hO});}else{hN=hI($.New(f,{$:1,$0:hM}),$.New(l,{$:2,$0:$.New(l,{$:0}),$1:hK}));}hL=hN;}else{if(hJ.$==2){hQ=hJ.$0;if(hK.$==2){hS=hK.$1;hT=hK.$0;hR=$.New(l,{$:2,$0:hT,$1:hI(hQ,hS)});}else{hR=hI($.New(f,{$:2,$0:hQ}),$.New(l,{$:2,$0:hK,$1:$.New(l,{$:0})}));}hL=hR;}else{hU=hJ.$0;hL=hU;}}return hL;};return hI(hG,hH);},Count:function(hV){var hW,hX,hY,hZ,h0,h1,h2,h3,h4,h5,h6,h7,h8;hW=[];hX=$.New(j,{$:0});hW[3]=hV;hW[2]=hX;hW[1]=0;hW[0]=1;while(hW[0]){if(hW[3].$==2){hZ=hW[3].$1;h0=hW[3].$0;h1=$.New(j,{$:1,$0:hZ,$1:hW[2]});h2=hW[1];hW[3]=h0;hW[2]=h1;hW[1]=h2;hY=void(hW[0]=1);}else{h3=hW[3];h4=h3.$==0?0:1;if(hW[2].$==1){h6=hW[2].$1;h7=hW[2].$0;h8=hW[1]+h4;hW[3]=h7;hW[2]=h6;hW[1]=h8;h5=void(hW[0]=1);}else{hW[0]=0;h5=void(hW[1]=hW[1]+h4);}hY=h5;}}return hW[1];},DeepFlipEdit:function(h9){var h_,h$,ia,ib;if(h9.$==1){h$=h9.$0;h_=$.New(f,{$:2,$0:e.DeepFlipEdit(h$)});}else{if(h9.$==2){ia=h9.$0;h_=$.New(f,{$:1,$0:e.DeepFlipEdit(ia)});}else{ib=h9.$0;h_=$.New(f,{$:0,$0:ib});}}return h_;},Delete:function(){return $.New(f,{$:0,$0:$.New(l,{$:0})});},Edit:$.Class({GetEnumerator:function(){var ic;ic=this.get_Sequence();return o.Get(ic);},GetEnumerator1:function(){var id;id=this.get_Sequence();return o.Get(id);},get_Sequence:function(){var ie,_if,ig,ih;if(this.$==1){_if=this.$0;ie=_if.get_Sequence();}else{if(this.$==2){ig=this.$0;ie=ig.get_Sequence();}else{ih=this.$0;ie=ih.get_Sequence();}}return ie;}}),FlipEdit:function(ii){var ij,ik,il,im;if(ii.$==1){ik=ii.$0;ij=$.New(f,{$:2,$0:ik});}else{if(ii.$==2){il=ii.$0;ij=$.New(f,{$:1,$0:il});}else{im=ii.$0;ij=$.New(f,{$:0,$0:im});}}return ij;},FromSequence:function(_in){var io,ir;io=function(ip){return function(iq){return $.New(l,{$:2,$0:ip,$1:$.New(l,{$:1,$0:iq})});};};ir=$.New(l,{$:0});return n.fold(io,ir,_in);},Range:function(is,it){var iu,iv,iw,ix,iy,iz,iA,iB,iC,iD,iE,iF,iG,iH;iu=[];iu[3]=0;iu[2]=it;iu[1]=is;iu[0]=1;while(iu[0]){if(iu[1].$==1){iw=iu[1].$0;if(iu[2].$==2){iu[2].$1;iy=iu[2].$0;iu[3]=iu[3];iu[2]=iy;iu[1]=iw;ix=void(iu[0]=1);}else{iz=iu[3];iA=$.New(l,{$:0});iu[3]=iz;iu[2]=iA;iu[1]=iw;ix=void(iu[0]=1);}iv=ix;}else{if(iu[1].$==2){iB=iu[1].$0;if(iu[2].$==2){iD=iu[2].$1;iE=iu[2].$0;iu[3]=iu[3]+e.Count(iE);iu[2]=iD;iu[1]=iB;iC=void(iu[0]=1);}else{iF=iu[2];iG=iu[3]+e.Count(iF);iH=$.New(l,{$:0});iu[3]=iG;iu[2]=iH;iu[1]=iB;iC=void(iu[0]=1);}iv=iC;}else{iu[1].$0;iu[0]=0;iv=void(iu[1]=[iu[3],e.Count(iu[2])]);}}}return iu[1];},ReplacedTree:function(iI,iJ){var iK,iL,iM,iN,iO,iP,iQ;if(iI.$==1){iL=iI.$0;if(iJ.$==2){iJ.$1;iN=iJ.$0;iM=e.ReplacedTree(iL,iN);}else{iM=e.ReplacedTree($.New(f,{$:1,$0:iL}),$.New(l,{$:2,$0:$.New(l,{$:0}),$1:iJ}));}iK=iM;}else{if(iI.$==2){iO=iI.$0;if(iJ.$==2){iQ=iJ.$1;iJ.$0;iP=e.ReplacedTree(iO,iQ);}else{iP=e.ReplacedTree($.New(f,{$:2,$0:iO}),$.New(l,{$:2,$0:iJ,$1:$.New(l,{$:0})}));}iK=iP;}else{iI.$0;iK=iJ;}}return iK;},Set:function(iR){return $.New(f,{$:0,$0:$.New(l,{$:1,$0:iR})});},ShowEdit:function(iS){var iT;iT=function(iU){var iV,iW,iX;if(iU.$==1){iW=iU.$0;iV="Left > "+iT(iW);}else{if(iU.$==2){iX=iU.$0;iV="Right > "+iT(iX);}else{iV="Replace";}}return iV;};return iT(iS);},Transform:function(iY,iZ){var i0,i1,i2,i3,i4,i5;if(iZ.$==1){i1=iZ.$0;i2=e.Transform(iY,i1);i0=$.New(f,{$:1,$0:i2});}else{if(iZ.$==2){i3=iZ.$0;i4=e.Transform(iY,i3);i0=$.New(f,{$:2,$0:i4});}else{i5=iZ.$0;i0=$.New(f,{$:0,$0:iY(i5)});}}return i0;},Tree:$.Class({GetEnumerator:function(){var i6;i6=this.get_Sequence();return o.Get(i6);},GetEnumerator1:function(){var i7;i7=this.get_Sequence();return o.Get(i7);},Map:function(i8){var i9,i_,i$,ja;if(this.$==1){i_=this.$0;i9=$.New(l,{$:1,$0:i8(i_)});}else{if(this.$==2){i$=this.$1;ja=this.$0;i9=$.New(l,{$:2,$0:ja.Map(i8),$1:i$.Map(i8)});}else{i9=$.New(l,{$:0});}}return i9;},get_Sequence:function(){var jb,jc,jd,je;if(this.$==1){jc=this.$0;jb=[jc];}else{if(this.$==2){jd=this.$1;je=this.$0;jb=n.append(je.get_Sequence(),jd.get_Sequence());}else{jb=n.empty();}}return jb;}})},Validator:$.Class({Is:function(jf,jg,jh){return this.Validate(jf,jg,jh);},IsEmail:function(ji){var jk=this;return function(jj){return jk.IsRegexMatch("^[A-Za-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[A-Za-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?\\.)+[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?$",ji,jj);};},IsEqual:function(jl,jm,jn){var jo;jo=function(jp){return p.Equals(jp,jl);};return this.Validate(jo,jm,jn);},IsFloat:function(jq){var js=this;return function(jr){return js.IsRegexMatch("^\\s*(\\+|-)?((\\d+(\\.\\d+)?)|(\\.\\d+))\\s*$",jq,jr);};},IsGreaterThan:function(jt,ju,jv){var jw;jw=function(jx){return p.Compare(jx,jt)===1;};return this.Validate(jw,ju,jv);},IsInt:function(jy){var jA=this;return function(jz){return jA.IsRegexMatch("^-?\\d+$",jy,jz);};},IsLessThan:function(jB,jC,jD){var jE;jE=function(jF){return p.Compare(jF,jB)===-1;};return this.Validate(jE,jC,jD);},IsNotEmpty:function(jG,jH){var jI;jI=function(jJ){return jJ!=="";};return this.Validate(jI,jG,jH);},IsNotEqual:function(jK,jL,jM){var jN;jN=function(jO){return!p.Equals(jO,jK);};return this.Validate(jN,jL,jM);},IsRegexMatch:function(jP,jQ,jR){var jS,jV=this;jS=function(jT){var jU;jU=jV.VP;return jU.Matches(jP,jT);};return jV.Validate(jS,jQ,jR);},IsTrue:function(jW,jX){var jY;jY=function(jZ){return jZ;};return this.Validate(jY,jW,jX);},Validate:function(j0,j1,j2){var j3;j3=j2.MapResult(function(j4){var j5,j6,j7;if(j4.$==1){j6=j4.$0;j5=$.New(g,{$:1,$0:j6});}else{j7=j4.$0;j5=j0(j7)?$.New(g,{$:0,$0:j7}):$.New(g,{$:1,$0:i.ofArray([j1])});}return j5;});return j3;}},{New:function(j8){var j9;j9=$.New(this,{});j9.VP=j8;return j9;}})}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.Formlet);b=$.Safe(a.Base);c=$.Safe(b.Formlet);d=$.Safe(b.Form);e=$.Safe(b.Tree);f=$.Safe(e.Edit);g=$.Safe(b.Result);h=$.Safe($$.IntelliFactory.WebSharper);i=$.Safe(h.List);j=$.Safe(i.T);k=$.Safe(b.LayoutUtils);l=$.Safe(e.Tree);m=$.Safe(h.Util);n=$.Safe(h.Seq);o=$.Safe(h.Enumerator);return p=$.Safe(h.Unchecked);});$.OnLoad(function(){return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1;$.Define($$,{IntelliFactory:{WebSharper:{Formlet:{Body:$.Class({},{New:function(_2,_3){return $.New(c,{Element:_2,Label:_3});}}),Controls:{Button:function(_4){var _5;_5=function(){return e.Button(f.ofArray([e.Text(_4)]));};return g.ElementButton(_5);},Checkbox:function(_7){return g.CheckboxControl(false,_7);},CheckboxControl:function(_8,_9){var _;_=function(){var bb,bc,bd,be,bf,bg,bh,bn,bo,bp,bq,br,bs,bt;bb=i.New($.New(l,{$:0,$0:_9}));if(_8){be=e.Attr();bd=f.ofArray([be.NewAttr("disabled","disabled")]);}else{bd=$.New(m,{$:0});}bc=bd;bg=e.Attr();bf=n.add(e.Input(f.ofArray([bg.NewAttr("type","checkbox"),e.Attr().Class("inputCheckbox")])),bc);bh=function(bi){return function(){var bk,bl,bm;if(!_8){bl=o(bi.Body).prop("checked");bm=$.New(l,{$:0,$0:bl});bk=bb.Trigger(bm);}else{bk=null;}return bk;};};p.Events().OnClick(bh,bf);bn=bf;if(_9){bp=bn["HtmlProvider@31"];bq=bn.Body;bo=bp.SetAttribute(bq,"defaultChecked","true");}else{br=bn["HtmlProvider@31"];bs=bn.Body;bo=br.RemoveAttribute(bs,"checked");}bt=function(){var bv,bw,bx,by,bz,bA,bB;if(_9){bw=bn["HtmlProvider@31"];bx=bn.Body;bv=bw.SetProperty(bx,"checked",true);}else{by=bn["HtmlProvider@31"];bz=bn.Body;by.RemoveAttribute(bz,"checked");bA=bn["HtmlProvider@31"];bB=bn.Body;bv=bA.SetProperty(bB,"checked",false);}return bb.Trigger($.New(l,{$:0,$0:_9}));};bt(null);return[bn,bt,bb];};return q.MkFormlet(_);},CheckboxGroup:function(bB){return g.CheckboxGroupControl(false,bB);},CheckboxGroupControl:function(bC,bD){var bE,bS,bT,bU,bY;bE=$.Tupled(function(bF){var bG,bH,bI,bJ,bK,bO,bP,bR;bG=bF[0];bH=bF[1];bI=bF[2];bJ=g.CheckboxControl(bC,bI);bK=function(){var bM,bN;bM=f.ofArray([e.Text(bG)]);bN=e.Tags();return bN.NewTag("label",bM);};bO={$:1,$0:bK};bP=function(bQ){return[bQ,bH];};bR=r.WithLabel(bO,bJ);return r.Map(bP,bR);});bS=f.map(bE,bD);bT=r.Sequence(bS);bU=$.Tupled(function(bV){var bW,bX;bW=bV[0];bX=bV[1];return bW?{$:1,$0:bX}:{$:0};});bY=function(bZ){return f.choose(bU,bZ);};return r.Map(bY,bT);},ElementButton:function(b0){var b1;b1=function(){var b3,b4,b5,b6,b9,b_;b3=i.New($.New(l,{$:1,$0:$.New(m,{$:0})}));b4={contents:0};b5=b0(null);b6=function(){return function(){b3.Trigger($.New(l,{$:0,$0:b4.contents}));return s.Increment(b4);};};p.Events().OnClick(b6,b5);b9=b5;b_=function(){b4.contents=0;return b3.Trigger($.New(l,{$:1,$0:$.New(m,{$:0})}));};return[b9,b_,b3];};return q.MkFormlet(b1);},Input:function(ca){return g.InputField(false,"text",t.InputTextClass(),ca);},InputControl:function(cb,cc){var cd;cd=function(){var cf,cg,ch;cf=i.New($.New(l,{$:0,$0:cb}));cg=cc(cf);cg.set_Value(cb);ch=function(){cg.set_Value(cb);return cf.Trigger($.New(l,{$:0,$0:cb}));};return[cg,ch,cf];};return q.MkFormlet(cd);},InputField:function(cj,ck,cl,cm){return g.InputControl(cm,function(cn){var co,cp,cq,cr,cs,ct,cu,cv;if(cj){cq=e.Attr();cp=f.ofArray([cq.NewAttr("readonly","readonly")]);}else{cp=$.New(m,{$:0});}co=cp;cs=e.Attr();cr=f.ofArray([cs.NewAttr("type",ck),e.Attr().Class(cl)]);ct=f.append(cr,co);cu=e.Input(ct);cv=function(){return!cj?cn.Trigger($.New(l,{$:0,$0:cu.get_Value()})):null;};g.OnTextChange(cv,cu);return cu;});},OnTextChange:function(cx,cy){var cz,cA,cD,cF;cz={contents:cy.get_Value()};cA=function(){var cC;if(cy.get_Value()!==cz.contents){cz.contents=cy.get_Value();cC=cx(null);}else{cC=null;}return cC;};cD=function(){return cA(null);};p.Events().OnChange(cD,cy);cF=function(){return function(){return cA(null);};};p.Events().OnKeyUp(cF,cy);cy.Body.oninput=cA;return;},Password:function(cI){return g.InputField(false,"password","inputPassword",cI);},RadioButtonGroup:function(cJ,cK){return g.RadioButtonGroupControl(false,cJ,cK);},RadioButtonGroupControl:function(cL,cM,cN){var cO;cO=function(){var cQ,cR,cS,cT,cU,cY,cZ,c5,c6,c8,c9,dg,dh,du,dB,dO,dP,dQ,dR;cQ="id"+u.round(u.random()*100000000);if(cM.$==0){cS={$:0};}else{cT=cM.$0;cU=function(cV){return $.Tupled(function(cW){var cX;cW[0];cX=cW[1];return[cV,cX];});};cY=f.mapi(cU,cN);cZ=$.Tupled(function(c0){var c1,c2,c3,c4;c1=c0[0];c2=c0[1];if(cM.$==0){c3={$:0};}else{c4=cM.$0;c3=c4===c1?{$:1,$0:$.New(l,{$:0,$0:c2})}:{$:0};}return c3;});cS=v.tryPick(cZ,cY);}cR=cS;c5=i.New($.New(l,{$:1,$0:$.New(m,{$:0})}));c6=function(c7){return i.New(c7);};c8=w.Maybe(c5,c6,cR);c9=$.Tupled(function(c_){var c$,da,db,dc,dd,de,df;c$=c_[0];da=c_[1];dc=e.Attr();dd=e.Attr();if(cL){df=e.Attr();de=f.ofArray([df.NewAttr("disabled","disabled")]);}else{de=$.New(m,{$:0});}db=n.add(e.Input(f.ofArray([e.Attr().Class("inputRadio"),dc.NewAttr("type","radio"),dd.NewAttr("name",cQ)])),de);return[db,c$,da];});dg=f.map(c9,cN);dh=function(di,dj,dk){var dl,dm,dn,_do,dp,dq,dr,ds,dt;if(cM.$==0){dm=di["HtmlProvider@31"];dn=di.Body;dm.RemoveAttribute(dn,"checked");dl=c8.Trigger($.New(l,{$:1,$0:$.New(m,{$:0})}));}else{_do=cM.$0;if(_do===dk){dq=di["HtmlProvider@31"];dr=di.Body;dq.SetProperty(dr,"checked",true);dp=c8.Trigger($.New(l,{$:0,$0:dj}));}else{ds=di["HtmlProvider@31"];dt=di.Body;dp=ds.SetProperty(dt,"checked",false);}dl=dp;}return dl;};du=function(){var dw;dw=function(dx){return $.Tupled(function(dy){var dz,dA;dz=dy[0];dy[1];dA=dy[2];return dh(dz,dA,dx);});};return v.iteri(dw,dg);};dB=function(dC){return $.Tupled(function(dD){var dE,dF,dG,dH,dK;dE=dD[0];dF=dD[1];dG=dD[2];dh(dE,dG,dC);dH=function(){return function(){return!cL?c8.Trigger($.New(l,{$:0,$0:dG})):null;};};p.Events().OnClick(dH,dE);dK={$:1,$0:function(){var dM,dN;dM=f.ofArray([e.Text(dF)]);dN=e.Tags();return dN.NewTag("label",dM);}};return $.New(c,{Element:dE,Label:dK});});};dO=f.mapi(dB,dg);dP=x.FromSequence(dO);dQ=$.New(y,{$:0,$0:dP});dR=q.RX().Return(dQ);return $.New(z,{Body:dR,Dispose1:function(){},Notify:function(){return du(null);},State:c8});};return r.New(cO);},ReadOnlyCheckbox:function(dU){return g.CheckboxControl(true,dU);},ReadOnlyInput:function(dV){return g.InputField(true,"text",t.InputTextClass(),dV);},ReadOnlyRadioButtonGroup:function(dW,dX){return g.RadioButtonGroupControl(true,dW,dX);},ReadOnlySelect:function(dY,dZ){return g.SelectControl(true,dY,dZ);},ReadOnlyTextArea:function(d0){return g.TextAreaControl(true,d0);},Select:function(d1,d2){return g.SelectControl(false,d1,d2);},SelectControl:function(d3,d4,d5){var d6;d6=function(){var d8,d_,d$,ea,eb,ej,ek,el,em,en,eo,ep,eq,ev;d8=$.Tupled(function(d9){return d9[1];});d_=f.map(d8,d5);d$=A.ofSeq(d_);ea=(d4>=0?d4<d5.get_Length():false)?d4:0;eb=function(ec){return $.Tupled(function(ed){var ee,ef,eg,eh,ei;ee=ed[0];ed[1];ef=e.Tags();eh=e.Attr();ei=$$.String(ec);eg=f.ofArray([e.Text(ee),eh.NewAttr("value",ei)]);return ef.NewTag("option",eg);});};ej=f.mapi(eb,d5);ek=e.Select(ej);if(d3){en=e.Attr();em=n.add(ek,f.ofArray([en.NewAttr("disabled","disabled")]));}else{em=ek;}el=em;eo=$.New(l,{$:0,$0:B.GetArray(d$,ea)});ep=i.New(eo);eq=function(){var es,et,eu;es=$$.String(ea);et=el["HtmlProvider@31"];eu=el.Body;et.SetProperty(eu,"value",es);return ep.Trigger(eo);};eq(null);ev=function(){var ex,ey,ez,eA;if(!d3){ey=el.get_Value();ez=B.GetArray(d$,ey<<0);eA=$.New(l,{$:0,$0:ez});ex=ep.Trigger(eA);}else{ex=null;}return ex;};p.Events().OnChange(ev,el);eq(null);return[el,eq,ep];};return q.MkFormlet(d6);},TextArea:function(eB){return g.TextAreaControl(false,eB);},TextAreaControl:function(eC,eD){return g.InputControl(eD,function(eE){var eF,eG,eH,eI,eJ;if(eC){eH=e.Attr();eG=f.ofArray([eH.NewAttr("readonly","readonly")]);}else{eG=$.New(m,{$:0});}eF=eG;eI=e.TextArea(eF);eJ=function(){return!eC?eE.Trigger($.New(l,{$:0,$0:eI.get_Value()})):null;};g.OnTextChange(eJ,eI);return eI;});}},CssConstants:{InputTextClass:$.Field(function(){return"inputText";})},Data:{$:function(eL,eM){var eN,eO;eN=q.BaseFormlet();eO=eN.Apply(eL,eM);return q.OfIFormlet(eO);},BaseFormlet:function(){return C.New(q.UtilsProvider());},DefaultLayout:$.Field(function(){return q.Layout().get_Vertical();}),Formlet:$.Class({Build:function(){return this.BuildInternal.call(null,null);},MapResult:function(eP){var eQ,eT=this;eQ=$.New(D,{BuildInternal:function(){var eS,eU,eV,eW;eS=eT.BuildInternal.call(null,null);eU=eT.Utils.Reactive;eV=eS.State;eW=function(eX){return eP(eX);};return $.New(z,{Body:eS.Body,Dispose1:eS.Dispose1,Notify:eS.Notify,State:eU.Select(eV,eW)});},LayoutInternal:eT.LayoutInternal,ElementInternal:{$:0},FormletBase:eT.FormletBase,Utils:eT.Utils});return eQ;},Render:function(){return this.Run(function(){}).Render();},Run:function(eZ){var e0,e1,e2,e3,e4,e7,e8,e9,e_,e$,fa,fb;e0=this.ElementInternal;if(e0.$==0){e2=this.FormletBase.ApplyLayout(this);e3=e2.Build();e4=E.subscribeTo(e3.State,function(e5){var e6;e6=l.Map(eZ,e5);return;});e7=e2.get_Layout().Apply.call(null,e3.Body);if(e7.$==0){e_=q.DefaultLayout().Apply.call(null,e3.Body).$0;e$=e_[0];e9=e$.Element;}else{fa=e7.$0[0];e9=fa.Element;}e8=e9;this.ElementInternal={$:1,$0:e8};e1=e8;}else{fb=e0.$0;e1=fb;}return e1;},get_Body:function(){return this.Run(function(){}).get_Body();},get_Layout:function(){return this.LayoutInternal;}}),Layout:$.Field(function(){return F.New(G.New({Reactive:H.Default()}));}),MkFormlet:function(fd){var fe,ff,fq;fe=q.BaseFormlet();ff=function(){var fh,fi,fj,fk,fl,fn,fo;fh=fd(null);fi=fh[2];fj=fh[1];fk=fh[0];fl=function(){return fj(null);};fn=q.NewBody(fk,{$:0});fo=x.Set(fn);return $.New(z,{Body:q.RX().Return(fo),Dispose1:function(){return null;},Notify:fl,State:fi});};fq=fe.New(ff);return q.OfIFormlet(fq);},NewBody:function(fr,fs){return c.New(fr,fs);},OfIFormlet:function(ft){var fu;fu=$.New(D,{BuildInternal:function(){return ft.Build();},LayoutInternal:ft.get_Layout(),ElementInternal:{$:0},FormletBase:q.BaseFormlet(),Utils:q.UtilsProvider()});return q.PropagateRenderFrom(ft,fu);},PropagateRenderFrom:function(fw,fx){fw.hasOwnProperty("Render")?void(fx.Render=fw.Render):null;return fx;},RX:$.Field(function(){return H.Default();}),UtilsProvider:function(){return{Reactive:q.RX(),DefaultLayout:q.DefaultLayout()};},Validator:$.Field(function(){return I.New(J.New());}),ValidatorProvidor:$.Class({Matches:function(fy,fz){return fz.match(new K(fy));}},{New:function(){return $.New(this,{});}})},ElementStore:$.Class({Init:function(){this.store=M.New2();return;},RegisterElement:function(fA,fB){var fC;fC=this.store.ContainsKey(fA);return!fC?this.store.set_Item(fA,fB):null;},Remove:function(fD){var fE,fF;if(this.store.ContainsKey(fD)){(this.store.get_Item(fD))(null);fF=this.store.Remove(fD);fE=void fF;}else{fE=null;}return fE;}},{New:function(){return $.New(this,{});},NewElementStore:function(){var fG;fG=N.New();fG.Init();return fG;}}),Enhance:{Cancel:function(fH,fI){return r.Replace(fH,function(fJ){return fI(fJ)?r.Empty():r.Return(fJ);});},CustomMany:function(fK,fL){var fM,fO,fP,fR,fT,fU,fV,fW,fX,fY,f6,f7,f8,f9,f$,ga;fM=g.ElementButton(function(){return n.add(e.Div(f.ofArray([e.Attr().Class(fK.AddIconClass)])),f.ofArray([e.Div($.New(m,{$:0}))]));});fO=r.InitWith(1,fM);fP=function(){};fR=g.ElementButton(function(){return n.add(e.Div(f.ofArray([e.Attr().Class(fK.RemoveIconClass)])),f.ofArray([e.Div($.New(m,{$:0}))]));});fT=r.Map(fP,fR);fU=r.WithCancelation(fL,fT);fV=q.Layout().get_Horizontal();fW=r.WithLayout(fV,fU);fX=O.Deletable(fW);fY=function(){var f0,f2,f4,f5;f0=function(f1){return f.ofSeq(f1);};f2=O.Many_(fO,function(){return fX;});f4=r.Map(f0,f2);f5=r.WithLayoutOrDefault(f4);return r.ApplyLayout(f5);};f6=i.New($.New(l,{$:0,$0:null}));f7=q.BaseFormlet().FromState(f6);f8=q.OfIFormlet(f7);f9=function(){return f6.Trigger($.New(l,{$:0,$0:null}));};f$=r.Do();ga=f$.Delay(function(){return f$.Bind(f8,function(){return f$.ReturnFrom(fY(null));});});return r.WithNotification(f9,ga);},Deletable:function(gd){return O.Replace(gd,function(ge){var gf,gg;if(ge.$==1){gg=ge.$0;gf=r.Return({$:1,$0:gg});}else{gf=r.ReturnEmpty({$:0});}return gf;});},FormButtonConfiguration:$.Class({},{get_Default:function(){return $.New(P,{Label:{$:0},Style:{$:0},Class:{$:0}});}}),FormContainerConfiguration:$.Class({},{get_Default:function(){var gh;gh={$:0};return $.New(Q,{Header:{$:0},Padding:R.get_Default(),Description:gh,BackgroundColor:{$:0},BorderColor:{$:0},CssClass:{$:0},Style:{$:0}});}}),InputButton:function(gi,gj){var gk;gk=function(){var gm,gn,go,gq,gr,gs,gt,gw,gx,gy,gz,gA,gB,gC,gD,gE,gF,gG,gH,gI,gJ,gK,gL;gm=i.New($.New(l,{$:1,$0:$.New(m,{$:0})}));gn={contents:0};go=w.Maybe("Submit",function(gp){return gp;},gi.Label);gr=e.Attr();gs=e.Attr();gq=n.add(e.Input(f.ofArray([gr.NewAttr("type","button")])),f.ofArray([e.Attr().Class("submitButton"),gs.NewAttr("value",go)]));gt=function(){return function(){s.Increment(gn);return gm.Trigger($.New(l,{$:0,$0:gn.contents}));};};p.Events().OnClick(gt,gq);gw=gq;if(!gj){gz=gw["HtmlProvider@31"];gA=gw.Body;gy=gz.AddClass(gA,"disabledButton");}else{gy=null;}gB=gi.Style;if(gB.$==1){gD=gB.$0;gE=gw["HtmlProvider@31"];gF=gw.Body;gC=gE.SetStyle(gF,gD);}else{gC=null;}gG=gi.Class;if(gG.$==1){gI=gG.$0;gJ=gw["HtmlProvider@31"];gK=gw.Body;gH=gJ.AddClass(gK,gI);}else{gH=null;}gx=gw;gL=function(){gn.contents=0;return gm.Trigger($.New(l,{$:1,$0:$.New(m,{$:0})}));};gm.Trigger($.New(l,{$:1,$0:$.New(m,{$:0})}));return[gx,gL,gm];};return q.MkFormlet(gk);},Many:function(gN){return O.CustomMany(S.get_Default(),gN);},ManyConfiguration:$.Class({},{get_Default:function(){return $.New(S,{AddIconClass:"addIcon",RemoveIconClass:"removeIcon"});}}),Many_:function(gO,gP){var gQ,gS,gU,gW,gX,gY;gQ=function(gR){return gP(gR);};gS=function(gT){return gT;};gU=function(gV){return v.choose(gS,gV);};gW=r.Map(gQ,gO);gX=r.SelectMany(gW);gY=r.FlipBody(gX);return r.Map(gU,gY);},Padding:$.Class({},{get_Default:function(){return $.New(R,{Left:{$:0},Right:{$:0},Top:{$:0},Bottom:{$:0}});}}),Replace:function(gZ,g0){var g1,g7;g1=function(g2){var g3,g4,g5,g6;if(g2.$==1){g4=g2.$0;g5=r.FailWith(g4);g3=$.New(l,{$:0,$0:g5});}else{g6=g2.$0;g3=$.New(l,{$:0,$0:g0(g6)});}return g3;};g7=r.MapResult(g1,gZ);return r.Switch(g7);},ValidationFrameConfiguration:$.Class({},{get_Default:function(){return $.New(T,{ValidClass:{$:1,$0:"successFormlet"},ValidStyle:{$:0},ErrorClass:{$:1,$0:"errorFormlet"},ErrorStyle:{$:0}});}}),ValidationIconConfiguration:$.Class({},{get_Default:function(){return $.New(U,{ValidIconClass:"validIcon",ErrorIconClass:"errorIcon"});}}),WithCssClass:function(g8,g9){var g_;g_=function(g$){var ha,hb;ha=g$["HtmlProvider@31"];hb=g$.Body;ha.AddClass(hb,g8);return g$;};return r.MapElement(g_,g9);},WithCustomFormContainer:function(hc,hd){var he,hf;he=r.ApplyLayout(hd);hf=function(hg){var hh,hi,hj,ho,hp,hq,hr,hy,hz,hA,hF,hG,hH,hJ,hK,hM,hN,hP,hQ,hS,hT,hV,hW,h4,h5,h6,h7,h8,h9,h_,h$,ia,ib;hh=hc.Description;hi=$.New(m,{$:0});hj=function(hk){var hl,hm,hn;if(hk.$==1){hm=hk.$0;hl=f.ofArray([hm(null)]);}else{hn=hk.$0;hl=f.ofArray([e.P(f.ofArray([e.Tags().text(hn)]))]);}return hl;};ho=w.Maybe(hi,hj,hh);hp=hc.Header;hq=w.InTable(f.ofArray([f.ofArray([n.add(e.Div(f.ofArray([e.Attr().Class("headerPanel")])),ho)]),f.ofArray([hg])]));hr=function(hs){var ht,hu,hv,hw,hx;if(hs.$==1){hv=hs.$0;hu=hv(null);}else{hw=hs.$0;hu=e.H1(f.ofArray([e.Tags().text(hw)]));}ht=hu;hx=n.add(e.Div(f.ofArray([e.Attr().Class("headerPanel")])),$.New(m,{$:1,$0:ht,$1:ho}));return w.InTable(f.ofArray([f.ofArray([hx]),f.ofArray([hg])]));};hy=w.Maybe(hq,hr,hp);hz=n.add(e.TD(f.ofArray([e.Attr().Class("formlet")])),f.ofArray([hy]));hA=function(hB){var hC,hD,hE;hC="border-color: "+hB;hD=hz["HtmlProvider@31"];hE=hz.Body;return hD.SetStyle(hE,hC);};hF=hc.BorderColor;w.Maybe(null,hA,hF);hH=function(hI){return hI;};hJ=hc.BackgroundColor;hK=function(hL){return $$.String(hL)+"px";};hM=hc.Padding.Left;hN=function(hO){return $$.String(hO)+"px";};hP=hc.Padding.Right;hQ=function(hR){return $$.String(hR)+"px";};hS=hc.Padding.Top;hT=function(hU){return $$.String(hU)+"px";};hV=hc.Padding.Bottom;hG=f.ofArray([["background-color",w.MapOption(hH,hJ)],["padding-left",w.MapOption(hK,hM)],["padding-right",w.MapOption(hN,hP)],["padding-top",w.MapOption(hQ,hS)],["padding-bottom",w.MapOption(hT,hV)]]);hW=$.Tupled(function(hX){var hY,hZ,h0,h1,h2,h3;hY=hX[0];hZ=hX[1];if(hZ.$==0){h0=null;}else{h1=hZ.$0;h2=hz["HtmlProvider@31"];h3=hz.Body;h0=h2.SetCss(h3,hY,h1);}return h0;});v.iter(hW,hG);h4=hc.Style;if(h4.$==0){h5=null;}else{h6=h4.$0;h7=hz["HtmlProvider@31"];h8=hz.Body;h5=h7.SetStyle(h8,h6);}h9=hc.CssClass;if(h9.$==0){h_=null;}else{h$=h9.$0;ia=hz["HtmlProvider@31"];ib=hz.Body;h_=ia.AddClass(ib,h$);}return e.Table(f.ofArray([e.TBody(f.ofArray([e.TR(f.ofArray([hz]))]))]));};return r.MapElement(hf,he);},WithCustomResetButton:function(ic,id){var ie,_if,ig,ih;ie=ic.Label;if(ie.$==0){ig=$.New(P,{Label:{$:1,$0:"Reset"},Style:ic.Style,Class:ic.Class});}else{ie.$0;ig=ic;}_if=ig;ih=O.InputButton(_if,true);return O.WithResetFormlet(id,ih);},WithCustomSubmitAndResetButtons:function(ii,ij,ik){var il;il=function(im){return function(_in){var io,ip,iq,ir,it,iu,iv,ix,iy,iz,iC,iF;if(_in.$==1){iq=_in.$0;ir=function(){return $.New(l,{$:1,$0:iq});};it=O.InputButton(ii,false);ip=r.MapResult(ir,it);}else{iu=_in.$0;iv=function(){return iu;};ix=O.InputButton(ii,true);ip=r.Map(iv,ix);}io=ip;iy=r.Do();iz=iy.Delay(function(){return iy.Bind(r.LiftResult(O.InputButton(ij,true)),function(iB){iB.$==0?im(null):null;return iy.Return(null);});});iC=q.$(q.$(r.Return(function(iD){return function(){return iD;};}),io),iz);iF=q.Layout().get_Horizontal();return r.WithLayout(iF,iC);};};return O.WithSubmitAndReset(ik,il);},WithCustomSubmitButton:function(iG,iH){var iI,iJ,iK;iI=iG.Label;if(iI.$==0){iK=$.New(P,{Label:{$:1,$0:"Submit"},Style:iG.Style,Class:iG.Class});}else{iI.$0;iK=iG;}iJ=iK;return O.WithSubmitFormlet(iH,function(iL){var iM,iO,iP;iM=function(){};iO=iL.$==0?true:false;iP=O.InputButton(iJ,iO);return r.Map(iM,iP);});},WithCustomValidationFrame:function(iQ,iR){var iS;iS=function(iT){return function(iU){var iV,iW;iV=e.Div(f.ofArray([iU.Element]));iW=function(iX){var iY;iY=E.subscribeTo(iT,function(iZ){var i0,i1,i2,i3,i4,i5,i6,i7,i8,i9,i_,i$,ja,jb,jc,jd,je,jf,jg,jh,ji,jj,jk,jl,jm,jn,jo,jp,jq,jr,js,jt,ju,jv,jw,jx;if(iZ.$==1){i1=iZ.$0;i2=iQ.ValidClass;if(i2.$==1){i4=i2.$0;i5=iX["HtmlProvider@31"];i6=iX.Body;i3=i5.RemoveClass(i6,i4);}else{i3=null;}i7=iQ.ErrorClass;if(i7.$==1){i9=i7.$0;i_=iX["HtmlProvider@31"];i$=iX.Body;i8=i_.AddClass(i$,i9);}else{i8=null;}ja=iQ.ErrorStyle;if(ja.$==1){jc=ja.$0;jd=iX["HtmlProvider@31"];je=iX.Body;jb=jd.SetStyle(je,jc);}else{jf=iX["HtmlProvider@31"];jg=iX.Body;jb=jf.SetStyle(jg,"");}i0=jb;}else{jh=iQ.ErrorClass;if(jh.$==1){jj=jh.$0;jk=iX["HtmlProvider@31"];jl=iX.Body;ji=jk.RemoveClass(jl,jj);}else{ji=null;}jm=iQ.ValidClass;if(jm.$==1){jo=jm.$0;jp=iX["HtmlProvider@31"];jq=iX.Body;jn=jp.AddClass(jq,jo);}else{jn=null;}jr=iQ.ValidStyle;if(jr.$==1){jt=jr.$0;ju=iX["HtmlProvider@31"];jv=iX.Body;js=ju.SetStyle(jv,jt);}else{jw=iX["HtmlProvider@31"];jx=iX.Body;js=jw.SetStyle(jx,"");}i0=js;}return i0;});return;};n.OnAfterRender(iW,iV);return iV;};};return O.WrapFormlet(iS,iR);},WithCustomValidationIcon:function(jy,jz){var jA,jB,jN,jO,jQ,jU,jV;jA=r.WithLayoutOrDefault(jz);jB=function(jC){var jD;jD=function(){var jF,jG,jH,jK,jL,jM;if(jC.$==1){jG=jC.$0;jH=function(jI){return function(jJ){return jI+" "+jJ;};};jK=v.fold(jH,"",jG);jL=e.Attr();jF=n.add(e.Div(f.ofArray([e.Attr().Class(jy.ErrorIconClass),jL.NewAttr("title",jK)])),f.ofArray([e.Div($.New(m,{$:0}))]));}else{jM=e.Attr();jF=n.add(e.Div(f.ofArray([e.Attr().Class(jy.ValidIconClass),jM.NewAttr("title","")])),f.ofArray([e.Div($.New(m,{$:0}))]));}return jF;};return r.OfElement(jD);};jN=r.Do();jO=function(jP){return l.Join(jP);};jQ=jN.Delay(function(){return jN.Bind(r.LiftResult(jA),function(jS){return jN.Bind(jB(jS),function(){return jN.Return(jS);});});});jU=r.MapResult(jO,jQ);jV=q.Layout().get_Horizontal();return r.WithLayout(jV,jU);},WithErrorFormlet:function(jW,jX){var jY,jZ,j1;jY=r.Do();jZ=function(j0){return l.Join(j0);};j1=jY.Delay(function(){return jY.Bind(r.LiftResult(jX),function(j3){var j4,j5,j6;if(j3.$==1){j5=j3.$0;j6=r.Do();j4=j6.Delay(function(){return j6.Bind(jW(j5),function(){return j6.Return(j3);});});}else{j3.$0;j4=r.Return(j3);}return jY.ReturnFrom(j4);});});return r.MapResult(jZ,j1);},WithErrorSummary:function(j9,j_){var j$,kj,kk,km;j$=function(ka){return r.OfElement(function(){var kc,kd,ke,kf,kh,ki;kd=f.ofArray([e.Text(j9)]);ke=e.Tags();kf=function(kg){return e.LI(f.ofArray([e.Text(kg)]));};kh=f.map(kf,ka);kc=f.ofArray([ke.NewTag("legend",kd),e.UL(kh)]);ki=e.Tags();return ki.NewTag("fieldset",kc);});};kj=r.Do();kk=function(kl){return l.Join(kl);};km=kj.Delay(function(){return kj.Bind(r.LiftResult(j_),function(ko){var kp,kq,kr,kt;if(ko.$==1){kq=ko.$0;kr=function(){return ko;};kt=j$(kq);kp=r.Map(kr,kt);}else{ko.$0;kp=r.Return(ko);}return kj.ReturnFrom(kp);});});return r.MapResult(kk,km);},WithFormContainer:function(ku){return O.WithCustomFormContainer(Q.get_Default(),ku);},WithJsonPost:function(kv,kw){var kx,ky,kz,kA,kB,kC,kD,kE,kF,kG,kH,kI,kJ,kK,kL,kM,kN,kO,kP,kQ,kR,kS,kT,kU,kV,kW,kX,k4,k5,k8;kx=kv.PostUrl;if(kx.$==0){kz=$.New(m,{$:0});}else{kA=kx.$0;kB=e.Attr();kz=f.ofArray([kB.NewAttr("action",kA)]);}ky=kz;kC=kv.EncodingType;if(kC.$==0){kE=$.New(m,{$:0});}else{kF=kC.$0;kG=e.Attr();kE=f.ofArray([kG.NewAttr("enctype",kF)]);}kD=kE;kH=e.Tags();kJ=e.Attr();kK=e.Attr();kL=kv.ParameterName;kI=f.ofArray([kJ.NewAttr("type","hidden"),kK.NewAttr("name",kL)]);kM=kH.NewTag("input",kI);kN=e.Tags();kP=e.Attr();kQ=e.Attr();kO=f.ofArray([kP.NewAttr("type","submit"),kQ.NewAttr("value","Submit")]);kR=kN.NewTag("input",kO);kT=e.Attr();kU=e.Attr();kS=$.New(m,{$:1,$0:kT.NewAttr("method","POST"),$1:$.New(m,{$:1,$0:kU.NewAttr("style","display:none"),$1:ky})});kV=f.append(kS,kD);kW=n.add(e.Form(kV),f.ofArray([kM,kR]));kX=function(kY){var kZ,k0,k1,k2,k3;kZ=kv.EncodingType;if(kZ.$==0){k0=null;}else{k1=kZ.$0;if(k1==="multipart/form-data"){k3=o(kY.Body).attr("encoding","multipart/form-data");k2=void k3;}else{k2=null;}k0=k2;}return k0;};n.OnAfterRender(kX,kW);k4=kW;k5=function(k6){var k7;k7=V.stringify(k6);o(kM.Body).val(k7);return o(kR.Body).click();};k8=r.Map(k5,kw);return e.Div(f.ofArray([k4,k8]));},WithLabel:function(k9,k_){return r.WithLabel({$:1,$0:k9},k_);},WithLabelAbove:function(k$){var la;la=function(lb){var lc,ld,le,lf,lg,lh;lc=lb.Label;if(lc.$==0){le=e.Span($.New(m,{$:0}));}else{lf=lc.$0;le=lf(null);}ld=le;lg=e.Table(f.ofArray([e.TBody(f.ofArray([e.TR(f.ofArray([e.TD(f.ofArray([ld]))])),e.TR(f.ofArray([e.TD(f.ofArray([lb.Element]))]))]))]));lh={$:0};return $.New(c,{Element:lg,Label:lh});};return r.MapBody(la,k$);},WithLabelAndInfo:function(li,lj,lk){var ll;ll=function(){var ln,lo,lp;ln=f.ofArray([e.Text(li)]);lo=e.Tags();lp=e.Attr();return w.InTable(f.ofArray([f.ofArray([lo.NewTag("label",ln),e.Span(f.ofArray([lp.NewAttr("title",lj),e.Attr().Class("infoIcon")]))])]));};return O.WithLabel(ll,lk);},WithLabelConfiguration:function(lq,lr){var ls,lt;ls=r.ApplyLayout(lr);lt=q.Layout().LabelLayout(lq);return r.WithLayout(lt,ls);},WithLabelLeft:function(lu){var lv;lv=function(lw){var lx,ly,lz,lA,lB,lC;lx=lw.Label;if(lx.$==0){lz=e.Span($.New(m,{$:0}));}else{lA=lx.$0;lz=lA(null);}ly=lz;lB=e.Table(f.ofArray([e.TBody(f.ofArray([e.TR(f.ofArray([e.TD(f.ofArray([lw.Element])),e.TD(f.ofArray([ly]))]))]))]));lC={$:0};return $.New(c,{Element:lB,Label:lC});};return r.MapBody(lv,lu);},WithLegend:function(lD,lE){var lF;lF=function(lG){var lH,lI,lJ,lK,lL,lM,lN,lO;lI=f.ofArray([e.Tags().text(lD)]);lJ=e.Tags();lK=lG.Label;if(lK.$==0){lL=lG.Element;}else{lM=lK.$0;lL=w.InTable(f.ofArray([f.ofArray([lM(null),lG.Element])]));}lH=f.ofArray([lJ.NewTag("legend",lI),lL]);lN=e.Tags();lO=lN.NewTag("fieldset",lH);return $.New(c,{Element:lO,Label:{$:0}});};return r.MapBody(lF,lE);},WithResetAction:function(lP,lQ){var lR,lW,lX,lY,lZ;lR=function(){var lT,lU;lT=lQ.Build();lU=function(lV){return lP(null)?lT.Notify.call(null,lV):null;};return $.New(z,{Body:lT.Body,Dispose1:lT.Dispose1,Notify:lU,State:lT.State});};lW=r.New(lR);lX=lQ.get_Layout();lY=r.WithLayout(lX,lW);lZ=q.PropagateRenderFrom(lQ,lY);return q.OfIFormlet(lZ);},WithResetButton:function(l0){return O.WithCustomResetButton(P.get_Default(),l0);},WithResetFormlet:function(l1,l2){var l3,l4,l5,l6,l7,l8,l9,l_,ma,mg,mh;l3=r.WithLayoutOrDefault(l1);l4=r.ApplyLayout(l3);l5=r.InitWithFailure(l4);l6=r.LiftResult(l5);l7=r.WithNotificationChannel(l6);l8=r.LiftResult(l2);l9=r.Do();l_=function(l$){return l.Join(l$);};ma=l9.Delay(function(){return l9.Bind(l7,$.Tupled(function(mc){var md,me;md=mc[0];me=mc[1];return l9.Bind(l8,function(mf){mf.$==0?me(null):null;return l9.Return(md);});}));});mg=r.MapResult(l_,ma);mh=q.PropagateRenderFrom(l7,mg);return q.OfIFormlet(mh);},WithRowConfiguration:function(mi,mj){var mk,ml;mk=r.ApplyLayout(mj);ml=q.Layout().RowLayout(mi);return r.WithLayout(ml,mk);},WithSubmitAndReset:function(mm,mn){var mo,mp,mx;mo=r.Do();mp=mo.Delay(function(){var mr,ms;mr=r.InitWithFailure(mm);ms=r.LiftResult(mr);return mo.Bind(r.WithNotificationChannel(ms),$.Tupled(function(mt){var mu,mv;mu=mt[0];mv=mt[1];return mo.ReturnFrom((mn(function(mw){return mv(mw);}))(mu));}));});mx=q.PropagateRenderFrom(mm,mp);return q.OfIFormlet(mx);},WithSubmitAndResetButtons:function(my){var mz,mA,mB,mC;mz=P.get_Default();mA=$.New(P,{Label:{$:1,$0:"Submit"},Style:mz.Style,Class:mz.Class});mB=P.get_Default();mC=$.New(P,{Label:{$:1,$0:"Reset"},Style:mB.Style,Class:mB.Class});return O.WithCustomSubmitAndResetButtons(mA,mC,my);},WithSubmitButton:function(mD){return O.WithCustomSubmitButton(P.get_Default(),mD);},WithSubmitFormlet:function(mE,mF){var mG,mH,mJ,mO,mP;mG=r.Do();mH=function(mI){return l.Join(mI);};mJ=mG.Delay(function(){var mL;mL=r.InitWithFailure(mE);return mG.Bind(r.LiftResult(mL),function(mM){return mG.Bind(mF(mM),function(){return mG.Return(mM);});});});mO=r.MapResult(mH,mJ);mP=q.PropagateRenderFrom(mE,mO);return q.OfIFormlet(mP);},WithTextLabel:function(mQ,mR){return O.WithLabel(function(){var mT,mU;mT=f.ofArray([e.Text(mQ)]);mU=e.Tags();return mU.NewTag("label",mT);},mR);},WithValidationFrame:function(mV){return O.WithCustomValidationFrame(T.get_Default(),mV);},WithValidationIcon:function(mW){return O.WithCustomValidationIcon(U.get_Default(),mW);},WrapFormlet:function(mX,mY){var mZ;mZ=function(){var m1,m2,m3,m4,m5;m1=r.WithLayoutOrDefault(mY);m2=r.BuildForm(m1);m3=m1.get_Layout().Apply.call(null,m2.Body).$0;m3[1];m4=m3[0];m5=(mX(m2.State))(m4);return[m5,function(){return m2.Notify.call(null,null);},m2.State];};return q.MkFormlet(mZ);}},Formlet:{ApplyLayout:function(m7){var m8,m9;m8=q.BaseFormlet().ApplyLayout(m7);m9=q.PropagateRenderFrom(m7,m8);return q.OfIFormlet(m9);},Bind:function(m_,m$){var na,nb,ne,nf;na=q.BaseFormlet();nb=function(nc){var nd;nd=m$(nc);return nd;};ne=na.Bind(m_,nb);nf=q.PropagateRenderFrom(m_,ne);return q.OfIFormlet(nf);},BindWith:function(ng,nh,ni){var nj,nk,nm,nn;nj=q.BaseFormlet();nk=function(nl){return ni(nl);};nm=nj.BindWith(ng,nh,nk);nn=q.PropagateRenderFrom(nh,nm);return q.OfIFormlet(nn);},BuildForm:function(no){return q.BaseFormlet().BuildForm(no);},BuildFormlet:function(np){return q.MkFormlet(np);},Choose:function(nq){var nr,ns,ny,nz,nA,nP,nQ,nS,nT;nr={contents:0};ns=function(nt){var nu,nw,nx;nu=function(nv){s.Increment(nr);return[nv,nr.contents];};nw=r.Map(nu,nt);nx=r.InitWithFailure(nw);return r.LiftResult(nx);};ny=v.map(ns,nq);nz=r.Sequence(ny);nA=function(nB){var nC,nG,nH,nK,nL,nM;nC=function(nD){var nE,nF;if(nD.$==0){nF=nD.$0;nE={$:1,$0:nF};}else{nE={$:0};}return nE;};nG=f.choose(nC,nB);nH=$.Tupled(function(nI){var nJ;nI[0];nJ=nI[1];return nJ;});nK=f.sortBy(nH,nG);nL=f.rev(nK);nM=$.Tupled(function(nN){var nO;nO=nN[0];nN[1];return{$:1,$0:nO};});return v.tryPick(nM,nL);};nP=r.Map(nA,nz);nQ=function(nR){return nR.$==1;};nS=q.Validator().Is(nQ,"",nP);nT=function(nU){return nU.$0;};return r.Map(nT,nS);},Delay:function(nV){var nW;nW=q.BaseFormlet().Delay(function(){return nV(null);});return q.OfIFormlet(nW);},Deletable:function(nY){var nZ,n0;nZ=q.BaseFormlet().Deletable(nY);n0=q.PropagateRenderFrom(nY,nZ);return q.OfIFormlet(n0);},Do:$.Field(function(){return W.New();}),Empty:function(){var n1;n1=q.BaseFormlet().Empty();return q.OfIFormlet(n1);},FailWith:function(n2){var n3;n3=q.BaseFormlet().FailWith(n2);return q.OfIFormlet(n3);},FlipBody:function(n4){var n5,n6;n5=q.BaseFormlet().FlipBody(n4);n6=q.PropagateRenderFrom(n4,n5);return q.OfIFormlet(n6);},Flowlet:function(n7){var n8,n9,n_,n$;n8=q.BaseFormlet();n9=q.Layout().get_Flowlet();n_=n8.WithLayout(n9,n7);n$=q.PropagateRenderFrom(n7,n_);return q.OfIFormlet(n$);},Horizontal:function(oa){var ob,oc,od,oe;ob=q.BaseFormlet();oc=q.Layout().get_Horizontal();od=ob.WithLayout(oc,oa);oe=q.PropagateRenderFrom(oa,od);return q.OfIFormlet(oe);},InitWith:function(of,og){var oh,oi,oj;oh=q.BaseFormlet();oi=oh.InitWith(of,og);oj=q.PropagateRenderFrom(og,oi);return q.OfIFormlet(oj);},InitWithFailure:function(ok){var ol,om;ol=q.BaseFormlet().InitWithFailure(ok);om=q.PropagateRenderFrom(ok,ol);return q.OfIFormlet(om);},Join:function(on){var oo,oq,or,os,ot;oo=function(op){return op;};oq=r.Map(oo,on);or=q.BaseFormlet();os=or.Join(oq);ot=q.PropagateRenderFrom(on,os);return q.OfIFormlet(ot);},LiftResult:function(ou){var ov,ow;ov=q.BaseFormlet().LiftResult(ou);ow=q.PropagateRenderFrom(ou,ov);return q.OfIFormlet(ow);},Map:function(ox,oy){var oz,oA,oB;oz=q.BaseFormlet();oA=oz.Map(ox,oy);oB=q.PropagateRenderFrom(oy,oA);return q.OfIFormlet(oB);},MapBody:function(oC,oD){var oE,oF,oG;oE=q.BaseFormlet();oF=oE.MapBody(oC,oD);oG=q.PropagateRenderFrom(oD,oF);return q.OfIFormlet(oG);},MapElement:function(oH,oI){var oJ,oK,oM,oN;oJ=q.BaseFormlet();oK=function(oL){return $.New(c,{Element:oH(oL.Element),Label:oL.Label});};oM=oJ.MapBody(oK,oI);oN=q.PropagateRenderFrom(oI,oM);return q.OfIFormlet(oN);},MapResult:function(oO,oP){var oQ,oR,oS;oQ=q.BaseFormlet();oR=oQ.MapResult(oO,oP);oS=q.PropagateRenderFrom(oP,oR);return q.OfIFormlet(oS);},Never:function(){var oT;oT=q.BaseFormlet().Never();return q.OfIFormlet(oT);},New:function(oU){var oV;oV=q.BaseFormlet().New(oU);return q.OfIFormlet(oV);},OfElement:function(oW){var oX;oX=function(){var oZ;oZ=oW(null);return[oZ,function(){},q.RX().Return($.New(l,{$:0,$0:null}))];};return q.MkFormlet(oX);},Render:function(o1){var o2;o2=o1.Run(function(){});return q.PropagateRenderFrom(o1,o2);},Replace:function(o4,o5){var o6,o7,o9,o_;o6=q.BaseFormlet();o7=function(o8){return o5(o8);};o9=o6.Replace(o4,o7);o_=q.PropagateRenderFrom(o4,o9);return q.OfIFormlet(o_);},ReplaceFirstWithFailure:function(o$){var pa,pb;pa=q.BaseFormlet().ReplaceFirstWithFailure(o$);pb=q.PropagateRenderFrom(o$,pa);return q.OfIFormlet(pb);},Return:function(pc){var pd;pd=q.BaseFormlet().Return(pc);return q.OfIFormlet(pd);},ReturnEmpty:function(pe){var pf;pf=q.BaseFormlet().ReturnEmpty(pe);return q.OfIFormlet(pf);},Run:function(pg,ph){return ph.Run(pg);},SelectMany:function(pi){var pj,pl,pm,pn,po;pj=function(pk){return pk;};pl=r.Map(pj,pi);pm=q.BaseFormlet();pn=pm.SelectMany(pl);po=q.PropagateRenderFrom(pi,pn);return q.OfIFormlet(po);},Sequence:function(pp){var pq,ps,pt,pu;pq=function(pr){return pr;};ps=v.map(pq,pp);pt=q.BaseFormlet();pu=pt.Sequence(ps);return q.OfIFormlet(pu);},Switch:function(pv){var pw,py,pz,pA,pB;pw=function(px){return px;};py=r.Map(pw,pv);pz=q.BaseFormlet();pA=pz.Switch(py);pB=q.PropagateRenderFrom(pv,pA);return q.OfIFormlet(pB);},Vertical:function(pC){var pD,pE,pF,pG;pD=q.BaseFormlet();pE=q.Layout().get_Vertical();pF=pD.WithLayout(pE,pC);pG=q.PropagateRenderFrom(pC,pF);return q.OfIFormlet(pG);},WithCancelation:function(pH,pI){var pJ,pK,pL;pJ=q.BaseFormlet();pK=pJ.WithCancelation(pH,pI);pL=q.PropagateRenderFrom(pH,pK);return q.OfIFormlet(pL);},WithLabel:function(pM,pN){var pO,pP,pR,pS;pO=q.BaseFormlet();pP=function(pQ){return $.New(c,{Element:pQ.Element,Label:pM});};pR=pO.MapBody(pP,pN);pS=q.PropagateRenderFrom(pN,pR);return q.OfIFormlet(pS);},WithLayout:function(pT,pU){var pV,pW,pX;pV=q.BaseFormlet();pW=pV.WithLayout(pT,pU);pX=q.PropagateRenderFrom(pU,pW);return q.OfIFormlet(pX);},WithLayoutOrDefault:function(pY){var pZ,p0;pZ=q.BaseFormlet().WithLayoutOrDefault(pY);p0=q.PropagateRenderFrom(pY,pZ);return q.OfIFormlet(p0);},WithNotification:function(p1,p2){var p3,p4,p5;p3=q.BaseFormlet();p4=p3.WithNotification(p1,p2);p5=q.PropagateRenderFrom(p2,p4);return q.OfIFormlet(p5);},WithNotificationChannel:function(p6){var p7,p8;p7=q.BaseFormlet().WithNotificationChannel(p6);p8=q.PropagateRenderFrom(p6,p7);return q.OfIFormlet(p8);}},FormletBuilder:$.Class({Bind:function(p9,p_){var p$,qa,qd,qe;p$=q.BaseFormlet();qa=function(qb){var qc;qc=p_(qb);return qc;};qd=p$.Bind(p9,qa);qe=q.PropagateRenderFrom(p9,qd);return q.OfIFormlet(qe);},Delay:function(qf){var qg;qg=q.BaseFormlet().Delay(function(qh){return qf(qh);});return q.OfIFormlet(qg);},Return:function(qi){var qj;qj=q.BaseFormlet().Return(qi);return q.OfIFormlet(qj);},ReturnFrom:function(qk){return q.OfIFormlet(qk);}},{New:function(){return $.New(this,{});}}),Layout:{FormRowConfiguration:$.Class({},{get_Default:function(){return $.New(Y,{Padding:{$:0},Color:{$:0},Class:{$:0},Style:{$:0},LabelConfiguration:{$:0}});}}),LabelConfiguration:$.Class({},{get_Default:function(){return $.New(Z,{Align:{$:0},VerticalAlign:{$:1},Placement:{$:0}});}}),Padding:$.Class({},{get_Default:function(){return $.New(_0,{Left:{$:0},Right:{$:0},Top:{$:0},Bottom:{$:0}});}})},LayoutProvider:$.Class({ColumnLayout:function(ql){var qm,qn,qx=this;qm=this.LayoutUtils;qn=function(){var qp,qq,qr,qs,qE;qp=e.TR($.New(m,{$:0}));qq=e.Table(f.ofArray([e.TBody(f.ofArray([qp]))]));qr=N.NewElementStore();qs=function(qt){return function(qu){var qv,qw,qy,qz,qA;qv=qu.Element.get_Id();qw=e.TD(f.ofArray([e.Table(f.ofArray([e.TBody(f.ofArray([qx.MakeRow(ql,qt,qu)]))]))]));qy=o(qp.Body);qz={contents:0};qA={contents:false};qy.children().each(function(){var qB,qC;qB=o(this);if(qt===qz.contents){o(qw.Body).insertBefore(qB);qw.Render();qC=void(qA.contents=true);}else{qC=null;}return s.Increment(qz);});!qA.contents?qp.AppendI(qw):null;return qr.RegisterElement(qv,function(){return qw["HtmlProvider@31"].Remove(qw.Body);});};};qE=function(qF){var qG,qH;qG=_1.Get(qF);while(qG.MoveNext()){qH=qG.get_Current();qr.Remove(qH.Element.get_Id());}return;};return{Body:$.New(c,{Element:qq,Label:{$:0}}),SyncRoot:null,Insert:qs,Remove:qE};};return qm.New(qn);},HorizontalAlignElem:function(qI,qJ){var qK,qL,qM;qK=qI.$==0?"left":"right";qL=e.Attr();qM="float:"+qK+";";return n.add(e.Div(f.ofArray([qL.NewAttr("style",qM)])),f.ofArray([qJ]));},LabelLayout:function(qN){var qO,qP;qO=Y.get_Default();qP={$:1,$0:qN};return this.RowLayout($.New(Y,{Padding:qO.Padding,Color:qO.Color,Class:qO.Class,Style:qO.Style,LabelConfiguration:qP}));},MakeLayout:function(qQ){var qR,qS;qR=this.LayoutUtils;qS=function(){var qU,qV,qW,q4;qU=qQ(null);qV=N.NewElementStore();qW=function(qX){return function(qY){var qZ,q0;qZ=qY.Element.get_Id();q0=(qU.Insert.call(null,qX))(qY);return qV.RegisterElement(qZ,function(){var q2,q3;q2=_1.Get(q0);while(q2.MoveNext()){q3=q2.get_Current();q3["HtmlProvider@31"].Remove(q3.Body);}return;});};};q4=function(q5){var q6,q7;q6=_1.Get(q5);while(q6.MoveNext()){q7=q6.get_Current();qV.Remove(q7.Element.get_Id());}return;};return{Body:$.New(c,{Element:qU.Panel,Label:{$:0}}),SyncRoot:null,Insert:qW,Remove:q4};};return qR.New(qS);},MakeRow:function(q8,q9,q_){var q$,ra,rb,rd,re,rg,rh,ri,rk,rl,rm,ro,rp,rq,rs,rt,ru,rZ,r0,r1,r2,r3,r4,r5,r6,r8,r9,r_,r$,sa,sb,sc,sd,se,sf,sg,sj,sk,sl,sm,sp,sq,sr,ss,su,sv,sw,sx,sy,sB,sC,sD,sE;q$=q8.Padding;ra=_0.get_Default();rb=function(rc){return rc;};rd=w.Maybe(ra,rb,q$);re=function(rf){return rf;};rg=rd.Left;rh=w.Maybe(0,re,rg);ri=function(rj){return rj;};rk=rd.Top;rl=w.Maybe(0,ri,rk);rm=function(rn){return rn;};ro=rd.Right;rp=w.Maybe(0,rm,ro);rq=function(rr){return rr;};rs=rd.Bottom;rt=w.Maybe(0,rq,rs);ru=function(rv){return function(rw){return function(rx){return function(ry){return function(rz){return function(rA){return function(rB){var rC,rD,rH,rK,rL,rM,rP,rQ,rR,rS,rT,rU,rV,rW,rX,rY;rC=f.ofArray([["padding-left: ",rv],["padding-top: ",rw],["padding-right: ",rx],["padding-bottom: ",ry]]);rD=$.Tupled(function(rE){var rF,rG;rF=rE[0];rG=rE[1];return rF+$$.String(rG)+"px;";});rH=function(rI){return function(rJ){return rI+rJ;};};rK=f.map(rD,rC);rL=v.reduce(rH,rK);rM=function(rN){var rO;rO=rN.$==1?"middle":rN.$==2?"bottom":"top";return"vertical-align: "+rO+";";};rP=w.Maybe("",rM,rA);rQ=e.Attr();rR=rL+";"+rP;rS=rQ.NewAttr("style",rR);if(rz){rV=e.Attr();rU=f.ofArray([rV.NewAttr("colspan","2")]);}else{rU=$.New(m,{$:0});}rT=rU;rW=$.New(m,{$:1,$0:rS,$1:rT});rX=f.ofArray([rB]);rY=f.append(rW,rX);return e.TD(rY);};};};};};};};rZ=q_.Element;r0=q_.Label;if(r0.$==1){r3=r0.$0;r4=q8.LabelConfiguration;r5=Z.get_Default();r6=function(r7){return r7;};r8=w.Maybe(r5,r6,r4);r9=r8.Align;r_=r3(null);r$=this.HorizontalAlignElem(r9,r_);sa=r8.Placement;if(sa.$==3){sc=w.InTable(f.ofArray([f.ofArray([rZ]),f.ofArray([r$])]));sb=f.ofArray([((((((ru(rh))(rl))(rp))(rt))(true))({$:0}))(sc)]);}else{if(sa.$==0){sb=f.ofArray([((((((ru(rh))(rl))(0))(rt))(false))({$:1,$0:r8.VerticalAlign}))(r$),((((((ru(0))(rl))(rp))(rt))(false))({$:0}))(rZ)]);}else{if(sa.$==1){sb=f.ofArray([((((((ru(rh))(rl))(0))(rt))(false))({$:1,$0:r8.VerticalAlign}))(rZ),((((((ru(0))(rl))(rp))(rt))(false))({$:0}))(r$)]);}else{sd=w.InTable(f.ofArray([f.ofArray([r$]),f.ofArray([rZ])]));sb=f.ofArray([((((((ru(rh))(rl))(rp))(rt))(true))({$:0}))(sd)]);}}}r2=sb;}else{r2=f.ofArray([((((((ru(rh))(rl))(rp))(rt))(true))({$:0}))(rZ)]);}r1=r2;se=q8.Class;sf=$.New(m,{$:0});sg=function(sh){var si;si=sh(q9);return f.ofArray([e.Attr().Class(si)]);};sj=w.Maybe(sf,sg,se);sk=q8.Color;sl=$.New(m,{$:0});sm=function(sn){var so;so=sn(q9);return f.ofArray(["background-color: "+so]);};sp=w.Maybe(sl,sm,sk);sq=q8.Style;sr=$.New(m,{$:0});ss=function(st){return f.ofArray([st(q9)]);};su=w.Maybe(sr,ss,sq);sv=f.append(sp,su);if(sv.$==0){sx=$.New(m,{$:0});}else{sy=v.reduce(function(sz){return function(sA){return sz+";"+sA;};},sv);sB=e.Attr();sx=f.ofArray([sB.NewAttr("style",sy)]);}sw=sx;sC=f.append(sw,r1);sD=f.append(sw,sC);sE=f.append(sj,sD);return e.TR(sE);},RowLayout:function(sF){var sG,sH,sR=this;sG=this.LayoutUtils;sH=function(){var sJ,sK,sL,sM,sY;sJ=e.TBody($.New(m,{$:0}));sK=e.Table(f.ofArray([sJ]));sL=N.NewElementStore();sM=function(sN){return function(sO){var sP,sQ,sS,sT,sU;sP=sO.Element.get_Id();sQ=sR.MakeRow(sF,sN,sO);sS=o(sJ.Body);sT={contents:0};sU={contents:false};sS.children().each(function(){var sV,sW;sV=o(this);if(sN===sT.contents){o(sQ.Body).insertBefore(sV);sQ.Render();sW=void(sU.contents=true);}else{sW=null;}return s.Increment(sT);});!sU.contents?sJ.AppendI(sQ):null;return sL.RegisterElement(sP,function(){return sQ["HtmlProvider@31"].Remove(sQ.Body);});};};sY=function(sZ){var s0,s1;s0=_1.Get(sZ);while(s0.MoveNext()){s1=s0.get_Current();sL.Remove(s1.Element.get_Id());}return;};return{Body:$.New(c,{Element:sK,Label:{$:0}}),SyncRoot:null,Insert:sM,Remove:sY};};return sG.New(sH);},VerticalAlignedTD:function(s2,s3){var s4,s5,s6,s7;s4=s2.$==1?"middle":s2.$==2?"bottom":"top";s5=e.TD(f.ofArray([s3]));s6=s5["HtmlProvider@31"];s7=s5.Body;s6.SetCss(s7,"vertical-align",s4);return s5;},get_Flowlet:function(){var s8;s8=function(){var s_,s$;s_=e.Div($.New(m,{$:0}));s$=function(){return function(tb){var tc,td;tc=tb.Label.$==1?tb.Label.$0.call(null,null):e.Span($.New(m,{$:0}));td=w.InTable(f.ofArray([f.ofArray([tc,e.Div(f.ofArray([tb.Element]))])]));s_["HtmlProvider@31"].Clear(s_.Body);s_.AppendI(td);return f.ofArray([td]);};};return{Insert:s$,Panel:s_};};return this.MakeLayout(s8);},get_Horizontal:function(){return this.ColumnLayout(Y.get_Default());},get_Vertical:function(){return this.RowLayout(Y.get_Default());}},{New:function(te){var tf;tf=$.New(this,{});tf.LayoutUtils=te;return tf;}}),Utils:{InTable:function(tg){var th,tm,tn;th=function(ti){var tj,tl;tj=function(tk){return e.TD(f.ofArray([tk]));};tl=f.map(tj,ti);return e.TR(tl);};tm=f.map(th,tg);tn=e.TBody(tm);return e.Table(f.ofArray([tn]));},MapOption:function(to,tp){var tq,tr;if(tp.$==1){tr=tp.$0;tq={$:1,$0:to(tr)};}else{tq={$:0};}return tq;},Maybe:function(ts,tt,tu){var tv,tw;if(tu.$==0){tv=ts;}else{tw=tu.$0;tv=tt(tw);}return tv;}}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Formlet);c=$.Safe(b.Body);d=$.Safe(a.Html);e=$.Safe(d.Default);f=$.Safe(a.List);g=$.Safe(b.Controls);h=$.Safe($$.IntelliFactory.Reactive);i=$.Safe(h.HotStream);j=$.Safe($$.IntelliFactory.Formlet);k=$.Safe(j.Base);l=$.Safe(k.Result);m=$.Safe(f.T);n=$.Safe(d.Operators);o=$.Safe($$.jQuery);p=$.Safe(d.EventsPervasives);q=$.Safe(b.Data);r=$.Safe(b.Formlet);s=$.Safe(a.Operators);t=$.Safe(b.CssConstants);u=$.Safe($$.Math);v=$.Safe(a.Seq);w=$.Safe(b.Utils);x=$.Safe(k.Tree);y=$.Safe(x.Edit);z=$.Safe(k.Form);A=$.Safe(a.Arrays);B=$.Safe(a.IntrinsicFunctionProxy);C=$.Safe(k.FormletProvider);D=$.Safe(q.Formlet);E=$.Safe(a.Util);F=$.Safe(b.LayoutProvider);G=$.Safe(k.LayoutUtils);H=$.Safe(h.Reactive);I=$.Safe(k.Validator);J=$.Safe(q.ValidatorProvidor);K=$.Safe($$.RegExp);L=$.Safe(a.Collections);M=$.Safe(L.Dictionary);N=$.Safe(b.ElementStore);O=$.Safe(b.Enhance);P=$.Safe(O.FormButtonConfiguration);Q=$.Safe(O.FormContainerConfiguration);R=$.Safe(O.Padding);S=$.Safe(O.ManyConfiguration);T=$.Safe(O.ValidationFrameConfiguration);U=$.Safe(O.ValidationIconConfiguration);V=$.Safe($$.JSON);W=$.Safe(b.FormletBuilder);X=$.Safe(b.Layout);Y=$.Safe(X.FormRowConfiguration);Z=$.Safe(X.LabelConfiguration);_0=$.Safe(X.Padding);return _1=$.Safe(a.Enumerator);});$.OnLoad(function(){r.Do();q.Validator();q.RX();q.Layout();q.DefaultLayout();t.InputTextClass();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;$.Define($$,{ellipsoid:{org:{SharpAngles:{Samples:{FirstExample:{Client:{Main:$.Field(function(){return a.module("todoApp",[]).controller("TodoController",["$scope",function(x){x.todos=c.Call("ellipsoid.org.SharpAngles.Samples:0",[]);x.addTodo=function(){var z,A;z=x.todos;A=[{text:x.todoText,done:false}];z.push.apply(z,[].concat(A));x.todoText="";return;};x.remaining=function(){return d.filter(function(C){return!C.done;},x.todos).length;};x.archive=function(){x.todos=d.filter(function(E){return!E.done;},x.todos);return;};return;}]);})}},SecondExample:{Client:{DataSource:$.Class({},{New:function(){return $.New(this,{});}}),Main:$.Field(function(){return a.module("project",["ngRoute","firebase"]).value("fbURL","https://angularjs-projects.firebaseio.com/").factory("Projects",["$firebase","fbURL",$.Tupled(function(F){return F[0].call(null,new e(F[1])).$asArray();})]).config(["$routeProvider",function(G){return G.when("/",{controller:"ListCtrl",templateUrl:"list.html"}).when("/edit/:projectId",{controller:"EditCtrl",templateUrl:"detail.html"}).when("/new",{controller:"CreateCtrl",templateUrl:"detail.html"}).otherwise({redirectTo:"/"});}]).controller("ListCtrl",["$scope","Projects",$.Tupled(function(H){H[0].projects=H[1];return;})]).controller("CreateCtrl",["$scope","$location","Projects",$.Tupled(function(I){var J,K,L;J=I[0];K=I[1];L=I[2];J.save=function(){L.$add(J.project).then(function(){return K.path("/");});};return;})]).controller("EditCtrl",["$scope","$location","$routeParams","Projects",$.Tupled(function(O){var P,Q,R,S,T;P=O[0];Q=O[1];R=O[2];S=O[3];T=S.$indexFor(R.projectId);P.projects=S;P.project=P.projects[T];P.destroy=function(){P.projects.$remove(P.project).then(function(){return Q.path("/");});};P.save=function(){P.projects.$save(P.project).then(function(){return Q.path("/");});};return;})]);}),Project:$.Class({get_$id:function(){return"";},get_description:function(){return"";},get_name:function(){return"";},get_site:function(){return"";}},{New:function(){return $.New(this,{});}})}},Tests:{TestsApp:$.Field(function(){return a.module("testsApp",["ui.router"]).config(["$resource",function(){return null;}]).config(["$stateProvider","$urlRouterProvider",$.Tupled(function(Z){return Z[0].state("state1",{url:"/state1",templateUrl:"partials/state1.html"}).state("state1.list",{url:"/list",templateUrl:"partials/state1.list.html"}).state("state2",{url:"/state2",templateUrl:"partials/state2.html"});})]).config(["$urlMatcherFactory",function(_0){return _0.strictMode(false);}]).controller("TestController",["$scope",function(_1){return _1.$on("blah",function(){return null;});}]).run(["$state",function(_3){return _3.transitionTo("foo");}]).run(["$sce",function(){return null;}]);})},ThirdExample:{Client:{Main:$.Field(function(){var _5,_6,_7,_8,_9,_;_5=g.add(h.Div(i.ofArray([h.Attr().Class("tabbable")])),i.ofArray([g.add(h.UL(i.ofArray([h.Attr().Class("nav nav-tabs")])),i.ofArray([g.add(h.LI(i.ofArray([(o.NgRepeat())("pane in panes"),(o.NgClass())("{active:pane.selected}")])),i.ofArray([g.add(h.A(i.ofArray([h.HRef(""),(o.NgClick())("select(pane)")])),i.ofArray([h.Text("{{pane.title}}")]))]))])),h.Div(i.ofArray([h.Attr().Class("tab-content"),(o.NgTransclude())("")]))]));_6=o.Templatify(_5);_7=h.Div(i.ofArray([h.Attr().Class("tab-pane"),(o.NgClass())("{active: selected}"),(o.NgTransclude())("")]));_8=o.Templatify(_7);_9=a.module("components",[]);_=_9.controller("TabsCtrl",["$scope","$element",function(ba){ba.panes=[];ba.select=function(bc){d.iter(function(bd){bd.selected=false;return;},ba.panes);bc.selected=true;return;};this.addPane=function(bd){var be,bf,bg;be=ba.panes;if(p.GetLength(be)===0){ba.select.call(null,bd);}bf=ba.panes;bg=[bd];bf.push.apply(bf,[].concat(bg));return;};return;}]);_9.directive("tabs",function(){return{restrict:"E",transclude:true,scope:{},controller:"TabsCtrl",template:_6,replace:true};}).directive("pane",function(){return{require:"^tabs",restrict:"E",transclude:true,scope:{title:"@"},link:$.Tupled(function(bj){return bj[3].addPane.call(null,bj[0]);}),template:_8,replace:true};});return a.module("app",["components"]).controller("BeerCounter",["$scope","$locale",$.Tupled(function(bk){var bl,bm;bl=bk[0];bm=bk[1];bl.beers=q.toArray(r.range(0,6));return bm.id==="en-us"?void(bl.beerForms={"0":"no beers",one:"{} beer",few:"{} beer",other:"{} beers"}):void(bl.beerForms={"0":"\ufffdiadne pivo",one:"{} pivo",few:"{} piv\ufffd",other:"{} p\ufffdv"});})]);}),NgClass:$.Field(function(){return function(bn){return h.Attr().NewAttr("ng-class",bn);};}),NgClick:$.Field(function(){return function(bo){return h.Attr().NewAttr("ng-click",bo);};}),NgRepeat:$.Field(function(){return function(bp){return h.Attr().NewAttr("ng-repeat",bp);};}),NgTransclude:$.Field(function(){return function(bq){return h.Attr().NewAttr("ng-transclude",bq);};}),Templatify:function(br){return h.Div(i.ofArray([br])).get_Html();}}}}}}}});$.OnInit(function(){a=$.Safe($$.angular);b=$.Safe($$.IntelliFactory.WebSharper);c=$.Safe(b.Remoting);d=$.Safe(b.Arrays);e=$.Safe($$.Firebase);f=$.Safe(b.Html);g=$.Safe(f.Operators);h=$.Safe(f.Default);i=$.Safe(b.List);j=$.Safe($$.ellipsoid);k=$.Safe(j.org);l=$.Safe(k.SharpAngles);m=$.Safe(l.Samples);n=$.Safe(m.ThirdExample);o=$.Safe(n.Client);p=$.Safe(b.IntrinsicFunctionProxy);q=$.Safe(b.Seq);r=$.Safe(b.Operators);s=$.Safe(m.FirstExample);t=$.Safe(s.Client);u=$.Safe(m.SecondExample);v=$.Safe(u.Client);return w=$.Safe(m.Tests);});$.OnLoad(function(){o.NgTransclude();o.NgRepeat();o.NgClick();o.NgClass();o.Main();w.TestsApp();v.Main();t.Main();return;});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
